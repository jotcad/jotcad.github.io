(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))l(c);new MutationObserver(c=>{for(const f of c)if(f.type==="childList")for(const m of f.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&l(m)}).observe(document,{childList:!0,subtree:!0});function i(c){const f={};return c.integrity&&(f.integrity=c.integrity),c.referrerPolicy&&(f.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?f.credentials="include":c.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function l(c){if(c.ep)return;c.ep=!0;const f=i(c);fetch(c.href,f)}})();var wu={exports:{}},Ql={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pp;function dv(){if(Pp)return Ql;Pp=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function i(l,c,f){var m=null;if(f!==void 0&&(m=""+f),c.key!==void 0&&(m=""+c.key),"key"in c){f={};for(var g in c)g!=="key"&&(f[g]=c[g])}else f=c;return c=f.ref,{$$typeof:n,type:l,key:m,ref:c!==void 0?c:null,props:f}}return Ql.Fragment=e,Ql.jsx=i,Ql.jsxs=i,Ql}var Gp;function pv(){return Gp||(Gp=1,wu.exports=dv()),wu.exports}var S=pv(),Du={exports:{}},He={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hp;function mv(){if(Hp)return He;Hp=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.consumer"),m=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),E=Symbol.iterator;function x(M){return M===null||typeof M!="object"?null:(M=E&&M[E]||M["@@iterator"],typeof M=="function"?M:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,q={};function z(M,$,ue){this.props=M,this.context=$,this.refs=q,this.updater=ue||U}z.prototype.isReactComponent={},z.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},z.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function F(){}F.prototype=z.prototype;function Z(M,$,ue){this.props=M,this.context=$,this.refs=q,this.updater=ue||U}var ee=Z.prototype=new F;ee.constructor=Z,O(ee,z.prototype),ee.isPureReactComponent=!0;var ce=Array.isArray;function fe(){}var oe={H:null,A:null,T:null,S:null},pe=Object.prototype.hasOwnProperty;function j(M,$,ue){var se=ue.ref;return{$$typeof:n,type:M,key:$,ref:se!==void 0?se:null,props:ue}}function me(M,$){return j(M.type,$,M.props)}function re(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function ve(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ue){return $[ue]})}var nt=/\/+/g;function Bt(M,$){return typeof M=="object"&&M!==null&&M.key!=null?ve(""+M.key):$.toString(36)}function yt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(fe,fe):(M.status="pending",M.then(function($){M.status==="pending"&&(M.status="fulfilled",M.value=$)},function($){M.status==="pending"&&(M.status="rejected",M.reason=$)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function L(M,$,ue,se,Q){var ze=typeof M;(ze==="undefined"||ze==="boolean")&&(M=null);var ot=!1;if(M===null)ot=!0;else switch(ze){case"bigint":case"string":case"number":ot=!0;break;case"object":switch(M.$$typeof){case n:case e:ot=!0;break;case v:return ot=M._init,L(ot(M._payload),$,ue,se,Q)}}if(ot)return Q=Q(M),ot=se===""?"."+Bt(M,0):se,ce(Q)?(ue="",ot!=null&&(ue=ot.replace(nt,"$&/")+"/"),L(Q,$,ue,"",function(qt){return qt})):Q!=null&&(re(Q)&&(Q=me(Q,ue+(Q.key==null||M&&M.key===Q.key?"":(""+Q.key).replace(nt,"$&/")+"/")+ot)),$.push(Q)),1;ot=0;var Pt=se===""?".":se+":";if(ce(M))for(var he=0;he<M.length;he++)se=M[he],ze=Pt+Bt(se,he),ot+=L(se,$,ue,ze,Q);else if(he=x(M),typeof he=="function")for(M=he.call(M),he=0;!(se=M.next()).done;)se=se.value,ze=Pt+Bt(se,he++),ot+=L(se,$,ue,ze,Q);else if(ze==="object"){if(typeof M.then=="function")return L(yt(M),$,ue,se,Q);throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ot}function ie(M,$,ue){if(M==null)return M;var se=[],Q=0;return L(M,se,"","",function(ze){return $.call(ue,ze,Q++)}),se}function xe(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(ue){(M._status===0||M._status===-1)&&(M._status=1,M._result=ue)},function(ue){(M._status===0||M._status===-1)&&(M._status=2,M._result=ue)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var qe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},Qe={map:ie,forEach:function(M,$,ue){ie(M,function(){$.apply(this,arguments)},ue)},count:function(M){var $=0;return ie(M,function(){$++}),$},toArray:function(M){return ie(M,function($){return $})||[]},only:function(M){if(!re(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return He.Activity=C,He.Children=Qe,He.Component=z,He.Fragment=i,He.Profiler=c,He.PureComponent=Z,He.StrictMode=l,He.Suspense=y,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=oe,He.__COMPILER_RUNTIME={__proto__:null,c:function(M){return oe.H.useMemoCache(M)}},He.cache=function(M){return function(){return M.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(M,$,ue){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var se=O({},M.props),Q=M.key;if($!=null)for(ze in $.key!==void 0&&(Q=""+$.key),$)!pe.call($,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&$.ref===void 0||(se[ze]=$[ze]);var ze=arguments.length-2;if(ze===1)se.children=ue;else if(1<ze){for(var ot=Array(ze),Pt=0;Pt<ze;Pt++)ot[Pt]=arguments[Pt+2];se.children=ot}return j(M.type,Q,se)},He.createContext=function(M){return M={$$typeof:m,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:f,_context:M},M},He.createElement=function(M,$,ue){var se,Q={},ze=null;if($!=null)for(se in $.key!==void 0&&(ze=""+$.key),$)pe.call($,se)&&se!=="key"&&se!=="__self"&&se!=="__source"&&(Q[se]=$[se]);var ot=arguments.length-2;if(ot===1)Q.children=ue;else if(1<ot){for(var Pt=Array(ot),he=0;he<ot;he++)Pt[he]=arguments[he+2];Q.children=Pt}if(M&&M.defaultProps)for(se in ot=M.defaultProps,ot)Q[se]===void 0&&(Q[se]=ot[se]);return j(M,ze,Q)},He.createRef=function(){return{current:null}},He.forwardRef=function(M){return{$$typeof:g,render:M}},He.isValidElement=re,He.lazy=function(M){return{$$typeof:v,_payload:{_status:-1,_result:M},_init:xe}},He.memo=function(M,$){return{$$typeof:h,type:M,compare:$===void 0?null:$}},He.startTransition=function(M){var $=oe.T,ue={};oe.T=ue;try{var se=M(),Q=oe.S;Q!==null&&Q(ue,se),typeof se=="object"&&se!==null&&typeof se.then=="function"&&se.then(fe,qe)}catch(ze){qe(ze)}finally{$!==null&&ue.types!==null&&($.types=ue.types),oe.T=$}},He.unstable_useCacheRefresh=function(){return oe.H.useCacheRefresh()},He.use=function(M){return oe.H.use(M)},He.useActionState=function(M,$,ue){return oe.H.useActionState(M,$,ue)},He.useCallback=function(M,$){return oe.H.useCallback(M,$)},He.useContext=function(M){return oe.H.useContext(M)},He.useDebugValue=function(){},He.useDeferredValue=function(M,$){return oe.H.useDeferredValue(M,$)},He.useEffect=function(M,$){return oe.H.useEffect(M,$)},He.useEffectEvent=function(M){return oe.H.useEffectEvent(M)},He.useId=function(){return oe.H.useId()},He.useImperativeHandle=function(M,$,ue){return oe.H.useImperativeHandle(M,$,ue)},He.useInsertionEffect=function(M,$){return oe.H.useInsertionEffect(M,$)},He.useLayoutEffect=function(M,$){return oe.H.useLayoutEffect(M,$)},He.useMemo=function(M,$){return oe.H.useMemo(M,$)},He.useOptimistic=function(M,$){return oe.H.useOptimistic(M,$)},He.useReducer=function(M,$,ue){return oe.H.useReducer(M,$,ue)},He.useRef=function(M){return oe.H.useRef(M)},He.useState=function(M){return oe.H.useState(M)},He.useSyncExternalStore=function(M,$,ue){return oe.H.useSyncExternalStore(M,$,ue)},He.useTransition=function(){return oe.H.useTransition()},He.version="19.2.0",He}var zp;function Wu(){return zp||(zp=1,Du.exports=mv()),Du.exports}var ae=Wu(),bu={exports:{}},Zl={},ku={exports:{}},Uu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op;function hv(){return Op||(Op=1,(function(n){function e(L,ie){var xe=L.length;L.push(ie);e:for(;0<xe;){var qe=xe-1>>>1,Qe=L[qe];if(0<c(Qe,ie))L[qe]=ie,L[xe]=Qe,xe=qe;else break e}}function i(L){return L.length===0?null:L[0]}function l(L){if(L.length===0)return null;var ie=L[0],xe=L.pop();if(xe!==ie){L[0]=xe;e:for(var qe=0,Qe=L.length,M=Qe>>>1;qe<M;){var $=2*(qe+1)-1,ue=L[$],se=$+1,Q=L[se];if(0>c(ue,xe))se<Qe&&0>c(Q,ue)?(L[qe]=Q,L[se]=xe,qe=se):(L[qe]=ue,L[$]=xe,qe=$);else if(se<Qe&&0>c(Q,xe))L[qe]=Q,L[se]=xe,qe=se;else break e}}return ie}function c(L,ie){var xe=L.sortIndex-ie.sortIndex;return xe!==0?xe:L.id-ie.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var f=performance;n.unstable_now=function(){return f.now()}}else{var m=Date,g=m.now();n.unstable_now=function(){return m.now()-g}}var y=[],h=[],v=1,C=null,E=3,x=!1,U=!1,O=!1,q=!1,z=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,Z=typeof setImmediate<"u"?setImmediate:null;function ee(L){for(var ie=i(h);ie!==null;){if(ie.callback===null)l(h);else if(ie.startTime<=L)l(h),ie.sortIndex=ie.expirationTime,e(y,ie);else break;ie=i(h)}}function ce(L){if(O=!1,ee(L),!U)if(i(y)!==null)U=!0,fe||(fe=!0,ve());else{var ie=i(h);ie!==null&&yt(ce,ie.startTime-L)}}var fe=!1,oe=-1,pe=5,j=-1;function me(){return q?!0:!(n.unstable_now()-j<pe)}function re(){if(q=!1,fe){var L=n.unstable_now();j=L;var ie=!0;try{e:{U=!1,O&&(O=!1,F(oe),oe=-1),x=!0;var xe=E;try{t:{for(ee(L),C=i(y);C!==null&&!(C.expirationTime>L&&me());){var qe=C.callback;if(typeof qe=="function"){C.callback=null,E=C.priorityLevel;var Qe=qe(C.expirationTime<=L);if(L=n.unstable_now(),typeof Qe=="function"){C.callback=Qe,ee(L),ie=!0;break t}C===i(y)&&l(y),ee(L)}else l(y);C=i(y)}if(C!==null)ie=!0;else{var M=i(h);M!==null&&yt(ce,M.startTime-L),ie=!1}}break e}finally{C=null,E=xe,x=!1}ie=void 0}}finally{ie?ve():fe=!1}}}var ve;if(typeof Z=="function")ve=function(){Z(re)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,Bt=nt.port2;nt.port1.onmessage=re,ve=function(){Bt.postMessage(null)}}else ve=function(){z(re,0)};function yt(L,ie){oe=z(function(){L(n.unstable_now())},ie)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(L){L.callback=null},n.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pe=0<L?Math.floor(1e3/L):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(L){switch(E){case 1:case 2:case 3:var ie=3;break;default:ie=E}var xe=E;E=ie;try{return L()}finally{E=xe}},n.unstable_requestPaint=function(){q=!0},n.unstable_runWithPriority=function(L,ie){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var xe=E;E=L;try{return ie()}finally{E=xe}},n.unstable_scheduleCallback=function(L,ie,xe){var qe=n.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?qe+xe:qe):xe=qe,L){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=xe+Qe,L={id:v++,callback:ie,priorityLevel:L,startTime:xe,expirationTime:Qe,sortIndex:-1},xe>qe?(L.sortIndex=xe,e(h,L),i(y)===null&&L===i(h)&&(O?(F(oe),oe=-1):O=!0,yt(ce,xe-qe))):(L.sortIndex=Qe,e(y,L),U||x||(U=!0,fe||(fe=!0,ve()))),L},n.unstable_shouldYield=me,n.unstable_wrapCallback=function(L){var ie=E;return function(){var xe=E;E=ie;try{return L.apply(this,arguments)}finally{E=xe}}}})(Uu)),Uu}var Fp;function gv(){return Fp||(Fp=1,ku.exports=hv()),ku.exports}var Lu={exports:{}},fn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jp;function yv(){if(Jp)return fn;Jp=1;var n=Wu();function e(y){var h="https://react.dev/errors/"+y;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)h+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var l={d:{f:i,r:function(){throw Error(e(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},c=Symbol.for("react.portal");function f(y,h,v){var C=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:C==null?null:""+C,children:y,containerInfo:h,implementation:v}}var m=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(y,h){if(y==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return fn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=l,fn.createPortal=function(y,h){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return f(y,h,null,v)},fn.flushSync=function(y){var h=m.T,v=l.p;try{if(m.T=null,l.p=2,y)return y()}finally{m.T=h,l.p=v,l.d.f()}},fn.preconnect=function(y,h){typeof y=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,l.d.C(y,h))},fn.prefetchDNS=function(y){typeof y=="string"&&l.d.D(y)},fn.preinit=function(y,h){if(typeof y=="string"&&h&&typeof h.as=="string"){var v=h.as,C=g(v,h.crossOrigin),E=typeof h.integrity=="string"?h.integrity:void 0,x=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;v==="style"?l.d.S(y,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:C,integrity:E,fetchPriority:x}):v==="script"&&l.d.X(y,{crossOrigin:C,integrity:E,fetchPriority:x,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},fn.preinitModule=function(y,h){if(typeof y=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var v=g(h.as,h.crossOrigin);l.d.M(y,{crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&l.d.M(y)},fn.preload=function(y,h){if(typeof y=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var v=h.as,C=g(v,h.crossOrigin);l.d.L(y,v,{crossOrigin:C,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},fn.preloadModule=function(y,h){if(typeof y=="string")if(h){var v=g(h.as,h.crossOrigin);l.d.m(y,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:v,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else l.d.m(y)},fn.requestFormReset=function(y){l.d.r(y)},fn.unstable_batchedUpdates=function(y,h){return y(h)},fn.useFormState=function(y,h,v){return m.H.useFormState(y,h,v)},fn.useFormStatus=function(){return m.H.useHostTransitionStatus()},fn.version="19.2.0",fn}var Yp;function vv(){if(Yp)return Lu.exports;Yp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Lu.exports=yv(),Lu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $p;function Tv(){if($p)return Zl;$p=1;var n=gv(),e=Wu(),i=vv();function l(t){var o="https://react.dev/errors/"+t;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)o+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+t+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function f(t){var o=t,s=t;if(t.alternate)for(;o.return;)o=o.return;else{t=o;do o=t,(o.flags&4098)!==0&&(s=o.return),t=o.return;while(t)}return o.tag===3?s:null}function m(t){if(t.tag===13){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function g(t){if(t.tag===31){var o=t.memoizedState;if(o===null&&(t=t.alternate,t!==null&&(o=t.memoizedState)),o!==null)return o.dehydrated}return null}function y(t){if(f(t)!==t)throw Error(l(188))}function h(t){var o=t.alternate;if(!o){if(o=f(t),o===null)throw Error(l(188));return o!==t?null:t}for(var s=t,u=o;;){var d=s.return;if(d===null)break;var p=d.alternate;if(p===null){if(u=d.return,u!==null){s=u;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===s)return y(d),t;if(p===u)return y(d),o;p=p.sibling}throw Error(l(188))}if(s.return!==u.return)s=d,u=p;else{for(var T=!1,A=d.child;A;){if(A===s){T=!0,s=d,u=p;break}if(A===u){T=!0,u=d,s=p;break}A=A.sibling}if(!T){for(A=p.child;A;){if(A===s){T=!0,s=p,u=d;break}if(A===u){T=!0,u=p,s=d;break}A=A.sibling}if(!T)throw Error(l(189))}}if(s.alternate!==u)throw Error(l(190))}if(s.tag!==3)throw Error(l(188));return s.stateNode.current===s?t:o}function v(t){var o=t.tag;if(o===5||o===26||o===27||o===6)return t;for(t=t.child;t!==null;){if(o=v(t),o!==null)return o;t=t.sibling}return null}var C=Object.assign,E=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),q=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),F=Symbol.for("react.consumer"),Z=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),fe=Symbol.for("react.suspense_list"),oe=Symbol.for("react.memo"),pe=Symbol.for("react.lazy"),j=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function ve(t){return t===null||typeof t!="object"?null:(t=re&&t[re]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Symbol.for("react.client.reference");function Bt(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===nt?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case O:return"Fragment";case z:return"Profiler";case q:return"StrictMode";case ce:return"Suspense";case fe:return"SuspenseList";case j:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case U:return"Portal";case Z:return t.displayName||"Context";case F:return(t._context.displayName||"Context")+".Consumer";case ee:var o=t.render;return t=t.displayName,t||(t=o.displayName||o.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case oe:return o=t.displayName||null,o!==null?o:Bt(t.type)||"Memo";case pe:o=t._payload,t=t._init;try{return Bt(t(o))}catch{}}return null}var yt=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe={pending:!1,data:null,method:null,action:null},qe=[],Qe=-1;function M(t){return{current:t}}function $(t){0>Qe||(t.current=qe[Qe],qe[Qe]=null,Qe--)}function ue(t,o){Qe++,qe[Qe]=t.current,t.current=o}var se=M(null),Q=M(null),ze=M(null),ot=M(null);function Pt(t,o){switch(ue(ze,o),ue(Q,t),ue(se,null),o.nodeType){case 9:case 11:t=(t=o.documentElement)&&(t=t.namespaceURI)?rp(t):0;break;default:if(t=o.tagName,o=o.namespaceURI)o=rp(o),t=up(o,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}$(se),ue(se,t)}function he(){$(se),$(Q),$(ze)}function qt(t){t.memoizedState!==null&&ue(ot,t);var o=se.current,s=up(o,t.type);o!==s&&(ue(Q,t),ue(se,s))}function rn(t){Q.current===t&&($(se),$(Q)),ot.current===t&&($(ot),Yl._currentValue=xe)}var P,le;function W(t){if(P===void 0)try{throw Error()}catch(s){var o=s.stack.trim().match(/\n( *(at )?)/);P=o&&o[1]||"",le=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+P+t+le}var be=!1;function Ve(t,o){if(!t||be)return"";be=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(o){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(H){var B=H}Reflect.construct(t,[],X)}else{try{X.call()}catch(H){B=H}t.call(X.prototype)}}else{try{throw Error()}catch(H){B=H}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(H){if(H&&B&&typeof H.stack=="string")return[H.stack,B.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=u.DetermineComponentFrameRoot(),T=p[0],A=p[1];if(T&&A){var _=T.split(`
`),k=A.split(`
`);for(d=u=0;u<_.length&&!_[u].includes("DetermineComponentFrameRoot");)u++;for(;d<k.length&&!k[d].includes("DetermineComponentFrameRoot");)d++;if(u===_.length||d===k.length)for(u=_.length-1,d=k.length-1;1<=u&&0<=d&&_[u]!==k[d];)d--;for(;1<=u&&0<=d;u--,d--)if(_[u]!==k[d]){if(u!==1||d!==1)do if(u--,d--,0>d||_[u]!==k[d]){var J=`
`+_[u].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=u&&0<=d);break}}}finally{be=!1,Error.prepareStackTrace=s}return(s=t?t.displayName||t.name:"")?W(s):""}function Me(t,o){switch(t.tag){case 26:case 27:case 5:return W(t.type);case 16:return W("Lazy");case 13:return t.child!==o&&o!==null?W("Suspense Fallback"):W("Suspense");case 19:return W("SuspenseList");case 0:case 15:return Ve(t.type,!1);case 11:return Ve(t.type.render,!1);case 1:return Ve(t.type,!0);case 31:return W("Activity");default:return""}}function ft(t){try{var o="",s=null;do o+=Me(t,s),s=t,t=t.return;while(t);return o}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Se=Object.prototype.hasOwnProperty,ke=n.unstable_scheduleCallback,st=n.unstable_cancelCallback,Ue=n.unstable_shouldYield,Ke=n.unstable_requestPaint,Le=n.unstable_now,Ce=n.unstable_getCurrentPriorityLevel,Ae=n.unstable_ImmediatePriority,Pe=n.unstable_UserBlockingPriority,dt=n.unstable_NormalPriority,rt=n.unstable_LowPriority,pt=n.unstable_IdlePriority,It=n.log,Ze=n.unstable_setDisableYieldValue,we=null,Oe=null;function Xe(t){if(typeof It=="function"&&Ze(t),Oe&&typeof Oe.setStrictMode=="function")try{Oe.setStrictMode(we,t)}catch{}}var Te=Math.clz32?Math.clz32:Tt,We=Math.log,vt=Math.LN2;function Tt(t){return t>>>=0,t===0?32:31-(We(t)/vt|0)|0}var Ct=256,ut=262144,Dt=4194304;function At(t){var o=t&42;if(o!==0)return o;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function $t(t,o,s){var u=t.pendingLanes;if(u===0)return 0;var d=0,p=t.suspendedLanes,T=t.pingedLanes;t=t.warmLanes;var A=u&134217727;return A!==0?(u=A&~p,u!==0?d=At(u):(T&=A,T!==0?d=At(T):s||(s=A&~t,s!==0&&(d=At(s))))):(A=u&~p,A!==0?d=At(A):T!==0?d=At(T):s||(s=u&~t,s!==0&&(d=At(s)))),d===0?0:o!==0&&o!==d&&(o&p)===0&&(p=d&-d,s=o&-o,p>=s||p===32&&(s&4194048)!==0)?o:d}function Ft(t,o){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&o)===0}function pn(t,o){switch(t){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mn(){var t=Dt;return Dt<<=1,(Dt&62914560)===0&&(Dt=4194304),t}function en(t){for(var o=[],s=0;31>s;s++)o.push(t);return o}function St(t,o){t.pendingLanes|=o,o!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function hn(t,o,s,u,d,p){var T=t.pendingLanes;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=s,t.entangledLanes&=s,t.errorRecoveryDisabledLanes&=s,t.shellSuspendCounter=0;var A=t.entanglements,_=t.expirationTimes,k=t.hiddenUpdates;for(s=T&~s;0<s;){var J=31-Te(s),X=1<<J;A[J]=0,_[J]=-1;var B=k[J];if(B!==null)for(k[J]=null,J=0;J<B.length;J++){var H=B[J];H!==null&&(H.lane&=-536870913)}s&=~X}u!==0&&un(t,u,0),p!==0&&d===0&&t.tag!==0&&(t.suspendedLanes|=p&~(T&~o))}function un(t,o,s){t.pendingLanes|=o,t.suspendedLanes&=~o;var u=31-Te(o);t.entangledLanes|=o,t.entanglements[u]=t.entanglements[u]|1073741824|s&261930}function Zn(t,o){var s=t.entangledLanes|=o;for(t=t.entanglements;s;){var u=31-Te(s),d=1<<u;d&o|t[u]&o&&(t[u]|=o),s&=~d}}function il(t,o){var s=o&-o;return s=(s&42)!==0?1:mi(s),(s&(t.suspendedLanes|o))!==0?0:s}function mi(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function hi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ll(){var t=ie.p;return t!==0?t:(t=window.event,t===void 0?32:bp(t.type))}function sl(t,o){var s=ie.p;try{return ie.p=t,o()}finally{ie.p=s}}var Yn=Math.random().toString(36).slice(2),Wt="__reactFiber$"+Yn,cn="__reactProps$"+Yn,So="__reactContainer$"+Yn,al="__reactEvents$"+Yn,xa="__reactListeners$"+Yn,ts="__reactHandles$"+Yn,gi="__reactResources$"+Yn,$o="__reactMarker$"+Yn;function yi(t){delete t[Wt],delete t[cn],delete t[al],delete t[xa],delete t[ts]}function Wn(t){var o=t[Wt];if(o)return o;for(var s=t.parentNode;s;){if(o=s[So]||s[Wt]){if(s=o.alternate,o.child!==null||s!==null&&s.child!==null)for(t=gp(t);t!==null;){if(s=t[Wt])return s;t=gp(t)}return o}t=s,s=t.parentNode}return null}function Eo(t){if(t=t[Wt]||t[So]){var o=t.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return t}return null}function Ao(t){var o=t.tag;if(o===5||o===26||o===27||o===6)return t.stateNode;throw Error(l(33))}function tn(t){var o=t[gi];return o||(o=t[gi]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Lt(t){t[$o]=!0}var jn=new Set,Ko={};function eo(t,o){to(t,o),to(t+"Capture",o)}function to(t,o){for(Ko[t]=o,t=0;t<o.length;t++)jn.add(o[t])}var ns=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),os={},R={};function I(t){return Se.call(R,t)?!0:Se.call(os,t)?!1:ns.test(t)?R[t]=!0:(os[t]=!0,!1)}function w(t,o,s){if(I(o))if(s===null)t.removeAttribute(o);else{switch(typeof s){case"undefined":case"function":case"symbol":t.removeAttribute(o);return;case"boolean":var u=o.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){t.removeAttribute(o);return}}t.setAttribute(o,""+s)}}function G(t,o,s){if(s===null)t.removeAttribute(o);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(o);return}t.setAttribute(o,""+s)}}function V(t,o,s,u){if(u===null)t.removeAttribute(s);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttributeNS(o,s,""+u)}}function Y(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function te(t){var o=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ne(t,o,s){var u=Object.getOwnPropertyDescriptor(t.constructor.prototype,o);if(!t.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var d=u.get,p=u.set;return Object.defineProperty(t,o,{configurable:!0,get:function(){return d.call(this)},set:function(T){s=""+T,p.call(this,T)}}),Object.defineProperty(t,o,{enumerable:u.enumerable}),{getValue:function(){return s},setValue:function(T){s=""+T},stopTracking:function(){t._valueTracker=null,delete t[o]}}}}function de(t){if(!t._valueTracker){var o=te(t)?"checked":"value";t._valueTracker=ne(t,o,""+t[o])}}function Ne(t){if(!t)return!1;var o=t._valueTracker;if(!o)return!0;var s=o.getValue(),u="";return t&&(u=te(t)?t.checked?"true":"false":t.value),t=u,t!==s?(o.setValue(t),!0):!1}function _e(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Be=/[\n"\\]/g;function Fe(t){return t.replace(Be,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function ct(t,o,s,u,d,p,T,A){t.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?t.type=T:t.removeAttribute("type"),o!=null?T==="number"?(o===0&&t.value===""||t.value!=o)&&(t.value=""+Y(o)):t.value!==""+Y(o)&&(t.value=""+Y(o)):T!=="submit"&&T!=="reset"||t.removeAttribute("value"),o!=null?je(t,T,Y(o)):s!=null?je(t,T,Y(s)):u!=null&&t.removeAttribute("value"),d==null&&p!=null&&(t.defaultChecked=!!p),d!=null&&(t.checked=d&&typeof d!="function"&&typeof d!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?t.name=""+Y(A):t.removeAttribute("name")}function De(t,o,s,u,d,p,T,A){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),o!=null||s!=null){if(!(p!=="submit"&&p!=="reset"||o!=null)){de(t);return}s=s!=null?""+Y(s):"",o=o!=null?""+Y(o):s,A||o===t.value||(t.value=o),t.defaultValue=o}u=u??d,u=typeof u!="function"&&typeof u!="symbol"&&!!u,t.checked=A?t.checked:!!u,t.defaultChecked=!!u,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(t.name=T),de(t)}function je(t,o,s){o==="number"&&_e(t.ownerDocument)===t||t.defaultValue===""+s||(t.defaultValue=""+s)}function Ye(t,o,s,u){if(t=t.options,o){o={};for(var d=0;d<s.length;d++)o["$"+s[d]]=!0;for(s=0;s<t.length;s++)d=o.hasOwnProperty("$"+t[s].value),t[s].selected!==d&&(t[s].selected=d),d&&u&&(t[s].defaultSelected=!0)}else{for(s=""+Y(s),o=null,d=0;d<t.length;d++){if(t[d].value===s){t[d].selected=!0,u&&(t[d].defaultSelected=!0);return}o!==null||t[d].disabled||(o=t[d])}o!==null&&(o.selected=!0)}}function Ge(t,o,s){if(o!=null&&(o=""+Y(o),o!==t.value&&(t.value=o),s==null)){t.defaultValue!==o&&(t.defaultValue=o);return}t.defaultValue=s!=null?""+Y(s):""}function Gt(t,o,s,u){if(o==null){if(u!=null){if(s!=null)throw Error(l(92));if(yt(u)){if(1<u.length)throw Error(l(93));u=u[0]}s=u}s==null&&(s=""),o=s}s=Y(o),t.defaultValue=s,u=t.textContent,u===s&&u!==""&&u!==null&&(t.value=u),de(t)}function Ht(t,o){if(o){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=o;return}}t.textContent=o}var An=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Dn(t,o,s){var u=o.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?u?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="":u?t.setProperty(o,s):typeof s!="number"||s===0||An.has(o)?o==="float"?t.cssFloat=s:t[o]=(""+s).trim():t[o]=s+"px"}function rl(t,o,s){if(o!=null&&typeof o!="object")throw Error(l(62));if(t=t.style,s!=null){for(var u in s)!s.hasOwnProperty(u)||o!=null&&o.hasOwnProperty(u)||(u.indexOf("--")===0?t.setProperty(u,""):u==="float"?t.cssFloat="":t[u]="");for(var d in o)u=o[d],o.hasOwnProperty(d)&&s[d]!==u&&Dn(t,d,u)}else for(var p in o)o.hasOwnProperty(p)&&Dn(t,p,o[p])}function Ma(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ug=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function is(t){return ug.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function no(){}var Na=null;function Ra(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vi=null,Ti=null;function sc(t){var o=Eo(t);if(o&&(t=o.stateNode)){var s=t[cn]||null;e:switch(t=o.stateNode,o.type){case"input":if(ct(t,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),o=s.name,s.type==="radio"&&o!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Fe(""+o)+'"][type="radio"]'),o=0;o<s.length;o++){var u=s[o];if(u!==t&&u.form===t.form){var d=u[cn]||null;if(!d)throw Error(l(90));ct(u,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(o=0;o<s.length;o++)u=s[o],u.form===t.form&&Ne(u)}break e;case"textarea":Ge(t,s.value,s.defaultValue);break e;case"select":o=s.value,o!=null&&Ye(t,!!s.multiple,o,!1)}}}var Ia=!1;function ac(t,o,s){if(Ia)return t(o,s);Ia=!0;try{var u=t(o);return u}finally{if(Ia=!1,(vi!==null||Ti!==null)&&(Js(),vi&&(o=vi,t=Ti,Ti=vi=null,sc(o),t)))for(o=0;o<t.length;o++)sc(t[o])}}function ul(t,o){var s=t.stateNode;if(s===null)return null;var u=s[cn]||null;if(u===null)return null;s=u[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(t=t.type,u=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!u;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(l(231,o,typeof s));return s}var oo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wa=!1;if(oo)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){wa=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{wa=!1}var _o=null,Da=null,ls=null;function rc(){if(ls)return ls;var t,o=Da,s=o.length,u,d="value"in _o?_o.value:_o.textContent,p=d.length;for(t=0;t<s&&o[t]===d[t];t++);var T=s-t;for(u=1;u<=T&&o[s-u]===d[p-u];u++);return ls=d.slice(t,1<u?1-u:void 0)}function ss(t){var o=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&o===13&&(t=13)):t=o,t===10&&(t=13),32<=t||t===13?t:0}function as(){return!0}function uc(){return!1}function yn(t){function o(s,u,d,p,T){this._reactName=s,this._targetInst=d,this.type=u,this.nativeEvent=p,this.target=T,this.currentTarget=null;for(var A in t)t.hasOwnProperty(A)&&(s=t[A],this[A]=s?s(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?as:uc,this.isPropagationStopped=uc,this}return C(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),o}var Xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rs=yn(Xo),fl=C({},Xo,{view:0,detail:0}),cg=yn(fl),ba,ka,dl,us=C({},fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:La,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==dl&&(dl&&t.type==="mousemove"?(ba=t.screenX-dl.screenX,ka=t.screenY-dl.screenY):ka=ba=0,dl=t),ba)},movementY:function(t){return"movementY"in t?t.movementY:ka}}),cc=yn(us),fg=C({},us,{dataTransfer:0}),dg=yn(fg),pg=C({},fl,{relatedTarget:0}),Ua=yn(pg),mg=C({},Xo,{animationName:0,elapsedTime:0,pseudoElement:0}),hg=yn(mg),gg=C({},Xo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yg=yn(gg),vg=C({},Xo,{data:0}),fc=yn(vg),Tg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Cg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Eg(t){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(t):(t=Sg[t])?!!o[t]:!1}function La(){return Eg}var Ag=C({},fl,{key:function(t){if(t.key){var o=Tg[t.key]||t.key;if(o!=="Unidentified")return o}return t.type==="keypress"?(t=ss(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Cg[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:La,charCode:function(t){return t.type==="keypress"?ss(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ss(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_g=yn(Ag),xg=C({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dc=yn(xg),Mg=C({},fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:La}),Ng=yn(Mg),Rg=C({},Xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ig=yn(Rg),wg=C({},us,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dg=yn(wg),bg=C({},Xo,{newState:0,oldState:0}),kg=yn(bg),Ug=[9,13,27,32],Va=oo&&"CompositionEvent"in window,pl=null;oo&&"documentMode"in document&&(pl=document.documentMode);var Lg=oo&&"TextEvent"in window&&!pl,pc=oo&&(!Va||pl&&8<pl&&11>=pl),mc=" ",hc=!1;function gc(t,o){switch(t){case"keyup":return Ug.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ci=!1;function Vg(t,o){switch(t){case"compositionend":return yc(o);case"keypress":return o.which!==32?null:(hc=!0,mc);case"textInput":return t=o.data,t===mc&&hc?null:t;default:return null}}function Bg(t,o){if(Ci)return t==="compositionend"||!Va&&gc(t,o)?(t=rc(),ls=Da=_o=null,Ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return pc&&o.locale!=="ko"?null:o.data;default:return null}}var qg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vc(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o==="input"?!!qg[t.type]:o==="textarea"}function Tc(t,o,s,u){vi?Ti?Ti.push(u):Ti=[u]:vi=u,o=Ws(o,"onChange"),0<o.length&&(s=new rs("onChange","change",null,s,u),t.push({event:s,listeners:o}))}var ml=null,hl=null;function Pg(t){np(t,0)}function cs(t){var o=Ao(t);if(Ne(o))return t}function Cc(t,o){if(t==="change")return o}var Sc=!1;if(oo){var Ba;if(oo){var qa="oninput"in document;if(!qa){var Ec=document.createElement("div");Ec.setAttribute("oninput","return;"),qa=typeof Ec.oninput=="function"}Ba=qa}else Ba=!1;Sc=Ba&&(!document.documentMode||9<document.documentMode)}function Ac(){ml&&(ml.detachEvent("onpropertychange",_c),hl=ml=null)}function _c(t){if(t.propertyName==="value"&&cs(hl)){var o=[];Tc(o,hl,t,Ra(t)),ac(Pg,o)}}function Gg(t,o,s){t==="focusin"?(Ac(),ml=o,hl=s,ml.attachEvent("onpropertychange",_c)):t==="focusout"&&Ac()}function Hg(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return cs(hl)}function zg(t,o){if(t==="click")return cs(o)}function Og(t,o){if(t==="input"||t==="change")return cs(o)}function Fg(t,o){return t===o&&(t!==0||1/t===1/o)||t!==t&&o!==o}var _n=typeof Object.is=="function"?Object.is:Fg;function gl(t,o){if(_n(t,o))return!0;if(typeof t!="object"||t===null||typeof o!="object"||o===null)return!1;var s=Object.keys(t),u=Object.keys(o);if(s.length!==u.length)return!1;for(u=0;u<s.length;u++){var d=s[u];if(!Se.call(o,d)||!_n(t[d],o[d]))return!1}return!0}function xc(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Mc(t,o){var s=xc(t);t=0;for(var u;s;){if(s.nodeType===3){if(u=t+s.textContent.length,t<=o&&u>=o)return{node:s,offset:o-t};t=u}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=xc(s)}}function Nc(t,o){return t&&o?t===o?!0:t&&t.nodeType===3?!1:o&&o.nodeType===3?Nc(t,o.parentNode):"contains"in t?t.contains(o):t.compareDocumentPosition?!!(t.compareDocumentPosition(o)&16):!1:!1}function Rc(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var o=_e(t.document);o instanceof t.HTMLIFrameElement;){try{var s=typeof o.contentWindow.location.href=="string"}catch{s=!1}if(s)t=o.contentWindow;else break;o=_e(t.document)}return o}function Pa(t){var o=t&&t.nodeName&&t.nodeName.toLowerCase();return o&&(o==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||o==="textarea"||t.contentEditable==="true")}var Jg=oo&&"documentMode"in document&&11>=document.documentMode,Si=null,Ga=null,yl=null,Ha=!1;function Ic(t,o,s){var u=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Ha||Si==null||Si!==_e(u)||(u=Si,"selectionStart"in u&&Pa(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),yl&&gl(yl,u)||(yl=u,u=Ws(Ga,"onSelect"),0<u.length&&(o=new rs("onSelect","select",null,o,s),t.push({event:o,listeners:u}),o.target=Si)))}function Qo(t,o){var s={};return s[t.toLowerCase()]=o.toLowerCase(),s["Webkit"+t]="webkit"+o,s["Moz"+t]="moz"+o,s}var Ei={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionrun:Qo("Transition","TransitionRun"),transitionstart:Qo("Transition","TransitionStart"),transitioncancel:Qo("Transition","TransitionCancel"),transitionend:Qo("Transition","TransitionEnd")},za={},wc={};oo&&(wc=document.createElement("div").style,"AnimationEvent"in window||(delete Ei.animationend.animation,delete Ei.animationiteration.animation,delete Ei.animationstart.animation),"TransitionEvent"in window||delete Ei.transitionend.transition);function Zo(t){if(za[t])return za[t];if(!Ei[t])return t;var o=Ei[t],s;for(s in o)if(o.hasOwnProperty(s)&&s in wc)return za[t]=o[s];return t}var Dc=Zo("animationend"),bc=Zo("animationiteration"),kc=Zo("animationstart"),Yg=Zo("transitionrun"),$g=Zo("transitionstart"),Kg=Zo("transitioncancel"),Uc=Zo("transitionend"),Lc=new Map,Oa="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Oa.push("scrollEnd");function zn(t,o){Lc.set(t,o),eo(o,[t])}var fs=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},bn=[],Ai=0,Fa=0;function ds(){for(var t=Ai,o=Fa=Ai=0;o<t;){var s=bn[o];bn[o++]=null;var u=bn[o];bn[o++]=null;var d=bn[o];bn[o++]=null;var p=bn[o];if(bn[o++]=null,u!==null&&d!==null){var T=u.pending;T===null?d.next=d:(d.next=T.next,T.next=d),u.pending=d}p!==0&&Vc(s,d,p)}}function ps(t,o,s,u){bn[Ai++]=t,bn[Ai++]=o,bn[Ai++]=s,bn[Ai++]=u,Fa|=u,t.lanes|=u,t=t.alternate,t!==null&&(t.lanes|=u)}function Ja(t,o,s,u){return ps(t,o,s,u),ms(t)}function Wo(t,o){return ps(t,null,null,o),ms(t)}function Vc(t,o,s){t.lanes|=s;var u=t.alternate;u!==null&&(u.lanes|=s);for(var d=!1,p=t.return;p!==null;)p.childLanes|=s,u=p.alternate,u!==null&&(u.childLanes|=s),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(d=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,d&&o!==null&&(d=31-Te(s),t=p.hiddenUpdates,u=t[d],u===null?t[d]=[o]:u.push(o),o.lane=s|536870912),p):null}function ms(t){if(50<Pl)throw Pl=0,eu=null,Error(l(185));for(var o=t.return;o!==null;)t=o,o=t.return;return t.tag===3?t.stateNode:null}var _i={};function Xg(t,o,s,u){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xn(t,o,s,u){return new Xg(t,o,s,u)}function Ya(t){return t=t.prototype,!(!t||!t.isReactComponent)}function io(t,o){var s=t.alternate;return s===null?(s=xn(t.tag,o,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=o,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&65011712,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,o=t.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s.refCleanup=t.refCleanup,s}function Bc(t,o){t.flags&=65011714;var s=t.alternate;return s===null?(t.childLanes=0,t.lanes=o,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=s.childLanes,t.lanes=s.lanes,t.child=s.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=s.memoizedProps,t.memoizedState=s.memoizedState,t.updateQueue=s.updateQueue,t.type=s.type,o=s.dependencies,t.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),t}function hs(t,o,s,u,d,p){var T=0;if(u=t,typeof t=="function")Ya(t)&&(T=1);else if(typeof t=="string")T=ev(t,s,se.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case j:return t=xn(31,s,o,d),t.elementType=j,t.lanes=p,t;case O:return jo(s.children,d,p,o);case q:T=8,d|=24;break;case z:return t=xn(12,s,o,d|2),t.elementType=z,t.lanes=p,t;case ce:return t=xn(13,s,o,d),t.elementType=ce,t.lanes=p,t;case fe:return t=xn(19,s,o,d),t.elementType=fe,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z:T=10;break e;case F:T=9;break e;case ee:T=11;break e;case oe:T=14;break e;case pe:T=16,u=null;break e}T=29,s=Error(l(130,t===null?"null":typeof t,"")),u=null}return o=xn(T,s,o,d),o.elementType=t,o.type=u,o.lanes=p,o}function jo(t,o,s,u){return t=xn(7,t,u,o),t.lanes=s,t}function $a(t,o,s){return t=xn(6,t,null,o),t.lanes=s,t}function qc(t){var o=xn(18,null,null,0);return o.stateNode=t,o}function Ka(t,o,s){return o=xn(4,t.children!==null?t.children:[],t.key,o),o.lanes=s,o.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},o}var Pc=new WeakMap;function kn(t,o){if(typeof t=="object"&&t!==null){var s=Pc.get(t);return s!==void 0?s:(o={value:t,source:o,stack:ft(o)},Pc.set(t,o),o)}return{value:t,source:o,stack:ft(o)}}var xi=[],Mi=0,gs=null,vl=0,Un=[],Ln=0,xo=null,$n=1,Kn="";function lo(t,o){xi[Mi++]=vl,xi[Mi++]=gs,gs=t,vl=o}function Gc(t,o,s){Un[Ln++]=$n,Un[Ln++]=Kn,Un[Ln++]=xo,xo=t;var u=$n;t=Kn;var d=32-Te(u)-1;u&=~(1<<d),s+=1;var p=32-Te(o)+d;if(30<p){var T=d-d%5;p=(u&(1<<T)-1).toString(32),u>>=T,d-=T,$n=1<<32-Te(o)+d|s<<d|u,Kn=p+t}else $n=1<<p|s<<d|u,Kn=t}function Xa(t){t.return!==null&&(lo(t,1),Gc(t,1,0))}function Qa(t){for(;t===gs;)gs=xi[--Mi],xi[Mi]=null,vl=xi[--Mi],xi[Mi]=null;for(;t===xo;)xo=Un[--Ln],Un[Ln]=null,Kn=Un[--Ln],Un[Ln]=null,$n=Un[--Ln],Un[Ln]=null}function Hc(t,o){Un[Ln++]=$n,Un[Ln++]=Kn,Un[Ln++]=xo,$n=o.id,Kn=o.overflow,xo=t}var on=null,bt=null,at=!1,Mo=null,Vn=!1,Za=Error(l(519));function No(t){var o=Error(l(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(kn(o,t)),Za}function zc(t){var o=t.stateNode,s=t.type,u=t.memoizedProps;switch(o[Wt]=t,o[cn]=u,s){case"dialog":tt("cancel",o),tt("close",o);break;case"iframe":case"object":case"embed":tt("load",o);break;case"video":case"audio":for(s=0;s<Hl.length;s++)tt(Hl[s],o);break;case"source":tt("error",o);break;case"img":case"image":case"link":tt("error",o),tt("load",o);break;case"details":tt("toggle",o);break;case"input":tt("invalid",o),De(o,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":tt("invalid",o);break;case"textarea":tt("invalid",o),Gt(o,u.value,u.defaultValue,u.children)}s=u.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||o.textContent===""+s||u.suppressHydrationWarning===!0||sp(o.textContent,s)?(u.popover!=null&&(tt("beforetoggle",o),tt("toggle",o)),u.onScroll!=null&&tt("scroll",o),u.onScrollEnd!=null&&tt("scrollend",o),u.onClick!=null&&(o.onclick=no),o=!0):o=!1,o||No(t,!0)}function Oc(t){for(on=t.return;on;)switch(on.tag){case 5:case 31:case 13:Vn=!1;return;case 27:case 3:Vn=!0;return;default:on=on.return}}function Ni(t){if(t!==on)return!1;if(!at)return Oc(t),at=!0,!1;var o=t.tag,s;if((s=o!==3&&o!==27)&&((s=o===5)&&(s=t.type,s=!(s!=="form"&&s!=="button")||hu(t.type,t.memoizedProps)),s=!s),s&&bt&&No(t),Oc(t),o===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));bt=hp(t)}else if(o===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(317));bt=hp(t)}else o===27?(o=bt,Ho(t.type)?(t=Cu,Cu=null,bt=t):bt=o):bt=on?qn(t.stateNode.nextSibling):null;return!0}function ei(){bt=on=null,at=!1}function Wa(){var t=Mo;return t!==null&&(Sn===null?Sn=t:Sn.push.apply(Sn,t),Mo=null),t}function Tl(t){Mo===null?Mo=[t]:Mo.push(t)}var ja=M(null),ti=null,so=null;function Ro(t,o,s){ue(ja,o._currentValue),o._currentValue=s}function ao(t){t._currentValue=ja.current,$(ja)}function er(t,o,s){for(;t!==null;){var u=t.alternate;if((t.childLanes&o)!==o?(t.childLanes|=o,u!==null&&(u.childLanes|=o)):u!==null&&(u.childLanes&o)!==o&&(u.childLanes|=o),t===s)break;t=t.return}}function tr(t,o,s,u){var d=t.child;for(d!==null&&(d.return=t);d!==null;){var p=d.dependencies;if(p!==null){var T=d.child;p=p.firstContext;e:for(;p!==null;){var A=p;p=d;for(var _=0;_<o.length;_++)if(A.context===o[_]){p.lanes|=s,A=p.alternate,A!==null&&(A.lanes|=s),er(p.return,s,t),u||(T=null);break e}p=A.next}}else if(d.tag===18){if(T=d.return,T===null)throw Error(l(341));T.lanes|=s,p=T.alternate,p!==null&&(p.lanes|=s),er(T,s,t),T=null}else T=d.child;if(T!==null)T.return=d;else for(T=d;T!==null;){if(T===t){T=null;break}if(d=T.sibling,d!==null){d.return=T.return,T=d;break}T=T.return}d=T}}function Ri(t,o,s,u){t=null;for(var d=o,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var T=d.alternate;if(T===null)throw Error(l(387));if(T=T.memoizedProps,T!==null){var A=d.type;_n(d.pendingProps.value,T.value)||(t!==null?t.push(A):t=[A])}}else if(d===ot.current){if(T=d.alternate,T===null)throw Error(l(387));T.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(t!==null?t.push(Yl):t=[Yl])}d=d.return}t!==null&&tr(o,t,s,u),o.flags|=262144}function ys(t){for(t=t.firstContext;t!==null;){if(!_n(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ni(t){ti=t,so=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ln(t){return Fc(ti,t)}function vs(t,o){return ti===null&&ni(t),Fc(t,o)}function Fc(t,o){var s=o._currentValue;if(o={context:o,memoizedValue:s,next:null},so===null){if(t===null)throw Error(l(308));so=o,t.dependencies={lanes:0,firstContext:o},t.flags|=524288}else so=so.next=o;return s}var Qg=typeof AbortController<"u"?AbortController:function(){var t=[],o=this.signal={aborted:!1,addEventListener:function(s,u){t.push(u)}};this.abort=function(){o.aborted=!0,t.forEach(function(s){return s()})}},Zg=n.unstable_scheduleCallback,Wg=n.unstable_NormalPriority,Kt={$$typeof:Z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function nr(){return{controller:new Qg,data:new Map,refCount:0}}function Cl(t){t.refCount--,t.refCount===0&&Zg(Wg,function(){t.controller.abort()})}var Sl=null,or=0,Ii=0,wi=null;function jg(t,o){if(Sl===null){var s=Sl=[];or=0,Ii=su(),wi={status:"pending",value:void 0,then:function(u){s.push(u)}}}return or++,o.then(Jc,Jc),o}function Jc(){if(--or===0&&Sl!==null){wi!==null&&(wi.status="fulfilled");var t=Sl;Sl=null,Ii=0,wi=null;for(var o=0;o<t.length;o++)(0,t[o])()}}function ey(t,o){var s=[],u={status:"pending",value:null,reason:null,then:function(d){s.push(d)}};return t.then(function(){u.status="fulfilled",u.value=o;for(var d=0;d<s.length;d++)(0,s[d])(o)},function(d){for(u.status="rejected",u.reason=d,d=0;d<s.length;d++)(0,s[d])(void 0)}),u}var Yc=L.S;L.S=function(t,o){wd=Le(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&jg(t,o),Yc!==null&&Yc(t,o)};var oi=M(null);function ir(){var t=oi.current;return t!==null?t:wt.pooledCache}function Ts(t,o){o===null?ue(oi,oi.current):ue(oi,o.pool)}function $c(){var t=ir();return t===null?null:{parent:Kt._currentValue,pool:t}}var Di=Error(l(460)),lr=Error(l(474)),Cs=Error(l(542)),Ss={then:function(){}};function Kc(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Xc(t,o,s){switch(s=t[s],s===void 0?t.push(o):s!==o&&(o.then(no,no),o=s),o.status){case"fulfilled":return o.value;case"rejected":throw t=o.reason,Zc(t),t;default:if(typeof o.status=="string")o.then(no,no);else{if(t=wt,t!==null&&100<t.shellSuspendCounter)throw Error(l(482));t=o,t.status="pending",t.then(function(u){if(o.status==="pending"){var d=o;d.status="fulfilled",d.value=u}},function(u){if(o.status==="pending"){var d=o;d.status="rejected",d.reason=u}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw t=o.reason,Zc(t),t}throw li=o,Di}}function ii(t){try{var o=t._init;return o(t._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(li=s,Di):s}}var li=null;function Qc(){if(li===null)throw Error(l(459));var t=li;return li=null,t}function Zc(t){if(t===Di||t===Cs)throw Error(l(483))}var bi=null,El=0;function Es(t){var o=El;return El+=1,bi===null&&(bi=[]),Xc(bi,t,o)}function Al(t,o){o=o.props.ref,t.ref=o!==void 0?o:null}function As(t,o){throw o.$$typeof===E?Error(l(525)):(t=Object.prototype.toString.call(o),Error(l(31,t==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":t)))}function Wc(t){function o(D,N){if(t){var b=D.deletions;b===null?(D.deletions=[N],D.flags|=16):b.push(N)}}function s(D,N){if(!t)return null;for(;N!==null;)o(D,N),N=N.sibling;return null}function u(D){for(var N=new Map;D!==null;)D.key!==null?N.set(D.key,D):N.set(D.index,D),D=D.sibling;return N}function d(D,N){return D=io(D,N),D.index=0,D.sibling=null,D}function p(D,N,b){return D.index=b,t?(b=D.alternate,b!==null?(b=b.index,b<N?(D.flags|=67108866,N):b):(D.flags|=67108866,N)):(D.flags|=1048576,N)}function T(D){return t&&D.alternate===null&&(D.flags|=67108866),D}function A(D,N,b,K){return N===null||N.tag!==6?(N=$a(b,D.mode,K),N.return=D,N):(N=d(N,b),N.return=D,N)}function _(D,N,b,K){var Re=b.type;return Re===O?J(D,N,b.props.children,K,b.key):N!==null&&(N.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===pe&&ii(Re)===N.type)?(N=d(N,b.props),Al(N,b),N.return=D,N):(N=hs(b.type,b.key,b.props,null,D.mode,K),Al(N,b),N.return=D,N)}function k(D,N,b,K){return N===null||N.tag!==4||N.stateNode.containerInfo!==b.containerInfo||N.stateNode.implementation!==b.implementation?(N=Ka(b,D.mode,K),N.return=D,N):(N=d(N,b.children||[]),N.return=D,N)}function J(D,N,b,K,Re){return N===null||N.tag!==7?(N=jo(b,D.mode,K,Re),N.return=D,N):(N=d(N,b),N.return=D,N)}function X(D,N,b){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=$a(""+N,D.mode,b),N.return=D,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case x:return b=hs(N.type,N.key,N.props,null,D.mode,b),Al(b,N),b.return=D,b;case U:return N=Ka(N,D.mode,b),N.return=D,N;case pe:return N=ii(N),X(D,N,b)}if(yt(N)||ve(N))return N=jo(N,D.mode,b,null),N.return=D,N;if(typeof N.then=="function")return X(D,Es(N),b);if(N.$$typeof===Z)return X(D,vs(D,N),b);As(D,N)}return null}function B(D,N,b,K){var Re=N!==null?N.key:null;if(typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint")return Re!==null?null:A(D,N,""+b,K);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case x:return b.key===Re?_(D,N,b,K):null;case U:return b.key===Re?k(D,N,b,K):null;case pe:return b=ii(b),B(D,N,b,K)}if(yt(b)||ve(b))return Re!==null?null:J(D,N,b,K,null);if(typeof b.then=="function")return B(D,N,Es(b),K);if(b.$$typeof===Z)return B(D,N,vs(D,b),K);As(D,b)}return null}function H(D,N,b,K,Re){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return D=D.get(b)||null,A(N,D,""+K,Re);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return D=D.get(K.key===null?b:K.key)||null,_(N,D,K,Re);case U:return D=D.get(K.key===null?b:K.key)||null,k(N,D,K,Re);case pe:return K=ii(K),H(D,N,b,K,Re)}if(yt(K)||ve(K))return D=D.get(b)||null,J(N,D,K,Re,null);if(typeof K.then=="function")return H(D,N,b,Es(K),Re);if(K.$$typeof===Z)return H(D,N,b,vs(N,K),Re);As(N,K)}return null}function ge(D,N,b,K){for(var Re=null,mt=null,Ee=N,$e=N=0,lt=null;Ee!==null&&$e<b.length;$e++){Ee.index>$e?(lt=Ee,Ee=null):lt=Ee.sibling;var ht=B(D,Ee,b[$e],K);if(ht===null){Ee===null&&(Ee=lt);break}t&&Ee&&ht.alternate===null&&o(D,Ee),N=p(ht,N,$e),mt===null?Re=ht:mt.sibling=ht,mt=ht,Ee=lt}if($e===b.length)return s(D,Ee),at&&lo(D,$e),Re;if(Ee===null){for(;$e<b.length;$e++)Ee=X(D,b[$e],K),Ee!==null&&(N=p(Ee,N,$e),mt===null?Re=Ee:mt.sibling=Ee,mt=Ee);return at&&lo(D,$e),Re}for(Ee=u(Ee);$e<b.length;$e++)lt=H(Ee,D,$e,b[$e],K),lt!==null&&(t&&lt.alternate!==null&&Ee.delete(lt.key===null?$e:lt.key),N=p(lt,N,$e),mt===null?Re=lt:mt.sibling=lt,mt=lt);return t&&Ee.forEach(function(Yo){return o(D,Yo)}),at&&lo(D,$e),Re}function Ie(D,N,b,K){if(b==null)throw Error(l(151));for(var Re=null,mt=null,Ee=N,$e=N=0,lt=null,ht=b.next();Ee!==null&&!ht.done;$e++,ht=b.next()){Ee.index>$e?(lt=Ee,Ee=null):lt=Ee.sibling;var Yo=B(D,Ee,ht.value,K);if(Yo===null){Ee===null&&(Ee=lt);break}t&&Ee&&Yo.alternate===null&&o(D,Ee),N=p(Yo,N,$e),mt===null?Re=Yo:mt.sibling=Yo,mt=Yo,Ee=lt}if(ht.done)return s(D,Ee),at&&lo(D,$e),Re;if(Ee===null){for(;!ht.done;$e++,ht=b.next())ht=X(D,ht.value,K),ht!==null&&(N=p(ht,N,$e),mt===null?Re=ht:mt.sibling=ht,mt=ht);return at&&lo(D,$e),Re}for(Ee=u(Ee);!ht.done;$e++,ht=b.next())ht=H(Ee,D,$e,ht.value,K),ht!==null&&(t&&ht.alternate!==null&&Ee.delete(ht.key===null?$e:ht.key),N=p(ht,N,$e),mt===null?Re=ht:mt.sibling=ht,mt=ht);return t&&Ee.forEach(function(fv){return o(D,fv)}),at&&lo(D,$e),Re}function Rt(D,N,b,K){if(typeof b=="object"&&b!==null&&b.type===O&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case x:e:{for(var Re=b.key;N!==null;){if(N.key===Re){if(Re=b.type,Re===O){if(N.tag===7){s(D,N.sibling),K=d(N,b.props.children),K.return=D,D=K;break e}}else if(N.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===pe&&ii(Re)===N.type){s(D,N.sibling),K=d(N,b.props),Al(K,b),K.return=D,D=K;break e}s(D,N);break}else o(D,N);N=N.sibling}b.type===O?(K=jo(b.props.children,D.mode,K,b.key),K.return=D,D=K):(K=hs(b.type,b.key,b.props,null,D.mode,K),Al(K,b),K.return=D,D=K)}return T(D);case U:e:{for(Re=b.key;N!==null;){if(N.key===Re)if(N.tag===4&&N.stateNode.containerInfo===b.containerInfo&&N.stateNode.implementation===b.implementation){s(D,N.sibling),K=d(N,b.children||[]),K.return=D,D=K;break e}else{s(D,N);break}else o(D,N);N=N.sibling}K=Ka(b,D.mode,K),K.return=D,D=K}return T(D);case pe:return b=ii(b),Rt(D,N,b,K)}if(yt(b))return ge(D,N,b,K);if(ve(b)){if(Re=ve(b),typeof Re!="function")throw Error(l(150));return b=Re.call(b),Ie(D,N,b,K)}if(typeof b.then=="function")return Rt(D,N,Es(b),K);if(b.$$typeof===Z)return Rt(D,N,vs(D,b),K);As(D,b)}return typeof b=="string"&&b!==""||typeof b=="number"||typeof b=="bigint"?(b=""+b,N!==null&&N.tag===6?(s(D,N.sibling),K=d(N,b),K.return=D,D=K):(s(D,N),K=$a(b,D.mode,K),K.return=D,D=K),T(D)):s(D,N)}return function(D,N,b,K){try{El=0;var Re=Rt(D,N,b,K);return bi=null,Re}catch(Ee){if(Ee===Di||Ee===Cs)throw Ee;var mt=xn(29,Ee,null,D.mode);return mt.lanes=K,mt.return=D,mt}finally{}}}var si=Wc(!0),jc=Wc(!1),Io=!1;function sr(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ar(t,o){t=t.updateQueue,o.updateQueue===t&&(o.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function wo(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Do(t,o,s){var u=t.updateQueue;if(u===null)return null;if(u=u.shared,(Et&2)!==0){var d=u.pending;return d===null?o.next=o:(o.next=d.next,d.next=o),u.pending=o,o=ms(t),Vc(t,null,s),o}return ps(t,u,o,s),ms(t)}function _l(t,o,s){if(o=o.updateQueue,o!==null&&(o=o.shared,(s&4194048)!==0)){var u=o.lanes;u&=t.pendingLanes,s|=u,o.lanes=s,Zn(t,s)}}function rr(t,o){var s=t.updateQueue,u=t.alternate;if(u!==null&&(u=u.updateQueue,s===u)){var d=null,p=null;if(s=s.firstBaseUpdate,s!==null){do{var T={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};p===null?d=p=T:p=p.next=T,s=s.next}while(s!==null);p===null?d=p=o:p=p.next=o}else d=p=o;s={baseState:u.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:u.shared,callbacks:u.callbacks},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=o:t.next=o,s.lastBaseUpdate=o}var ur=!1;function xl(){if(ur){var t=wi;if(t!==null)throw t}}function Ml(t,o,s,u){ur=!1;var d=t.updateQueue;Io=!1;var p=d.firstBaseUpdate,T=d.lastBaseUpdate,A=d.shared.pending;if(A!==null){d.shared.pending=null;var _=A,k=_.next;_.next=null,T===null?p=k:T.next=k,T=_;var J=t.alternate;J!==null&&(J=J.updateQueue,A=J.lastBaseUpdate,A!==T&&(A===null?J.firstBaseUpdate=k:A.next=k,J.lastBaseUpdate=_))}if(p!==null){var X=d.baseState;T=0,J=k=_=null,A=p;do{var B=A.lane&-536870913,H=B!==A.lane;if(H?(it&B)===B:(u&B)===B){B!==0&&B===Ii&&(ur=!0),J!==null&&(J=J.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var ge=t,Ie=A;B=o;var Rt=s;switch(Ie.tag){case 1:if(ge=Ie.payload,typeof ge=="function"){X=ge.call(Rt,X,B);break e}X=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ie.payload,B=typeof ge=="function"?ge.call(Rt,X,B):ge,B==null)break e;X=C({},X,B);break e;case 2:Io=!0}}B=A.callback,B!==null&&(t.flags|=64,H&&(t.flags|=8192),H=d.callbacks,H===null?d.callbacks=[B]:H.push(B))}else H={lane:B,tag:A.tag,payload:A.payload,callback:A.callback,next:null},J===null?(k=J=H,_=X):J=J.next=H,T|=B;if(A=A.next,A===null){if(A=d.shared.pending,A===null)break;H=A,A=H.next,H.next=null,d.lastBaseUpdate=H,d.shared.pending=null}}while(!0);J===null&&(_=X),d.baseState=_,d.firstBaseUpdate=k,d.lastBaseUpdate=J,p===null&&(d.shared.lanes=0),Vo|=T,t.lanes=T,t.memoizedState=X}}function ef(t,o){if(typeof t!="function")throw Error(l(191,t));t.call(o)}function tf(t,o){var s=t.callbacks;if(s!==null)for(t.callbacks=null,t=0;t<s.length;t++)ef(s[t],o)}var ki=M(null),_s=M(0);function nf(t,o){t=yo,ue(_s,t),ue(ki,o),yo=t|o.baseLanes}function cr(){ue(_s,yo),ue(ki,ki.current)}function fr(){yo=_s.current,$(ki),$(_s)}var Mn=M(null),Bn=null;function bo(t){var o=t.alternate;ue(Jt,Jt.current&1),ue(Mn,t),Bn===null&&(o===null||ki.current!==null||o.memoizedState!==null)&&(Bn=t)}function dr(t){ue(Jt,Jt.current),ue(Mn,t),Bn===null&&(Bn=t)}function of(t){t.tag===22?(ue(Jt,Jt.current),ue(Mn,t),Bn===null&&(Bn=t)):ko()}function ko(){ue(Jt,Jt.current),ue(Mn,Mn.current)}function Nn(t){$(Mn),Bn===t&&(Bn=null),$(Jt)}var Jt=M(0);function xs(t){for(var o=t;o!==null;){if(o.tag===13){var s=o.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||vu(s)||Tu(s)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var ro=0,Je=null,Mt=null,Xt=null,Ms=!1,Ui=!1,ai=!1,Ns=0,Nl=0,Li=null,ty=0;function zt(){throw Error(l(321))}function pr(t,o){if(o===null)return!1;for(var s=0;s<o.length&&s<t.length;s++)if(!_n(t[s],o[s]))return!1;return!0}function mr(t,o,s,u,d,p){return ro=p,Je=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,L.H=t===null||t.memoizedState===null?Hf:Ir,ai=!1,p=s(u,d),ai=!1,Ui&&(p=sf(o,s,u,d)),lf(t),p}function lf(t){L.H=wl;var o=Mt!==null&&Mt.next!==null;if(ro=0,Xt=Mt=Je=null,Ms=!1,Nl=0,Li=null,o)throw Error(l(300));t===null||Qt||(t=t.dependencies,t!==null&&ys(t)&&(Qt=!0))}function sf(t,o,s,u){Je=t;var d=0;do{if(Ui&&(Li=null),Nl=0,Ui=!1,25<=d)throw Error(l(301));if(d+=1,Xt=Mt=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}L.H=zf,p=o(s,u)}while(Ui);return p}function ny(){var t=L.H,o=t.useState()[0];return o=typeof o.then=="function"?Rl(o):o,t=t.useState()[0],(Mt!==null?Mt.memoizedState:null)!==t&&(Je.flags|=1024),o}function hr(){var t=Ns!==0;return Ns=0,t}function gr(t,o,s){o.updateQueue=t.updateQueue,o.flags&=-2053,t.lanes&=~s}function yr(t){if(Ms){for(t=t.memoizedState;t!==null;){var o=t.queue;o!==null&&(o.pending=null),t=t.next}Ms=!1}ro=0,Xt=Mt=Je=null,Ui=!1,Nl=Ns=0,Li=null}function gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?Je.memoizedState=Xt=t:Xt=Xt.next=t,Xt}function Yt(){if(Mt===null){var t=Je.alternate;t=t!==null?t.memoizedState:null}else t=Mt.next;var o=Xt===null?Je.memoizedState:Xt.next;if(o!==null)Xt=o,Mt=t;else{if(t===null)throw Je.alternate===null?Error(l(467)):Error(l(310));Mt=t,t={memoizedState:Mt.memoizedState,baseState:Mt.baseState,baseQueue:Mt.baseQueue,queue:Mt.queue,next:null},Xt===null?Je.memoizedState=Xt=t:Xt=Xt.next=t}return Xt}function Rs(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Rl(t){var o=Nl;return Nl+=1,Li===null&&(Li=[]),t=Xc(Li,t,o),o=Je,(Xt===null?o.memoizedState:Xt.next)===null&&(o=o.alternate,L.H=o===null||o.memoizedState===null?Hf:Ir),t}function Is(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Rl(t);if(t.$$typeof===Z)return ln(t)}throw Error(l(438,String(t)))}function vr(t){var o=null,s=Je.updateQueue;if(s!==null&&(o=s.memoCache),o==null){var u=Je.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(o={data:u.data.map(function(d){return d.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),s===null&&(s=Rs(),Je.updateQueue=s),s.memoCache=o,s=o.data[o.index],s===void 0)for(s=o.data[o.index]=Array(t),u=0;u<t;u++)s[u]=me;return o.index++,s}function uo(t,o){return typeof o=="function"?o(t):o}function ws(t){var o=Yt();return Tr(o,Mt,t)}function Tr(t,o,s){var u=t.queue;if(u===null)throw Error(l(311));u.lastRenderedReducer=s;var d=t.baseQueue,p=u.pending;if(p!==null){if(d!==null){var T=d.next;d.next=p.next,p.next=T}o.baseQueue=d=p,u.pending=null}if(p=t.baseState,d===null)t.memoizedState=p;else{o=d.next;var A=T=null,_=null,k=o,J=!1;do{var X=k.lane&-536870913;if(X!==k.lane?(it&X)===X:(ro&X)===X){var B=k.revertLane;if(B===0)_!==null&&(_=_.next={lane:0,revertLane:0,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null}),X===Ii&&(J=!0);else if((ro&B)===B){k=k.next,B===Ii&&(J=!0);continue}else X={lane:0,revertLane:k.revertLane,gesture:null,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},_===null?(A=_=X,T=p):_=_.next=X,Je.lanes|=B,Vo|=B;X=k.action,ai&&s(p,X),p=k.hasEagerState?k.eagerState:s(p,X)}else B={lane:X,revertLane:k.revertLane,gesture:k.gesture,action:k.action,hasEagerState:k.hasEagerState,eagerState:k.eagerState,next:null},_===null?(A=_=B,T=p):_=_.next=B,Je.lanes|=X,Vo|=X;k=k.next}while(k!==null&&k!==o);if(_===null?T=p:_.next=A,!_n(p,t.memoizedState)&&(Qt=!0,J&&(s=wi,s!==null)))throw s;t.memoizedState=p,t.baseState=T,t.baseQueue=_,u.lastRenderedState=p}return d===null&&(u.lanes=0),[t.memoizedState,u.dispatch]}function Cr(t){var o=Yt(),s=o.queue;if(s===null)throw Error(l(311));s.lastRenderedReducer=t;var u=s.dispatch,d=s.pending,p=o.memoizedState;if(d!==null){s.pending=null;var T=d=d.next;do p=t(p,T.action),T=T.next;while(T!==d);_n(p,o.memoizedState)||(Qt=!0),o.memoizedState=p,o.baseQueue===null&&(o.baseState=p),s.lastRenderedState=p}return[p,u]}function af(t,o,s){var u=Je,d=Yt(),p=at;if(p){if(s===void 0)throw Error(l(407));s=s()}else s=o();var T=!_n((Mt||d).memoizedState,s);if(T&&(d.memoizedState=s,Qt=!0),d=d.queue,Ar(cf.bind(null,u,d,t),[t]),d.getSnapshot!==o||T||Xt!==null&&Xt.memoizedState.tag&1){if(u.flags|=2048,Vi(9,{destroy:void 0},uf.bind(null,u,d,s,o),null),wt===null)throw Error(l(349));p||(ro&127)!==0||rf(u,o,s)}return s}function rf(t,o,s){t.flags|=16384,t={getSnapshot:o,value:s},o=Je.updateQueue,o===null?(o=Rs(),Je.updateQueue=o,o.stores=[t]):(s=o.stores,s===null?o.stores=[t]:s.push(t))}function uf(t,o,s,u){o.value=s,o.getSnapshot=u,ff(o)&&df(t)}function cf(t,o,s){return s(function(){ff(o)&&df(t)})}function ff(t){var o=t.getSnapshot;t=t.value;try{var s=o();return!_n(t,s)}catch{return!0}}function df(t){var o=Wo(t,2);o!==null&&En(o,t,2)}function Sr(t){var o=gn();if(typeof t=="function"){var s=t;if(t=s(),ai){Xe(!0);try{s()}finally{Xe(!1)}}}return o.memoizedState=o.baseState=t,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:t},o}function pf(t,o,s,u){return t.baseState=s,Tr(t,Mt,typeof u=="function"?u:uo)}function oy(t,o,s,u,d){if(ks(t))throw Error(l(485));if(t=o.action,t!==null){var p={payload:d,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){p.listeners.push(T)}};L.T!==null?s(!0):p.isTransition=!1,u(p),s=o.pending,s===null?(p.next=o.pending=p,mf(o,p)):(p.next=s.next,o.pending=s.next=p)}}function mf(t,o){var s=o.action,u=o.payload,d=t.state;if(o.isTransition){var p=L.T,T={};L.T=T;try{var A=s(d,u),_=L.S;_!==null&&_(T,A),hf(t,o,A)}catch(k){Er(t,o,k)}finally{p!==null&&T.types!==null&&(p.types=T.types),L.T=p}}else try{p=s(d,u),hf(t,o,p)}catch(k){Er(t,o,k)}}function hf(t,o,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(u){gf(t,o,u)},function(u){return Er(t,o,u)}):gf(t,o,s)}function gf(t,o,s){o.status="fulfilled",o.value=s,yf(o),t.state=s,o=t.pending,o!==null&&(s=o.next,s===o?t.pending=null:(s=s.next,o.next=s,mf(t,s)))}function Er(t,o,s){var u=t.pending;if(t.pending=null,u!==null){u=u.next;do o.status="rejected",o.reason=s,yf(o),o=o.next;while(o!==u)}t.action=null}function yf(t){t=t.listeners;for(var o=0;o<t.length;o++)(0,t[o])()}function vf(t,o){return o}function Tf(t,o){if(at){var s=wt.formState;if(s!==null){e:{var u=Je;if(at){if(bt){t:{for(var d=bt,p=Vn;d.nodeType!==8;){if(!p){d=null;break t}if(d=qn(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){bt=qn(d.nextSibling),u=d.data==="F!";break e}}No(u)}u=!1}u&&(o=s[0])}}return s=gn(),s.memoizedState=s.baseState=o,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vf,lastRenderedState:o},s.queue=u,s=qf.bind(null,Je,u),u.dispatch=s,u=Sr(!1),p=Rr.bind(null,Je,!1,u.queue),u=gn(),d={state:o,dispatch:null,action:t,pending:null},u.queue=d,s=oy.bind(null,Je,d,p,s),d.dispatch=s,u.memoizedState=t,[o,s,!1]}function Cf(t){var o=Yt();return Sf(o,Mt,t)}function Sf(t,o,s){if(o=Tr(t,o,vf)[0],t=ws(uo)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var u=Rl(o)}catch(T){throw T===Di?Cs:T}else u=o;o=Yt();var d=o.queue,p=d.dispatch;return s!==o.memoizedState&&(Je.flags|=2048,Vi(9,{destroy:void 0},iy.bind(null,d,s),null)),[u,p,t]}function iy(t,o){t.action=o}function Ef(t){var o=Yt(),s=Mt;if(s!==null)return Sf(o,s,t);Yt(),o=o.memoizedState,s=Yt();var u=s.queue.dispatch;return s.memoizedState=t,[o,u,!1]}function Vi(t,o,s,u){return t={tag:t,create:s,deps:u,inst:o,next:null},o=Je.updateQueue,o===null&&(o=Rs(),Je.updateQueue=o),s=o.lastEffect,s===null?o.lastEffect=t.next=t:(u=s.next,s.next=t,t.next=u,o.lastEffect=t),t}function Af(){return Yt().memoizedState}function Ds(t,o,s,u){var d=gn();Je.flags|=t,d.memoizedState=Vi(1|o,{destroy:void 0},s,u===void 0?null:u)}function bs(t,o,s,u){var d=Yt();u=u===void 0?null:u;var p=d.memoizedState.inst;Mt!==null&&u!==null&&pr(u,Mt.memoizedState.deps)?d.memoizedState=Vi(o,p,s,u):(Je.flags|=t,d.memoizedState=Vi(1|o,p,s,u))}function _f(t,o){Ds(8390656,8,t,o)}function Ar(t,o){bs(2048,8,t,o)}function ly(t){Je.flags|=4;var o=Je.updateQueue;if(o===null)o=Rs(),Je.updateQueue=o,o.events=[t];else{var s=o.events;s===null?o.events=[t]:s.push(t)}}function xf(t){var o=Yt().memoizedState;return ly({ref:o,nextImpl:t}),function(){if((Et&2)!==0)throw Error(l(440));return o.impl.apply(void 0,arguments)}}function Mf(t,o){return bs(4,2,t,o)}function Nf(t,o){return bs(4,4,t,o)}function Rf(t,o){if(typeof o=="function"){t=t();var s=o(t);return function(){typeof s=="function"?s():o(null)}}if(o!=null)return t=t(),o.current=t,function(){o.current=null}}function If(t,o,s){s=s!=null?s.concat([t]):null,bs(4,4,Rf.bind(null,o,t),s)}function _r(){}function wf(t,o){var s=Yt();o=o===void 0?null:o;var u=s.memoizedState;return o!==null&&pr(o,u[1])?u[0]:(s.memoizedState=[t,o],t)}function Df(t,o){var s=Yt();o=o===void 0?null:o;var u=s.memoizedState;if(o!==null&&pr(o,u[1]))return u[0];if(u=t(),ai){Xe(!0);try{t()}finally{Xe(!1)}}return s.memoizedState=[u,o],u}function xr(t,o,s){return s===void 0||(ro&1073741824)!==0&&(it&261930)===0?t.memoizedState=o:(t.memoizedState=s,t=bd(),Je.lanes|=t,Vo|=t,s)}function bf(t,o,s,u){return _n(s,o)?s:ki.current!==null?(t=xr(t,s,u),_n(t,o)||(Qt=!0),t):(ro&42)===0||(ro&1073741824)!==0&&(it&261930)===0?(Qt=!0,t.memoizedState=s):(t=bd(),Je.lanes|=t,Vo|=t,o)}function kf(t,o,s,u,d){var p=ie.p;ie.p=p!==0&&8>p?p:8;var T=L.T,A={};L.T=A,Rr(t,!1,o,s);try{var _=d(),k=L.S;if(k!==null&&k(A,_),_!==null&&typeof _=="object"&&typeof _.then=="function"){var J=ey(_,u);Il(t,o,J,wn(t))}else Il(t,o,u,wn(t))}catch(X){Il(t,o,{then:function(){},status:"rejected",reason:X},wn())}finally{ie.p=p,T!==null&&A.types!==null&&(T.types=A.types),L.T=T}}function sy(){}function Mr(t,o,s,u){if(t.tag!==5)throw Error(l(476));var d=Uf(t).queue;kf(t,d,o,xe,s===null?sy:function(){return Lf(t),s(u)})}function Uf(t){var o=t.memoizedState;if(o!==null)return o;o={memoizedState:xe,baseState:xe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:xe},next:null};var s={};return o.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:uo,lastRenderedState:s},next:null},t.memoizedState=o,t=t.alternate,t!==null&&(t.memoizedState=o),o}function Lf(t){var o=Uf(t);o.next===null&&(o=t.alternate.memoizedState),Il(t,o.next.queue,{},wn())}function Nr(){return ln(Yl)}function Vf(){return Yt().memoizedState}function Bf(){return Yt().memoizedState}function ay(t){for(var o=t.return;o!==null;){switch(o.tag){case 24:case 3:var s=wn();t=wo(s);var u=Do(o,t,s);u!==null&&(En(u,o,s),_l(u,o,s)),o={cache:nr()},t.payload=o;return}o=o.return}}function ry(t,o,s){var u=wn();s={lane:u,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},ks(t)?Pf(o,s):(s=Ja(t,o,s,u),s!==null&&(En(s,t,u),Gf(s,o,u)))}function qf(t,o,s){var u=wn();Il(t,o,s,u)}function Il(t,o,s,u){var d={lane:u,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(ks(t))Pf(o,d);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=o.lastRenderedReducer,p!==null))try{var T=o.lastRenderedState,A=p(T,s);if(d.hasEagerState=!0,d.eagerState=A,_n(A,T))return ps(t,o,d,0),wt===null&&ds(),!1}catch{}finally{}if(s=Ja(t,o,d,u),s!==null)return En(s,t,u),Gf(s,o,u),!0}return!1}function Rr(t,o,s,u){if(u={lane:2,revertLane:su(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},ks(t)){if(o)throw Error(l(479))}else o=Ja(t,s,u,2),o!==null&&En(o,t,2)}function ks(t){var o=t.alternate;return t===Je||o!==null&&o===Je}function Pf(t,o){Ui=Ms=!0;var s=t.pending;s===null?o.next=o:(o.next=s.next,s.next=o),t.pending=o}function Gf(t,o,s){if((s&4194048)!==0){var u=o.lanes;u&=t.pendingLanes,s|=u,o.lanes=s,Zn(t,s)}}var wl={readContext:ln,use:Is,useCallback:zt,useContext:zt,useEffect:zt,useImperativeHandle:zt,useLayoutEffect:zt,useInsertionEffect:zt,useMemo:zt,useReducer:zt,useRef:zt,useState:zt,useDebugValue:zt,useDeferredValue:zt,useTransition:zt,useSyncExternalStore:zt,useId:zt,useHostTransitionStatus:zt,useFormState:zt,useActionState:zt,useOptimistic:zt,useMemoCache:zt,useCacheRefresh:zt};wl.useEffectEvent=zt;var Hf={readContext:ln,use:Is,useCallback:function(t,o){return gn().memoizedState=[t,o===void 0?null:o],t},useContext:ln,useEffect:_f,useImperativeHandle:function(t,o,s){s=s!=null?s.concat([t]):null,Ds(4194308,4,Rf.bind(null,o,t),s)},useLayoutEffect:function(t,o){return Ds(4194308,4,t,o)},useInsertionEffect:function(t,o){Ds(4,2,t,o)},useMemo:function(t,o){var s=gn();o=o===void 0?null:o;var u=t();if(ai){Xe(!0);try{t()}finally{Xe(!1)}}return s.memoizedState=[u,o],u},useReducer:function(t,o,s){var u=gn();if(s!==void 0){var d=s(o);if(ai){Xe(!0);try{s(o)}finally{Xe(!1)}}}else d=o;return u.memoizedState=u.baseState=d,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:d},u.queue=t,t=t.dispatch=ry.bind(null,Je,t),[u.memoizedState,t]},useRef:function(t){var o=gn();return t={current:t},o.memoizedState=t},useState:function(t){t=Sr(t);var o=t.queue,s=qf.bind(null,Je,o);return o.dispatch=s,[t.memoizedState,s]},useDebugValue:_r,useDeferredValue:function(t,o){var s=gn();return xr(s,t,o)},useTransition:function(){var t=Sr(!1);return t=kf.bind(null,Je,t.queue,!0,!1),gn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,o,s){var u=Je,d=gn();if(at){if(s===void 0)throw Error(l(407));s=s()}else{if(s=o(),wt===null)throw Error(l(349));(it&127)!==0||rf(u,o,s)}d.memoizedState=s;var p={value:s,getSnapshot:o};return d.queue=p,_f(cf.bind(null,u,p,t),[t]),u.flags|=2048,Vi(9,{destroy:void 0},uf.bind(null,u,p,s,o),null),s},useId:function(){var t=gn(),o=wt.identifierPrefix;if(at){var s=Kn,u=$n;s=(u&~(1<<32-Te(u)-1)).toString(32)+s,o="_"+o+"R_"+s,s=Ns++,0<s&&(o+="H"+s.toString(32)),o+="_"}else s=ty++,o="_"+o+"r_"+s.toString(32)+"_";return t.memoizedState=o},useHostTransitionStatus:Nr,useFormState:Tf,useActionState:Tf,useOptimistic:function(t){var o=gn();o.memoizedState=o.baseState=t;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=s,o=Rr.bind(null,Je,!0,s),s.dispatch=o,[t,o]},useMemoCache:vr,useCacheRefresh:function(){return gn().memoizedState=ay.bind(null,Je)},useEffectEvent:function(t){var o=gn(),s={impl:t};return o.memoizedState=s,function(){if((Et&2)!==0)throw Error(l(440));return s.impl.apply(void 0,arguments)}}},Ir={readContext:ln,use:Is,useCallback:wf,useContext:ln,useEffect:Ar,useImperativeHandle:If,useInsertionEffect:Mf,useLayoutEffect:Nf,useMemo:Df,useReducer:ws,useRef:Af,useState:function(){return ws(uo)},useDebugValue:_r,useDeferredValue:function(t,o){var s=Yt();return bf(s,Mt.memoizedState,t,o)},useTransition:function(){var t=ws(uo)[0],o=Yt().memoizedState;return[typeof t=="boolean"?t:Rl(t),o]},useSyncExternalStore:af,useId:Vf,useHostTransitionStatus:Nr,useFormState:Cf,useActionState:Cf,useOptimistic:function(t,o){var s=Yt();return pf(s,Mt,t,o)},useMemoCache:vr,useCacheRefresh:Bf};Ir.useEffectEvent=xf;var zf={readContext:ln,use:Is,useCallback:wf,useContext:ln,useEffect:Ar,useImperativeHandle:If,useInsertionEffect:Mf,useLayoutEffect:Nf,useMemo:Df,useReducer:Cr,useRef:Af,useState:function(){return Cr(uo)},useDebugValue:_r,useDeferredValue:function(t,o){var s=Yt();return Mt===null?xr(s,t,o):bf(s,Mt.memoizedState,t,o)},useTransition:function(){var t=Cr(uo)[0],o=Yt().memoizedState;return[typeof t=="boolean"?t:Rl(t),o]},useSyncExternalStore:af,useId:Vf,useHostTransitionStatus:Nr,useFormState:Ef,useActionState:Ef,useOptimistic:function(t,o){var s=Yt();return Mt!==null?pf(s,Mt,t,o):(s.baseState=t,[t,s.queue.dispatch])},useMemoCache:vr,useCacheRefresh:Bf};zf.useEffectEvent=xf;function wr(t,o,s,u){o=t.memoizedState,s=s(u,o),s=s==null?o:C({},o,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Dr={enqueueSetState:function(t,o,s){t=t._reactInternals;var u=wn(),d=wo(u);d.payload=o,s!=null&&(d.callback=s),o=Do(t,d,u),o!==null&&(En(o,t,u),_l(o,t,u))},enqueueReplaceState:function(t,o,s){t=t._reactInternals;var u=wn(),d=wo(u);d.tag=1,d.payload=o,s!=null&&(d.callback=s),o=Do(t,d,u),o!==null&&(En(o,t,u),_l(o,t,u))},enqueueForceUpdate:function(t,o){t=t._reactInternals;var s=wn(),u=wo(s);u.tag=2,o!=null&&(u.callback=o),o=Do(t,u,s),o!==null&&(En(o,t,s),_l(o,t,s))}};function Of(t,o,s,u,d,p,T){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(u,p,T):o.prototype&&o.prototype.isPureReactComponent?!gl(s,u)||!gl(d,p):!0}function Ff(t,o,s,u){t=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(s,u),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(s,u),o.state!==t&&Dr.enqueueReplaceState(o,o.state,null)}function ri(t,o){var s=o;if("ref"in o){s={};for(var u in o)u!=="ref"&&(s[u]=o[u])}if(t=t.defaultProps){s===o&&(s=C({},s));for(var d in t)s[d]===void 0&&(s[d]=t[d])}return s}function Jf(t){fs(t)}function Yf(t){console.error(t)}function $f(t){fs(t)}function Us(t,o){try{var s=t.onUncaughtError;s(o.value,{componentStack:o.stack})}catch(u){setTimeout(function(){throw u})}}function Kf(t,o,s){try{var u=t.onCaughtError;u(s.value,{componentStack:s.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function br(t,o,s){return s=wo(s),s.tag=3,s.payload={element:null},s.callback=function(){Us(t,o)},s}function Xf(t){return t=wo(t),t.tag=3,t}function Qf(t,o,s,u){var d=s.type.getDerivedStateFromError;if(typeof d=="function"){var p=u.value;t.payload=function(){return d(p)},t.callback=function(){Kf(o,s,u)}}var T=s.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(t.callback=function(){Kf(o,s,u),typeof d!="function"&&(Bo===null?Bo=new Set([this]):Bo.add(this));var A=u.stack;this.componentDidCatch(u.value,{componentStack:A!==null?A:""})})}function uy(t,o,s,u,d){if(s.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(o=s.alternate,o!==null&&Ri(o,s,d,!0),s=Mn.current,s!==null){switch(s.tag){case 31:case 13:return Bn===null?Ys():s.alternate===null&&Ot===0&&(Ot=3),s.flags&=-257,s.flags|=65536,s.lanes=d,u===Ss?s.flags|=16384:(o=s.updateQueue,o===null?s.updateQueue=new Set([u]):o.add(u),ou(t,u,d)),!1;case 22:return s.flags|=65536,u===Ss?s.flags|=16384:(o=s.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([u])},s.updateQueue=o):(s=o.retryQueue,s===null?o.retryQueue=new Set([u]):s.add(u)),ou(t,u,d)),!1}throw Error(l(435,s.tag))}return ou(t,u,d),Ys(),!1}if(at)return o=Mn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=d,u!==Za&&(t=Error(l(422),{cause:u}),Tl(kn(t,s)))):(u!==Za&&(o=Error(l(423),{cause:u}),Tl(kn(o,s))),t=t.current.alternate,t.flags|=65536,d&=-d,t.lanes|=d,u=kn(u,s),d=br(t.stateNode,u,d),rr(t,d),Ot!==4&&(Ot=2)),!1;var p=Error(l(520),{cause:u});if(p=kn(p,s),ql===null?ql=[p]:ql.push(p),Ot!==4&&(Ot=2),o===null)return!0;u=kn(u,s),s=o;do{switch(s.tag){case 3:return s.flags|=65536,t=d&-d,s.lanes|=t,t=br(s.stateNode,u,t),rr(s,t),!1;case 1:if(o=s.type,p=s.stateNode,(s.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Bo===null||!Bo.has(p))))return s.flags|=65536,d&=-d,s.lanes|=d,d=Xf(d),Qf(d,t,s,u),rr(s,d),!1}s=s.return}while(s!==null);return!1}var kr=Error(l(461)),Qt=!1;function sn(t,o,s,u){o.child=t===null?jc(o,null,s,u):si(o,t.child,s,u)}function Zf(t,o,s,u,d){s=s.render;var p=o.ref;if("ref"in u){var T={};for(var A in u)A!=="ref"&&(T[A]=u[A])}else T=u;return ni(o),u=mr(t,o,s,T,p,d),A=hr(),t!==null&&!Qt?(gr(t,o,d),co(t,o,d)):(at&&A&&Xa(o),o.flags|=1,sn(t,o,u,d),o.child)}function Wf(t,o,s,u,d){if(t===null){var p=s.type;return typeof p=="function"&&!Ya(p)&&p.defaultProps===void 0&&s.compare===null?(o.tag=15,o.type=p,jf(t,o,p,u,d)):(t=hs(s.type,null,u,o,o.mode,d),t.ref=o.ref,t.return=o,o.child=t)}if(p=t.child,!Hr(t,d)){var T=p.memoizedProps;if(s=s.compare,s=s!==null?s:gl,s(T,u)&&t.ref===o.ref)return co(t,o,d)}return o.flags|=1,t=io(p,u),t.ref=o.ref,t.return=o,o.child=t}function jf(t,o,s,u,d){if(t!==null){var p=t.memoizedProps;if(gl(p,u)&&t.ref===o.ref)if(Qt=!1,o.pendingProps=u=p,Hr(t,d))(t.flags&131072)!==0&&(Qt=!0);else return o.lanes=t.lanes,co(t,o,d)}return Ur(t,o,s,u,d)}function ed(t,o,s,u){var d=u.children,p=t!==null?t.memoizedState:null;if(t===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((o.flags&128)!==0){if(p=p!==null?p.baseLanes|s:s,t!==null){for(u=o.child=t.child,d=0;u!==null;)d=d|u.lanes|u.childLanes,u=u.sibling;u=d&~p}else u=0,o.child=null;return td(t,o,p,s,u)}if((s&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},t!==null&&Ts(o,p!==null?p.cachePool:null),p!==null?nf(o,p):cr(),of(o);else return u=o.lanes=536870912,td(t,o,p!==null?p.baseLanes|s:s,s,u)}else p!==null?(Ts(o,p.cachePool),nf(o,p),ko(),o.memoizedState=null):(t!==null&&Ts(o,null),cr(),ko());return sn(t,o,d,s),o.child}function Dl(t,o){return t!==null&&t.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function td(t,o,s,u,d){var p=ir();return p=p===null?null:{parent:Kt._currentValue,pool:p},o.memoizedState={baseLanes:s,cachePool:p},t!==null&&Ts(o,null),cr(),of(o),t!==null&&Ri(t,o,u,!0),o.childLanes=d,null}function Ls(t,o){return o=Bs({mode:o.mode,children:o.children},t.mode),o.ref=t.ref,t.child=o,o.return=t,o}function nd(t,o,s){return si(o,t.child,null,s),t=Ls(o,o.pendingProps),t.flags|=2,Nn(o),o.memoizedState=null,t}function cy(t,o,s){var u=o.pendingProps,d=(o.flags&128)!==0;if(o.flags&=-129,t===null){if(at){if(u.mode==="hidden")return t=Ls(o,u),o.lanes=536870912,Dl(null,t);if(dr(o),(t=bt)?(t=mp(t,Vn),t=t!==null&&t.data==="&"?t:null,t!==null&&(o.memoizedState={dehydrated:t,treeContext:xo!==null?{id:$n,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},s=qc(t),s.return=o,o.child=s,on=o,bt=null)):t=null,t===null)throw No(o);return o.lanes=536870912,null}return Ls(o,u)}var p=t.memoizedState;if(p!==null){var T=p.dehydrated;if(dr(o),d)if(o.flags&256)o.flags&=-257,o=nd(t,o,s);else if(o.memoizedState!==null)o.child=t.child,o.flags|=128,o=null;else throw Error(l(558));else if(Qt||Ri(t,o,s,!1),d=(s&t.childLanes)!==0,Qt||d){if(u=wt,u!==null&&(T=il(u,s),T!==0&&T!==p.retryLane))throw p.retryLane=T,Wo(t,T),En(u,t,T),kr;Ys(),o=nd(t,o,s)}else t=p.treeContext,bt=qn(T.nextSibling),on=o,at=!0,Mo=null,Vn=!1,t!==null&&Hc(o,t),o=Ls(o,u),o.flags|=4096;return o}return t=io(t.child,{mode:u.mode,children:u.children}),t.ref=o.ref,o.child=t,t.return=o,t}function Vs(t,o){var s=o.ref;if(s===null)t!==null&&t.ref!==null&&(o.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(l(284));(t===null||t.ref!==s)&&(o.flags|=4194816)}}function Ur(t,o,s,u,d){return ni(o),s=mr(t,o,s,u,void 0,d),u=hr(),t!==null&&!Qt?(gr(t,o,d),co(t,o,d)):(at&&u&&Xa(o),o.flags|=1,sn(t,o,s,d),o.child)}function od(t,o,s,u,d,p){return ni(o),o.updateQueue=null,s=sf(o,u,s,d),lf(t),u=hr(),t!==null&&!Qt?(gr(t,o,p),co(t,o,p)):(at&&u&&Xa(o),o.flags|=1,sn(t,o,s,p),o.child)}function id(t,o,s,u,d){if(ni(o),o.stateNode===null){var p=_i,T=s.contextType;typeof T=="object"&&T!==null&&(p=ln(T)),p=new s(u,p),o.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Dr,o.stateNode=p,p._reactInternals=o,p=o.stateNode,p.props=u,p.state=o.memoizedState,p.refs={},sr(o),T=s.contextType,p.context=typeof T=="object"&&T!==null?ln(T):_i,p.state=o.memoizedState,T=s.getDerivedStateFromProps,typeof T=="function"&&(wr(o,s,T,u),p.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(T=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),T!==p.state&&Dr.enqueueReplaceState(p,p.state,null),Ml(o,u,p,d),xl(),p.state=o.memoizedState),typeof p.componentDidMount=="function"&&(o.flags|=4194308),u=!0}else if(t===null){p=o.stateNode;var A=o.memoizedProps,_=ri(s,A);p.props=_;var k=p.context,J=s.contextType;T=_i,typeof J=="object"&&J!==null&&(T=ln(J));var X=s.getDerivedStateFromProps;J=typeof X=="function"||typeof p.getSnapshotBeforeUpdate=="function",A=o.pendingProps!==A,J||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(A||k!==T)&&Ff(o,p,u,T),Io=!1;var B=o.memoizedState;p.state=B,Ml(o,u,p,d),xl(),k=o.memoizedState,A||B!==k||Io?(typeof X=="function"&&(wr(o,s,X,u),k=o.memoizedState),(_=Io||Of(o,s,_,u,B,k,T))?(J||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(o.flags|=4194308)):(typeof p.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=u,o.memoizedState=k),p.props=u,p.state=k,p.context=T,u=_):(typeof p.componentDidMount=="function"&&(o.flags|=4194308),u=!1)}else{p=o.stateNode,ar(t,o),T=o.memoizedProps,J=ri(s,T),p.props=J,X=o.pendingProps,B=p.context,k=s.contextType,_=_i,typeof k=="object"&&k!==null&&(_=ln(k)),A=s.getDerivedStateFromProps,(k=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(T!==X||B!==_)&&Ff(o,p,u,_),Io=!1,B=o.memoizedState,p.state=B,Ml(o,u,p,d),xl();var H=o.memoizedState;T!==X||B!==H||Io||t!==null&&t.dependencies!==null&&ys(t.dependencies)?(typeof A=="function"&&(wr(o,s,A,u),H=o.memoizedState),(J=Io||Of(o,s,J,u,B,H,_)||t!==null&&t.dependencies!==null&&ys(t.dependencies))?(k||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(u,H,_),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(u,H,_)),typeof p.componentDidUpdate=="function"&&(o.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&B===t.memoizedState||(o.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&B===t.memoizedState||(o.flags|=1024),o.memoizedProps=u,o.memoizedState=H),p.props=u,p.state=H,p.context=_,u=J):(typeof p.componentDidUpdate!="function"||T===t.memoizedProps&&B===t.memoizedState||(o.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||T===t.memoizedProps&&B===t.memoizedState||(o.flags|=1024),u=!1)}return p=u,Vs(t,o),u=(o.flags&128)!==0,p||u?(p=o.stateNode,s=u&&typeof s.getDerivedStateFromError!="function"?null:p.render(),o.flags|=1,t!==null&&u?(o.child=si(o,t.child,null,d),o.child=si(o,null,s,d)):sn(t,o,s,d),o.memoizedState=p.state,t=o.child):t=co(t,o,d),t}function ld(t,o,s,u){return ei(),o.flags|=256,sn(t,o,s,u),o.child}var Lr={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vr(t){return{baseLanes:t,cachePool:$c()}}function Br(t,o,s){return t=t!==null?t.childLanes&~s:0,o&&(t|=In),t}function sd(t,o,s){var u=o.pendingProps,d=!1,p=(o.flags&128)!==0,T;if((T=p)||(T=t!==null&&t.memoizedState===null?!1:(Jt.current&2)!==0),T&&(d=!0,o.flags&=-129),T=(o.flags&32)!==0,o.flags&=-33,t===null){if(at){if(d?bo(o):ko(),(t=bt)?(t=mp(t,Vn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(o.memoizedState={dehydrated:t,treeContext:xo!==null?{id:$n,overflow:Kn}:null,retryLane:536870912,hydrationErrors:null},s=qc(t),s.return=o,o.child=s,on=o,bt=null)):t=null,t===null)throw No(o);return Tu(t)?o.lanes=32:o.lanes=536870912,null}var A=u.children;return u=u.fallback,d?(ko(),d=o.mode,A=Bs({mode:"hidden",children:A},d),u=jo(u,d,s,null),A.return=o,u.return=o,A.sibling=u,o.child=A,u=o.child,u.memoizedState=Vr(s),u.childLanes=Br(t,T,s),o.memoizedState=Lr,Dl(null,u)):(bo(o),qr(o,A))}var _=t.memoizedState;if(_!==null&&(A=_.dehydrated,A!==null)){if(p)o.flags&256?(bo(o),o.flags&=-257,o=Pr(t,o,s)):o.memoizedState!==null?(ko(),o.child=t.child,o.flags|=128,o=null):(ko(),A=u.fallback,d=o.mode,u=Bs({mode:"visible",children:u.children},d),A=jo(A,d,s,null),A.flags|=2,u.return=o,A.return=o,u.sibling=A,o.child=u,si(o,t.child,null,s),u=o.child,u.memoizedState=Vr(s),u.childLanes=Br(t,T,s),o.memoizedState=Lr,o=Dl(null,u));else if(bo(o),Tu(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var k=T.dgst;T=k,u=Error(l(419)),u.stack="",u.digest=T,Tl({value:u,source:null,stack:null}),o=Pr(t,o,s)}else if(Qt||Ri(t,o,s,!1),T=(s&t.childLanes)!==0,Qt||T){if(T=wt,T!==null&&(u=il(T,s),u!==0&&u!==_.retryLane))throw _.retryLane=u,Wo(t,u),En(T,t,u),kr;vu(A)||Ys(),o=Pr(t,o,s)}else vu(A)?(o.flags|=192,o.child=t.child,o=null):(t=_.treeContext,bt=qn(A.nextSibling),on=o,at=!0,Mo=null,Vn=!1,t!==null&&Hc(o,t),o=qr(o,u.children),o.flags|=4096);return o}return d?(ko(),A=u.fallback,d=o.mode,_=t.child,k=_.sibling,u=io(_,{mode:"hidden",children:u.children}),u.subtreeFlags=_.subtreeFlags&65011712,k!==null?A=io(k,A):(A=jo(A,d,s,null),A.flags|=2),A.return=o,u.return=o,u.sibling=A,o.child=u,Dl(null,u),u=o.child,A=t.child.memoizedState,A===null?A=Vr(s):(d=A.cachePool,d!==null?(_=Kt._currentValue,d=d.parent!==_?{parent:_,pool:_}:d):d=$c(),A={baseLanes:A.baseLanes|s,cachePool:d}),u.memoizedState=A,u.childLanes=Br(t,T,s),o.memoizedState=Lr,Dl(t.child,u)):(bo(o),s=t.child,t=s.sibling,s=io(s,{mode:"visible",children:u.children}),s.return=o,s.sibling=null,t!==null&&(T=o.deletions,T===null?(o.deletions=[t],o.flags|=16):T.push(t)),o.child=s,o.memoizedState=null,s)}function qr(t,o){return o=Bs({mode:"visible",children:o},t.mode),o.return=t,t.child=o}function Bs(t,o){return t=xn(22,t,null,o),t.lanes=0,t}function Pr(t,o,s){return si(o,t.child,null,s),t=qr(o,o.pendingProps.children),t.flags|=2,o.memoizedState=null,t}function ad(t,o,s){t.lanes|=o;var u=t.alternate;u!==null&&(u.lanes|=o),er(t.return,o,s)}function Gr(t,o,s,u,d,p){var T=t.memoizedState;T===null?t.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:u,tail:s,tailMode:d,treeForkCount:p}:(T.isBackwards=o,T.rendering=null,T.renderingStartTime=0,T.last=u,T.tail=s,T.tailMode=d,T.treeForkCount=p)}function rd(t,o,s){var u=o.pendingProps,d=u.revealOrder,p=u.tail;u=u.children;var T=Jt.current,A=(T&2)!==0;if(A?(T=T&1|2,o.flags|=128):T&=1,ue(Jt,T),sn(t,o,u,s),u=at?vl:0,!A&&t!==null&&(t.flags&128)!==0)e:for(t=o.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ad(t,s,o);else if(t.tag===19)ad(t,s,o);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===o)break e;for(;t.sibling===null;){if(t.return===null||t.return===o)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(d){case"forwards":for(s=o.child,d=null;s!==null;)t=s.alternate,t!==null&&xs(t)===null&&(d=s),s=s.sibling;s=d,s===null?(d=o.child,o.child=null):(d=s.sibling,s.sibling=null),Gr(o,!1,d,s,p,u);break;case"backwards":case"unstable_legacy-backwards":for(s=null,d=o.child,o.child=null;d!==null;){if(t=d.alternate,t!==null&&xs(t)===null){o.child=d;break}t=d.sibling,d.sibling=s,s=d,d=t}Gr(o,!0,s,null,p,u);break;case"together":Gr(o,!1,null,null,void 0,u);break;default:o.memoizedState=null}return o.child}function co(t,o,s){if(t!==null&&(o.dependencies=t.dependencies),Vo|=o.lanes,(s&o.childLanes)===0)if(t!==null){if(Ri(t,o,s,!1),(s&o.childLanes)===0)return null}else return null;if(t!==null&&o.child!==t.child)throw Error(l(153));if(o.child!==null){for(t=o.child,s=io(t,t.pendingProps),o.child=s,s.return=o;t.sibling!==null;)t=t.sibling,s=s.sibling=io(t,t.pendingProps),s.return=o;s.sibling=null}return o.child}function Hr(t,o){return(t.lanes&o)!==0?!0:(t=t.dependencies,!!(t!==null&&ys(t)))}function fy(t,o,s){switch(o.tag){case 3:Pt(o,o.stateNode.containerInfo),Ro(o,Kt,t.memoizedState.cache),ei();break;case 27:case 5:qt(o);break;case 4:Pt(o,o.stateNode.containerInfo);break;case 10:Ro(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,dr(o),null;break;case 13:var u=o.memoizedState;if(u!==null)return u.dehydrated!==null?(bo(o),o.flags|=128,null):(s&o.child.childLanes)!==0?sd(t,o,s):(bo(o),t=co(t,o,s),t!==null?t.sibling:null);bo(o);break;case 19:var d=(t.flags&128)!==0;if(u=(s&o.childLanes)!==0,u||(Ri(t,o,s,!1),u=(s&o.childLanes)!==0),d){if(u)return rd(t,o,s);o.flags|=128}if(d=o.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ue(Jt,Jt.current),u)break;return null;case 22:return o.lanes=0,ed(t,o,s,o.pendingProps);case 24:Ro(o,Kt,t.memoizedState.cache)}return co(t,o,s)}function ud(t,o,s){if(t!==null)if(t.memoizedProps!==o.pendingProps)Qt=!0;else{if(!Hr(t,s)&&(o.flags&128)===0)return Qt=!1,fy(t,o,s);Qt=(t.flags&131072)!==0}else Qt=!1,at&&(o.flags&1048576)!==0&&Gc(o,vl,o.index);switch(o.lanes=0,o.tag){case 16:e:{var u=o.pendingProps;if(t=ii(o.elementType),o.type=t,typeof t=="function")Ya(t)?(u=ri(t,u),o.tag=1,o=id(null,o,t,u,s)):(o.tag=0,o=Ur(null,o,t,u,s));else{if(t!=null){var d=t.$$typeof;if(d===ee){o.tag=11,o=Zf(null,o,t,u,s);break e}else if(d===oe){o.tag=14,o=Wf(null,o,t,u,s);break e}}throw o=Bt(t)||t,Error(l(306,o,""))}}return o;case 0:return Ur(t,o,o.type,o.pendingProps,s);case 1:return u=o.type,d=ri(u,o.pendingProps),id(t,o,u,d,s);case 3:e:{if(Pt(o,o.stateNode.containerInfo),t===null)throw Error(l(387));u=o.pendingProps;var p=o.memoizedState;d=p.element,ar(t,o),Ml(o,u,null,s);var T=o.memoizedState;if(u=T.cache,Ro(o,Kt,u),u!==p.cache&&tr(o,[Kt],s,!0),xl(),u=T.element,p.isDehydrated)if(p={element:u,isDehydrated:!1,cache:T.cache},o.updateQueue.baseState=p,o.memoizedState=p,o.flags&256){o=ld(t,o,u,s);break e}else if(u!==d){d=kn(Error(l(424)),o),Tl(d),o=ld(t,o,u,s);break e}else{switch(t=o.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(bt=qn(t.firstChild),on=o,at=!0,Mo=null,Vn=!0,s=jc(o,null,u,s),o.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ei(),u===d){o=co(t,o,s);break e}sn(t,o,u,s)}o=o.child}return o;case 26:return Vs(t,o),t===null?(s=Cp(o.type,null,o.pendingProps,null))?o.memoizedState=s:at||(s=o.type,t=o.pendingProps,u=js(ze.current).createElement(s),u[Wt]=o,u[cn]=t,an(u,s,t),Lt(u),o.stateNode=u):o.memoizedState=Cp(o.type,t.memoizedProps,o.pendingProps,t.memoizedState),null;case 27:return qt(o),t===null&&at&&(u=o.stateNode=yp(o.type,o.pendingProps,ze.current),on=o,Vn=!0,d=bt,Ho(o.type)?(Cu=d,bt=qn(u.firstChild)):bt=d),sn(t,o,o.pendingProps.children,s),Vs(t,o),t===null&&(o.flags|=4194304),o.child;case 5:return t===null&&at&&((d=u=bt)&&(u=Hy(u,o.type,o.pendingProps,Vn),u!==null?(o.stateNode=u,on=o,bt=qn(u.firstChild),Vn=!1,d=!0):d=!1),d||No(o)),qt(o),d=o.type,p=o.pendingProps,T=t!==null?t.memoizedProps:null,u=p.children,hu(d,p)?u=null:T!==null&&hu(d,T)&&(o.flags|=32),o.memoizedState!==null&&(d=mr(t,o,ny,null,null,s),Yl._currentValue=d),Vs(t,o),sn(t,o,u,s),o.child;case 6:return t===null&&at&&((t=s=bt)&&(s=zy(s,o.pendingProps,Vn),s!==null?(o.stateNode=s,on=o,bt=null,t=!0):t=!1),t||No(o)),null;case 13:return sd(t,o,s);case 4:return Pt(o,o.stateNode.containerInfo),u=o.pendingProps,t===null?o.child=si(o,null,u,s):sn(t,o,u,s),o.child;case 11:return Zf(t,o,o.type,o.pendingProps,s);case 7:return sn(t,o,o.pendingProps,s),o.child;case 8:return sn(t,o,o.pendingProps.children,s),o.child;case 12:return sn(t,o,o.pendingProps.children,s),o.child;case 10:return u=o.pendingProps,Ro(o,o.type,u.value),sn(t,o,u.children,s),o.child;case 9:return d=o.type._context,u=o.pendingProps.children,ni(o),d=ln(d),u=u(d),o.flags|=1,sn(t,o,u,s),o.child;case 14:return Wf(t,o,o.type,o.pendingProps,s);case 15:return jf(t,o,o.type,o.pendingProps,s);case 19:return rd(t,o,s);case 31:return cy(t,o,s);case 22:return ed(t,o,s,o.pendingProps);case 24:return ni(o),u=ln(Kt),t===null?(d=ir(),d===null&&(d=wt,p=nr(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=s),d=p),o.memoizedState={parent:u,cache:d},sr(o),Ro(o,Kt,d)):((t.lanes&s)!==0&&(ar(t,o),Ml(o,null,null,s),xl()),d=t.memoizedState,p=o.memoizedState,d.parent!==u?(d={parent:u,cache:u},o.memoizedState=d,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=d),Ro(o,Kt,u)):(u=p.cache,Ro(o,Kt,u),u!==d.cache&&tr(o,[Kt],s,!0))),sn(t,o,o.pendingProps.children,s),o.child;case 29:throw o.pendingProps}throw Error(l(156,o.tag))}function fo(t){t.flags|=4}function zr(t,o,s,u,d){if((o=(t.mode&32)!==0)&&(o=!1),o){if(t.flags|=16777216,(d&335544128)===d)if(t.stateNode.complete)t.flags|=8192;else if(Vd())t.flags|=8192;else throw li=Ss,lr}else t.flags&=-16777217}function cd(t,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!xp(o))if(Vd())t.flags|=8192;else throw li=Ss,lr}function qs(t,o){o!==null&&(t.flags|=4),t.flags&16384&&(o=t.tag!==22?mn():536870912,t.lanes|=o,Gi|=o)}function bl(t,o){if(!at)switch(t.tailMode){case"hidden":o=t.tail;for(var s=null;o!==null;)o.alternate!==null&&(s=o),o=o.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var u=null;s!==null;)s.alternate!==null&&(u=s),s=s.sibling;u===null?o||t.tail===null?t.tail=null:t.tail.sibling=null:u.sibling=null}}function kt(t){var o=t.alternate!==null&&t.alternate.child===t.child,s=0,u=0;if(o)for(var d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags&65011712,u|=d.flags&65011712,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)s|=d.lanes|d.childLanes,u|=d.subtreeFlags,u|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=u,t.childLanes=s,o}function dy(t,o,s){var u=o.pendingProps;switch(Qa(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(o),null;case 1:return kt(o),null;case 3:return s=o.stateNode,u=null,t!==null&&(u=t.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),ao(Kt),he(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Ni(o)?fo(o):t===null||t.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Wa())),kt(o),null;case 26:var d=o.type,p=o.memoizedState;return t===null?(fo(o),p!==null?(kt(o),cd(o,p)):(kt(o),zr(o,d,null,u,s))):p?p!==t.memoizedState?(fo(o),kt(o),cd(o,p)):(kt(o),o.flags&=-16777217):(t=t.memoizedProps,t!==u&&fo(o),kt(o),zr(o,d,t,u,s)),null;case 27:if(rn(o),s=ze.current,d=o.type,t!==null&&o.stateNode!=null)t.memoizedProps!==u&&fo(o);else{if(!u){if(o.stateNode===null)throw Error(l(166));return kt(o),null}t=se.current,Ni(o)?zc(o):(t=yp(d,u,s),o.stateNode=t,fo(o))}return kt(o),null;case 5:if(rn(o),d=o.type,t!==null&&o.stateNode!=null)t.memoizedProps!==u&&fo(o);else{if(!u){if(o.stateNode===null)throw Error(l(166));return kt(o),null}if(p=se.current,Ni(o))zc(o);else{var T=js(ze.current);switch(p){case 1:p=T.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=T.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=T.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=T.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof u.is=="string"?T.createElement("select",{is:u.is}):T.createElement("select"),u.multiple?p.multiple=!0:u.size&&(p.size=u.size);break;default:p=typeof u.is=="string"?T.createElement(d,{is:u.is}):T.createElement(d)}}p[Wt]=o,p[cn]=u;e:for(T=o.child;T!==null;){if(T.tag===5||T.tag===6)p.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===o)break e;for(;T.sibling===null;){if(T.return===null||T.return===o)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}o.stateNode=p;e:switch(an(p,d,u),d){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&fo(o)}}return kt(o),zr(o,o.type,t===null?null:t.memoizedProps,o.pendingProps,s),null;case 6:if(t&&o.stateNode!=null)t.memoizedProps!==u&&fo(o);else{if(typeof u!="string"&&o.stateNode===null)throw Error(l(166));if(t=ze.current,Ni(o)){if(t=o.stateNode,s=o.memoizedProps,u=null,d=on,d!==null)switch(d.tag){case 27:case 5:u=d.memoizedProps}t[Wt]=o,t=!!(t.nodeValue===s||u!==null&&u.suppressHydrationWarning===!0||sp(t.nodeValue,s)),t||No(o,!0)}else t=js(t).createTextNode(u),t[Wt]=o,o.stateNode=t}return kt(o),null;case 31:if(s=o.memoizedState,t===null||t.memoizedState!==null){if(u=Ni(o),s!==null){if(t===null){if(!u)throw Error(l(318));if(t=o.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(l(557));t[Wt]=o}else ei(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;kt(o),t=!1}else s=Wa(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=s),t=!0;if(!t)return o.flags&256?(Nn(o),o):(Nn(o),null);if((o.flags&128)!==0)throw Error(l(558))}return kt(o),null;case 13:if(u=o.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(d=Ni(o),u!==null&&u.dehydrated!==null){if(t===null){if(!d)throw Error(l(318));if(d=o.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(l(317));d[Wt]=o}else ei(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;kt(o),d=!1}else d=Wa(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=d),d=!0;if(!d)return o.flags&256?(Nn(o),o):(Nn(o),null)}return Nn(o),(o.flags&128)!==0?(o.lanes=s,o):(s=u!==null,t=t!==null&&t.memoizedState!==null,s&&(u=o.child,d=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(d=u.alternate.memoizedState.cachePool.pool),p=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(p=u.memoizedState.cachePool.pool),p!==d&&(u.flags|=2048)),s!==t&&s&&(o.child.flags|=8192),qs(o,o.updateQueue),kt(o),null);case 4:return he(),t===null&&cu(o.stateNode.containerInfo),kt(o),null;case 10:return ao(o.type),kt(o),null;case 19:if($(Jt),u=o.memoizedState,u===null)return kt(o),null;if(d=(o.flags&128)!==0,p=u.rendering,p===null)if(d)bl(u,!1);else{if(Ot!==0||t!==null&&(t.flags&128)!==0)for(t=o.child;t!==null;){if(p=xs(t),p!==null){for(o.flags|=128,bl(u,!1),t=p.updateQueue,o.updateQueue=t,qs(o,t),o.subtreeFlags=0,t=s,s=o.child;s!==null;)Bc(s,t),s=s.sibling;return ue(Jt,Jt.current&1|2),at&&lo(o,u.treeForkCount),o.child}t=t.sibling}u.tail!==null&&Le()>Os&&(o.flags|=128,d=!0,bl(u,!1),o.lanes=4194304)}else{if(!d)if(t=xs(p),t!==null){if(o.flags|=128,d=!0,t=t.updateQueue,o.updateQueue=t,qs(o,t),bl(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!at)return kt(o),null}else 2*Le()-u.renderingStartTime>Os&&s!==536870912&&(o.flags|=128,d=!0,bl(u,!1),o.lanes=4194304);u.isBackwards?(p.sibling=o.child,o.child=p):(t=u.last,t!==null?t.sibling=p:o.child=p,u.last=p)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=Le(),t.sibling=null,s=Jt.current,ue(Jt,d?s&1|2:s&1),at&&lo(o,u.treeForkCount),t):(kt(o),null);case 22:case 23:return Nn(o),fr(),u=o.memoizedState!==null,t!==null?t.memoizedState!==null!==u&&(o.flags|=8192):u&&(o.flags|=8192),u?(s&536870912)!==0&&(o.flags&128)===0&&(kt(o),o.subtreeFlags&6&&(o.flags|=8192)):kt(o),s=o.updateQueue,s!==null&&qs(o,s.retryQueue),s=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),u=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),u!==s&&(o.flags|=2048),t!==null&&$(oi),null;case 24:return s=null,t!==null&&(s=t.memoizedState.cache),o.memoizedState.cache!==s&&(o.flags|=2048),ao(Kt),kt(o),null;case 25:return null;case 30:return null}throw Error(l(156,o.tag))}function py(t,o){switch(Qa(o),o.tag){case 1:return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 3:return ao(Kt),he(),t=o.flags,(t&65536)!==0&&(t&128)===0?(o.flags=t&-65537|128,o):null;case 26:case 27:case 5:return rn(o),null;case 31:if(o.memoizedState!==null){if(Nn(o),o.alternate===null)throw Error(l(340));ei()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 13:if(Nn(o),t=o.memoizedState,t!==null&&t.dehydrated!==null){if(o.alternate===null)throw Error(l(340));ei()}return t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 19:return $(Jt),null;case 4:return he(),null;case 10:return ao(o.type),null;case 22:case 23:return Nn(o),fr(),t!==null&&$(oi),t=o.flags,t&65536?(o.flags=t&-65537|128,o):null;case 24:return ao(Kt),null;case 25:return null;default:return null}}function fd(t,o){switch(Qa(o),o.tag){case 3:ao(Kt),he();break;case 26:case 27:case 5:rn(o);break;case 4:he();break;case 31:o.memoizedState!==null&&Nn(o);break;case 13:Nn(o);break;case 19:$(Jt);break;case 10:ao(o.type);break;case 22:case 23:Nn(o),fr(),t!==null&&$(oi);break;case 24:ao(Kt)}}function kl(t,o){try{var s=o.updateQueue,u=s!==null?s.lastEffect:null;if(u!==null){var d=u.next;s=d;do{if((s.tag&t)===t){u=void 0;var p=s.create,T=s.inst;u=p(),T.destroy=u}s=s.next}while(s!==d)}}catch(A){xt(o,o.return,A)}}function Uo(t,o,s){try{var u=o.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var p=d.next;u=p;do{if((u.tag&t)===t){var T=u.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,d=o;var _=s,k=A;try{k()}catch(J){xt(d,_,J)}}}u=u.next}while(u!==p)}}catch(J){xt(o,o.return,J)}}function dd(t){var o=t.updateQueue;if(o!==null){var s=t.stateNode;try{tf(o,s)}catch(u){xt(t,t.return,u)}}}function pd(t,o,s){s.props=ri(t.type,t.memoizedProps),s.state=t.memoizedState;try{s.componentWillUnmount()}catch(u){xt(t,o,u)}}function Ul(t,o){try{var s=t.ref;if(s!==null){switch(t.tag){case 26:case 27:case 5:var u=t.stateNode;break;case 30:u=t.stateNode;break;default:u=t.stateNode}typeof s=="function"?t.refCleanup=s(u):s.current=u}}catch(d){xt(t,o,d)}}function Xn(t,o){var s=t.ref,u=t.refCleanup;if(s!==null)if(typeof u=="function")try{u()}catch(d){xt(t,o,d)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(d){xt(t,o,d)}else s.current=null}function md(t){var o=t.type,s=t.memoizedProps,u=t.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":s.autoFocus&&u.focus();break e;case"img":s.src?u.src=s.src:s.srcSet&&(u.srcset=s.srcSet)}}catch(d){xt(t,t.return,d)}}function Or(t,o,s){try{var u=t.stateNode;Ly(u,t.type,s,o),u[cn]=o}catch(d){xt(t,t.return,d)}}function hd(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Ho(t.type)||t.tag===4}function Fr(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hd(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Ho(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jr(t,o,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,o?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(t,o):(o=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,o.appendChild(t),s=s._reactRootContainer,s!=null||o.onclick!==null||(o.onclick=no));else if(u!==4&&(u===27&&Ho(t.type)&&(s=t.stateNode,o=null),t=t.child,t!==null))for(Jr(t,o,s),t=t.sibling;t!==null;)Jr(t,o,s),t=t.sibling}function Ps(t,o,s){var u=t.tag;if(u===5||u===6)t=t.stateNode,o?s.insertBefore(t,o):s.appendChild(t);else if(u!==4&&(u===27&&Ho(t.type)&&(s=t.stateNode),t=t.child,t!==null))for(Ps(t,o,s),t=t.sibling;t!==null;)Ps(t,o,s),t=t.sibling}function gd(t){var o=t.stateNode,s=t.memoizedProps;try{for(var u=t.type,d=o.attributes;d.length;)o.removeAttributeNode(d[0]);an(o,u,s),o[Wt]=t,o[cn]=s}catch(p){xt(t,t.return,p)}}var po=!1,Zt=!1,Yr=!1,yd=typeof WeakSet=="function"?WeakSet:Set,nn=null;function my(t,o){if(t=t.containerInfo,pu=sa,t=Rc(t),Pa(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var u=s.getSelection&&s.getSelection();if(u&&u.rangeCount!==0){s=u.anchorNode;var d=u.anchorOffset,p=u.focusNode;u=u.focusOffset;try{s.nodeType,p.nodeType}catch{s=null;break e}var T=0,A=-1,_=-1,k=0,J=0,X=t,B=null;t:for(;;){for(var H;X!==s||d!==0&&X.nodeType!==3||(A=T+d),X!==p||u!==0&&X.nodeType!==3||(_=T+u),X.nodeType===3&&(T+=X.nodeValue.length),(H=X.firstChild)!==null;)B=X,X=H;for(;;){if(X===t)break t;if(B===s&&++k===d&&(A=T),B===p&&++J===u&&(_=T),(H=X.nextSibling)!==null)break;X=B,B=X.parentNode}X=H}s=A===-1||_===-1?null:{start:A,end:_}}else s=null}s=s||{start:0,end:0}}else s=null;for(mu={focusedElem:t,selectionRange:s},sa=!1,nn=o;nn!==null;)if(o=nn,t=o.child,(o.subtreeFlags&1028)!==0&&t!==null)t.return=o,nn=t;else for(;nn!==null;){switch(o=nn,p=o.alternate,t=o.flags,o.tag){case 0:if((t&4)!==0&&(t=o.updateQueue,t=t!==null?t.events:null,t!==null))for(s=0;s<t.length;s++)d=t[s],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,s=o,d=p.memoizedProps,p=p.memoizedState,u=s.stateNode;try{var ge=ri(s.type,d);t=u.getSnapshotBeforeUpdate(ge,p),u.__reactInternalSnapshotBeforeUpdate=t}catch(Ie){xt(s,s.return,Ie)}}break;case 3:if((t&1024)!==0){if(t=o.stateNode.containerInfo,s=t.nodeType,s===9)yu(t);else if(s===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":yu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(l(163))}if(t=o.sibling,t!==null){t.return=o.return,nn=t;break}nn=o.return}}function vd(t,o,s){var u=s.flags;switch(s.tag){case 0:case 11:case 15:ho(t,s),u&4&&kl(5,s);break;case 1:if(ho(t,s),u&4)if(t=s.stateNode,o===null)try{t.componentDidMount()}catch(T){xt(s,s.return,T)}else{var d=ri(s.type,o.memoizedProps);o=o.memoizedState;try{t.componentDidUpdate(d,o,t.__reactInternalSnapshotBeforeUpdate)}catch(T){xt(s,s.return,T)}}u&64&&dd(s),u&512&&Ul(s,s.return);break;case 3:if(ho(t,s),u&64&&(t=s.updateQueue,t!==null)){if(o=null,s.child!==null)switch(s.child.tag){case 27:case 5:o=s.child.stateNode;break;case 1:o=s.child.stateNode}try{tf(t,o)}catch(T){xt(s,s.return,T)}}break;case 27:o===null&&u&4&&gd(s);case 26:case 5:ho(t,s),o===null&&u&4&&md(s),u&512&&Ul(s,s.return);break;case 12:ho(t,s);break;case 31:ho(t,s),u&4&&Sd(t,s);break;case 13:ho(t,s),u&4&&Ed(t,s),u&64&&(t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(s=Ay.bind(null,s),Oy(t,s))));break;case 22:if(u=s.memoizedState!==null||po,!u){o=o!==null&&o.memoizedState!==null||Zt,d=po;var p=Zt;po=u,(Zt=o)&&!p?go(t,s,(s.subtreeFlags&8772)!==0):ho(t,s),po=d,Zt=p}break;case 30:break;default:ho(t,s)}}function Td(t){var o=t.alternate;o!==null&&(t.alternate=null,Td(o)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(o=t.stateNode,o!==null&&yi(o)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Vt=null,vn=!1;function mo(t,o,s){for(s=s.child;s!==null;)Cd(t,o,s),s=s.sibling}function Cd(t,o,s){if(Oe&&typeof Oe.onCommitFiberUnmount=="function")try{Oe.onCommitFiberUnmount(we,s)}catch{}switch(s.tag){case 26:Zt||Xn(s,o),mo(t,o,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:Zt||Xn(s,o);var u=Vt,d=vn;Ho(s.type)&&(Vt=s.stateNode,vn=!1),mo(t,o,s),Ol(s.stateNode),Vt=u,vn=d;break;case 5:Zt||Xn(s,o);case 6:if(u=Vt,d=vn,Vt=null,mo(t,o,s),Vt=u,vn=d,Vt!==null)if(vn)try{(Vt.nodeType===9?Vt.body:Vt.nodeName==="HTML"?Vt.ownerDocument.body:Vt).removeChild(s.stateNode)}catch(p){xt(s,o,p)}else try{Vt.removeChild(s.stateNode)}catch(p){xt(s,o,p)}break;case 18:Vt!==null&&(vn?(t=Vt,dp(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,s.stateNode),Ki(t)):dp(Vt,s.stateNode));break;case 4:u=Vt,d=vn,Vt=s.stateNode.containerInfo,vn=!0,mo(t,o,s),Vt=u,vn=d;break;case 0:case 11:case 14:case 15:Uo(2,s,o),Zt||Uo(4,s,o),mo(t,o,s);break;case 1:Zt||(Xn(s,o),u=s.stateNode,typeof u.componentWillUnmount=="function"&&pd(s,o,u)),mo(t,o,s);break;case 21:mo(t,o,s);break;case 22:Zt=(u=Zt)||s.memoizedState!==null,mo(t,o,s),Zt=u;break;default:mo(t,o,s)}}function Sd(t,o){if(o.memoizedState===null&&(t=o.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ki(t)}catch(s){xt(o,o.return,s)}}}function Ed(t,o){if(o.memoizedState===null&&(t=o.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ki(t)}catch(s){xt(o,o.return,s)}}function hy(t){switch(t.tag){case 31:case 13:case 19:var o=t.stateNode;return o===null&&(o=t.stateNode=new yd),o;case 22:return t=t.stateNode,o=t._retryCache,o===null&&(o=t._retryCache=new yd),o;default:throw Error(l(435,t.tag))}}function Gs(t,o){var s=hy(t);o.forEach(function(u){if(!s.has(u)){s.add(u);var d=_y.bind(null,t,u);u.then(d,d)}})}function Tn(t,o){var s=o.deletions;if(s!==null)for(var u=0;u<s.length;u++){var d=s[u],p=t,T=o,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(Ho(A.type)){Vt=A.stateNode,vn=!1;break e}break;case 5:Vt=A.stateNode,vn=!1;break e;case 3:case 4:Vt=A.stateNode.containerInfo,vn=!0;break e}A=A.return}if(Vt===null)throw Error(l(160));Cd(p,T,d),Vt=null,vn=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)Ad(o,t),o=o.sibling}var On=null;function Ad(t,o){var s=t.alternate,u=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Tn(o,t),Cn(t),u&4&&(Uo(3,t,t.return),kl(3,t),Uo(5,t,t.return));break;case 1:Tn(o,t),Cn(t),u&512&&(Zt||s===null||Xn(s,s.return)),u&64&&po&&(t=t.updateQueue,t!==null&&(u=t.callbacks,u!==null&&(s=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=s===null?u:s.concat(u))));break;case 26:var d=On;if(Tn(o,t),Cn(t),u&512&&(Zt||s===null||Xn(s,s.return)),u&4){var p=s!==null?s.memoizedState:null;if(u=t.memoizedState,s===null)if(u===null)if(t.stateNode===null){e:{u=t.type,s=t.memoizedProps,d=d.ownerDocument||d;t:switch(u){case"title":p=d.getElementsByTagName("title")[0],(!p||p[$o]||p[Wt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(u),d.head.insertBefore(p,d.querySelector("head > title"))),an(p,u,s),p[Wt]=t,Lt(p),u=p;break e;case"link":var T=Ap("link","href",d).get(u+(s.href||""));if(T){for(var A=0;A<T.length;A++)if(p=T[A],p.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&p.getAttribute("rel")===(s.rel==null?null:s.rel)&&p.getAttribute("title")===(s.title==null?null:s.title)&&p.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){T.splice(A,1);break t}}p=d.createElement(u),an(p,u,s),d.head.appendChild(p);break;case"meta":if(T=Ap("meta","content",d).get(u+(s.content||""))){for(A=0;A<T.length;A++)if(p=T[A],p.getAttribute("content")===(s.content==null?null:""+s.content)&&p.getAttribute("name")===(s.name==null?null:s.name)&&p.getAttribute("property")===(s.property==null?null:s.property)&&p.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&p.getAttribute("charset")===(s.charSet==null?null:s.charSet)){T.splice(A,1);break t}}p=d.createElement(u),an(p,u,s),d.head.appendChild(p);break;default:throw Error(l(468,u))}p[Wt]=t,Lt(p),u=p}t.stateNode=u}else _p(d,t.type,t.stateNode);else t.stateNode=Ep(d,u,t.memoizedProps);else p!==u?(p===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):p.count--,u===null?_p(d,t.type,t.stateNode):Ep(d,u,t.memoizedProps)):u===null&&t.stateNode!==null&&Or(t,t.memoizedProps,s.memoizedProps)}break;case 27:Tn(o,t),Cn(t),u&512&&(Zt||s===null||Xn(s,s.return)),s!==null&&u&4&&Or(t,t.memoizedProps,s.memoizedProps);break;case 5:if(Tn(o,t),Cn(t),u&512&&(Zt||s===null||Xn(s,s.return)),t.flags&32){d=t.stateNode;try{Ht(d,"")}catch(ge){xt(t,t.return,ge)}}u&4&&t.stateNode!=null&&(d=t.memoizedProps,Or(t,d,s!==null?s.memoizedProps:d)),u&1024&&(Yr=!0);break;case 6:if(Tn(o,t),Cn(t),u&4){if(t.stateNode===null)throw Error(l(162));u=t.memoizedProps,s=t.stateNode;try{s.nodeValue=u}catch(ge){xt(t,t.return,ge)}}break;case 3:if(na=null,d=On,On=ea(o.containerInfo),Tn(o,t),On=d,Cn(t),u&4&&s!==null&&s.memoizedState.isDehydrated)try{Ki(o.containerInfo)}catch(ge){xt(t,t.return,ge)}Yr&&(Yr=!1,_d(t));break;case 4:u=On,On=ea(t.stateNode.containerInfo),Tn(o,t),Cn(t),On=u;break;case 12:Tn(o,t),Cn(t);break;case 31:Tn(o,t),Cn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Gs(t,u)));break;case 13:Tn(o,t),Cn(t),t.child.flags&8192&&t.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(zs=Le()),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Gs(t,u)));break;case 22:d=t.memoizedState!==null;var _=s!==null&&s.memoizedState!==null,k=po,J=Zt;if(po=k||d,Zt=J||_,Tn(o,t),Zt=J,po=k,Cn(t),u&8192)e:for(o=t.stateNode,o._visibility=d?o._visibility&-2:o._visibility|1,d&&(s===null||_||po||Zt||ui(t)),s=null,o=t;;){if(o.tag===5||o.tag===26){if(s===null){_=s=o;try{if(p=_.stateNode,d)T=p.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=_.stateNode;var X=_.memoizedProps.style,B=X!=null&&X.hasOwnProperty("display")?X.display:null;A.style.display=B==null||typeof B=="boolean"?"":(""+B).trim()}}catch(ge){xt(_,_.return,ge)}}}else if(o.tag===6){if(s===null){_=o;try{_.stateNode.nodeValue=d?"":_.memoizedProps}catch(ge){xt(_,_.return,ge)}}}else if(o.tag===18){if(s===null){_=o;try{var H=_.stateNode;d?pp(H,!0):pp(_.stateNode,!1)}catch(ge){xt(_,_.return,ge)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===t)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;o.sibling===null;){if(o.return===null||o.return===t)break e;s===o&&(s=null),o=o.return}s===o&&(s=null),o.sibling.return=o.return,o=o.sibling}u&4&&(u=t.updateQueue,u!==null&&(s=u.retryQueue,s!==null&&(u.retryQueue=null,Gs(t,s))));break;case 19:Tn(o,t),Cn(t),u&4&&(u=t.updateQueue,u!==null&&(t.updateQueue=null,Gs(t,u)));break;case 30:break;case 21:break;default:Tn(o,t),Cn(t)}}function Cn(t){var o=t.flags;if(o&2){try{for(var s,u=t.return;u!==null;){if(hd(u)){s=u;break}u=u.return}if(s==null)throw Error(l(160));switch(s.tag){case 27:var d=s.stateNode,p=Fr(t);Ps(t,p,d);break;case 5:var T=s.stateNode;s.flags&32&&(Ht(T,""),s.flags&=-33);var A=Fr(t);Ps(t,A,T);break;case 3:case 4:var _=s.stateNode.containerInfo,k=Fr(t);Jr(t,k,_);break;default:throw Error(l(161))}}catch(J){xt(t,t.return,J)}t.flags&=-3}o&4096&&(t.flags&=-4097)}function _d(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var o=t;_d(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),t=t.sibling}}function ho(t,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)vd(t,o.alternate,o),o=o.sibling}function ui(t){for(t=t.child;t!==null;){var o=t;switch(o.tag){case 0:case 11:case 14:case 15:Uo(4,o,o.return),ui(o);break;case 1:Xn(o,o.return);var s=o.stateNode;typeof s.componentWillUnmount=="function"&&pd(o,o.return,s),ui(o);break;case 27:Ol(o.stateNode);case 26:case 5:Xn(o,o.return),ui(o);break;case 22:o.memoizedState===null&&ui(o);break;case 30:ui(o);break;default:ui(o)}t=t.sibling}}function go(t,o,s){for(s=s&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var u=o.alternate,d=t,p=o,T=p.flags;switch(p.tag){case 0:case 11:case 15:go(d,p,s),kl(4,p);break;case 1:if(go(d,p,s),u=p,d=u.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(k){xt(u,u.return,k)}if(u=p,d=u.updateQueue,d!==null){var A=u.stateNode;try{var _=d.shared.hiddenCallbacks;if(_!==null)for(d.shared.hiddenCallbacks=null,d=0;d<_.length;d++)ef(_[d],A)}catch(k){xt(u,u.return,k)}}s&&T&64&&dd(p),Ul(p,p.return);break;case 27:gd(p);case 26:case 5:go(d,p,s),s&&u===null&&T&4&&md(p),Ul(p,p.return);break;case 12:go(d,p,s);break;case 31:go(d,p,s),s&&T&4&&Sd(d,p);break;case 13:go(d,p,s),s&&T&4&&Ed(d,p);break;case 22:p.memoizedState===null&&go(d,p,s),Ul(p,p.return);break;case 30:break;default:go(d,p,s)}o=o.sibling}}function $r(t,o){var s=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(s=t.memoizedState.cachePool.pool),t=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(t=o.memoizedState.cachePool.pool),t!==s&&(t!=null&&t.refCount++,s!=null&&Cl(s))}function Kr(t,o){t=null,o.alternate!==null&&(t=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==t&&(o.refCount++,t!=null&&Cl(t))}function Fn(t,o,s,u){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)xd(t,o,s,u),o=o.sibling}function xd(t,o,s,u){var d=o.flags;switch(o.tag){case 0:case 11:case 15:Fn(t,o,s,u),d&2048&&kl(9,o);break;case 1:Fn(t,o,s,u);break;case 3:Fn(t,o,s,u),d&2048&&(t=null,o.alternate!==null&&(t=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==t&&(o.refCount++,t!=null&&Cl(t)));break;case 12:if(d&2048){Fn(t,o,s,u),t=o.stateNode;try{var p=o.memoizedProps,T=p.id,A=p.onPostCommit;typeof A=="function"&&A(T,o.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(_){xt(o,o.return,_)}}else Fn(t,o,s,u);break;case 31:Fn(t,o,s,u);break;case 13:Fn(t,o,s,u);break;case 23:break;case 22:p=o.stateNode,T=o.alternate,o.memoizedState!==null?p._visibility&2?Fn(t,o,s,u):Ll(t,o):p._visibility&2?Fn(t,o,s,u):(p._visibility|=2,Bi(t,o,s,u,(o.subtreeFlags&10256)!==0||!1)),d&2048&&$r(T,o);break;case 24:Fn(t,o,s,u),d&2048&&Kr(o.alternate,o);break;default:Fn(t,o,s,u)}}function Bi(t,o,s,u,d){for(d=d&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var p=t,T=o,A=s,_=u,k=T.flags;switch(T.tag){case 0:case 11:case 15:Bi(p,T,A,_,d),kl(8,T);break;case 23:break;case 22:var J=T.stateNode;T.memoizedState!==null?J._visibility&2?Bi(p,T,A,_,d):Ll(p,T):(J._visibility|=2,Bi(p,T,A,_,d)),d&&k&2048&&$r(T.alternate,T);break;case 24:Bi(p,T,A,_,d),d&&k&2048&&Kr(T.alternate,T);break;default:Bi(p,T,A,_,d)}o=o.sibling}}function Ll(t,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var s=t,u=o,d=u.flags;switch(u.tag){case 22:Ll(s,u),d&2048&&$r(u.alternate,u);break;case 24:Ll(s,u),d&2048&&Kr(u.alternate,u);break;default:Ll(s,u)}o=o.sibling}}var Vl=8192;function qi(t,o,s){if(t.subtreeFlags&Vl)for(t=t.child;t!==null;)Md(t,o,s),t=t.sibling}function Md(t,o,s){switch(t.tag){case 26:qi(t,o,s),t.flags&Vl&&t.memoizedState!==null&&tv(s,On,t.memoizedState,t.memoizedProps);break;case 5:qi(t,o,s);break;case 3:case 4:var u=On;On=ea(t.stateNode.containerInfo),qi(t,o,s),On=u;break;case 22:t.memoizedState===null&&(u=t.alternate,u!==null&&u.memoizedState!==null?(u=Vl,Vl=16777216,qi(t,o,s),Vl=u):qi(t,o,s));break;default:qi(t,o,s)}}function Nd(t){var o=t.alternate;if(o!==null&&(t=o.child,t!==null)){o.child=null;do o=t.sibling,t.sibling=null,t=o;while(t!==null)}}function Bl(t){var o=t.deletions;if((t.flags&16)!==0){if(o!==null)for(var s=0;s<o.length;s++){var u=o[s];nn=u,Id(u,t)}Nd(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Rd(t),t=t.sibling}function Rd(t){switch(t.tag){case 0:case 11:case 15:Bl(t),t.flags&2048&&Uo(9,t,t.return);break;case 3:Bl(t);break;case 12:Bl(t);break;case 22:var o=t.stateNode;t.memoizedState!==null&&o._visibility&2&&(t.return===null||t.return.tag!==13)?(o._visibility&=-3,Hs(t)):Bl(t);break;default:Bl(t)}}function Hs(t){var o=t.deletions;if((t.flags&16)!==0){if(o!==null)for(var s=0;s<o.length;s++){var u=o[s];nn=u,Id(u,t)}Nd(t)}for(t=t.child;t!==null;){switch(o=t,o.tag){case 0:case 11:case 15:Uo(8,o,o.return),Hs(o);break;case 22:s=o.stateNode,s._visibility&2&&(s._visibility&=-3,Hs(o));break;default:Hs(o)}t=t.sibling}}function Id(t,o){for(;nn!==null;){var s=nn;switch(s.tag){case 0:case 11:case 15:Uo(8,s,o);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var u=s.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:Cl(s.memoizedState.cache)}if(u=s.child,u!==null)u.return=s,nn=u;else e:for(s=t;nn!==null;){u=nn;var d=u.sibling,p=u.return;if(Td(u),u===s){nn=null;break e}if(d!==null){d.return=p,nn=d;break e}nn=p}}}var gy={getCacheForType:function(t){var o=ln(Kt),s=o.data.get(t);return s===void 0&&(s=t(),o.data.set(t,s)),s},cacheSignal:function(){return ln(Kt).controller.signal}},yy=typeof WeakMap=="function"?WeakMap:Map,Et=0,wt=null,et=null,it=0,_t=0,Rn=null,Lo=!1,Pi=!1,Xr=!1,yo=0,Ot=0,Vo=0,ci=0,Qr=0,In=0,Gi=0,ql=null,Sn=null,Zr=!1,zs=0,wd=0,Os=1/0,Fs=null,Bo=null,jt=0,qo=null,Hi=null,vo=0,Wr=0,jr=null,Dd=null,Pl=0,eu=null;function wn(){return(Et&2)!==0&&it!==0?it&-it:L.T!==null?su():ll()}function bd(){if(In===0)if((it&536870912)===0||at){var t=ut;ut<<=1,(ut&3932160)===0&&(ut=262144),In=t}else In=536870912;return t=Mn.current,t!==null&&(t.flags|=32),In}function En(t,o,s){(t===wt&&(_t===2||_t===9)||t.cancelPendingCommit!==null)&&(zi(t,0),Po(t,it,In,!1)),St(t,s),((Et&2)===0||t!==wt)&&(t===wt&&((Et&2)===0&&(ci|=s),Ot===4&&Po(t,it,In,!1)),Qn(t))}function kd(t,o,s){if((Et&6)!==0)throw Error(l(327));var u=!s&&(o&127)===0&&(o&t.expiredLanes)===0||Ft(t,o),d=u?Cy(t,o):nu(t,o,!0),p=u;do{if(d===0){Pi&&!u&&Po(t,o,0,!1);break}else{if(s=t.current.alternate,p&&!vy(s)){d=nu(t,o,!1),p=!1;continue}if(d===2){if(p=o,t.errorRecoveryDisabledLanes&p)var T=0;else T=t.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){o=T;e:{var A=t;d=ql;var _=A.current.memoizedState.isDehydrated;if(_&&(zi(A,T).flags|=256),T=nu(A,T,!1),T!==2){if(Xr&&!_){A.errorRecoveryDisabledLanes|=p,ci|=p,d=4;break e}p=Sn,Sn=d,p!==null&&(Sn===null?Sn=p:Sn.push.apply(Sn,p))}d=T}if(p=!1,d!==2)continue}}if(d===1){zi(t,0),Po(t,o,0,!0);break}e:{switch(u=t,p=d,p){case 0:case 1:throw Error(l(345));case 4:if((o&4194048)!==o)break;case 6:Po(u,o,In,!Lo);break e;case 2:Sn=null;break;case 3:case 5:break;default:throw Error(l(329))}if((o&62914560)===o&&(d=zs+300-Le(),10<d)){if(Po(u,o,In,!Lo),$t(u,0,!0)!==0)break e;vo=o,u.timeoutHandle=cp(Ud.bind(null,u,s,Sn,Fs,Zr,o,In,ci,Gi,Lo,p,"Throttled",-0,0),d);break e}Ud(u,s,Sn,Fs,Zr,o,In,ci,Gi,Lo,p,null,-0,0)}}break}while(!0);Qn(t)}function Ud(t,o,s,u,d,p,T,A,_,k,J,X,B,H){if(t.timeoutHandle=-1,X=o.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:no},Md(o,p,X);var ge=(p&62914560)===p?zs-Le():(p&4194048)===p?wd-Le():0;if(ge=nv(X,ge),ge!==null){vo=p,t.cancelPendingCommit=ge(zd.bind(null,t,o,p,s,u,d,T,A,_,J,X,null,B,H)),Po(t,p,T,!k);return}}zd(t,o,p,s,u,d,T,A,_)}function vy(t){for(var o=t;;){var s=o.tag;if((s===0||s===11||s===15)&&o.flags&16384&&(s=o.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var u=0;u<s.length;u++){var d=s[u],p=d.getSnapshot;d=d.value;try{if(!_n(p(),d))return!1}catch{return!1}}if(s=o.child,o.subtreeFlags&16384&&s!==null)s.return=o,o=s;else{if(o===t)break;for(;o.sibling===null;){if(o.return===null||o.return===t)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Po(t,o,s,u){o&=~Qr,o&=~ci,t.suspendedLanes|=o,t.pingedLanes&=~o,u&&(t.warmLanes|=o),u=t.expirationTimes;for(var d=o;0<d;){var p=31-Te(d),T=1<<p;u[p]=-1,d&=~T}s!==0&&un(t,s,o)}function Js(){return(Et&6)===0?(Gl(0),!1):!0}function tu(){if(et!==null){if(_t===0)var t=et.return;else t=et,so=ti=null,yr(t),bi=null,El=0,t=et;for(;t!==null;)fd(t.alternate,t),t=t.return;et=null}}function zi(t,o){var s=t.timeoutHandle;s!==-1&&(t.timeoutHandle=-1,qy(s)),s=t.cancelPendingCommit,s!==null&&(t.cancelPendingCommit=null,s()),vo=0,tu(),wt=t,et=s=io(t.current,null),it=o,_t=0,Rn=null,Lo=!1,Pi=Ft(t,o),Xr=!1,Gi=In=Qr=ci=Vo=Ot=0,Sn=ql=null,Zr=!1,(o&8)!==0&&(o|=o&32);var u=t.entangledLanes;if(u!==0)for(t=t.entanglements,u&=o;0<u;){var d=31-Te(u),p=1<<d;o|=t[d],u&=~p}return yo=o,ds(),s}function Ld(t,o){Je=null,L.H=wl,o===Di||o===Cs?(o=Qc(),_t=3):o===lr?(o=Qc(),_t=4):_t=o===kr?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Rn=o,et===null&&(Ot=1,Us(t,kn(o,t.current)))}function Vd(){var t=Mn.current;return t===null?!0:(it&4194048)===it?Bn===null:(it&62914560)===it||(it&536870912)!==0?t===Bn:!1}function Bd(){var t=L.H;return L.H=wl,t===null?wl:t}function qd(){var t=L.A;return L.A=gy,t}function Ys(){Ot=4,Lo||(it&4194048)!==it&&Mn.current!==null||(Pi=!0),(Vo&134217727)===0&&(ci&134217727)===0||wt===null||Po(wt,it,In,!1)}function nu(t,o,s){var u=Et;Et|=2;var d=Bd(),p=qd();(wt!==t||it!==o)&&(Fs=null,zi(t,o)),o=!1;var T=Ot;e:do try{if(_t!==0&&et!==null){var A=et,_=Rn;switch(_t){case 8:tu(),T=6;break e;case 3:case 2:case 9:case 6:Mn.current===null&&(o=!0);var k=_t;if(_t=0,Rn=null,Oi(t,A,_,k),s&&Pi){T=0;break e}break;default:k=_t,_t=0,Rn=null,Oi(t,A,_,k)}}Ty(),T=Ot;break}catch(J){Ld(t,J)}while(!0);return o&&t.shellSuspendCounter++,so=ti=null,Et=u,L.H=d,L.A=p,et===null&&(wt=null,it=0,ds()),T}function Ty(){for(;et!==null;)Pd(et)}function Cy(t,o){var s=Et;Et|=2;var u=Bd(),d=qd();wt!==t||it!==o?(Fs=null,Os=Le()+500,zi(t,o)):Pi=Ft(t,o);e:do try{if(_t!==0&&et!==null){o=et;var p=Rn;t:switch(_t){case 1:_t=0,Rn=null,Oi(t,o,p,1);break;case 2:case 9:if(Kc(p)){_t=0,Rn=null,Gd(o);break}o=function(){_t!==2&&_t!==9||wt!==t||(_t=7),Qn(t)},p.then(o,o);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:Kc(p)?(_t=0,Rn=null,Gd(o)):(_t=0,Rn=null,Oi(t,o,p,7));break;case 5:var T=null;switch(et.tag){case 26:T=et.memoizedState;case 5:case 27:var A=et;if(T?xp(T):A.stateNode.complete){_t=0,Rn=null;var _=A.sibling;if(_!==null)et=_;else{var k=A.return;k!==null?(et=k,$s(k)):et=null}break t}}_t=0,Rn=null,Oi(t,o,p,5);break;case 6:_t=0,Rn=null,Oi(t,o,p,6);break;case 8:tu(),Ot=6;break e;default:throw Error(l(462))}}Sy();break}catch(J){Ld(t,J)}while(!0);return so=ti=null,L.H=u,L.A=d,Et=s,et!==null?0:(wt=null,it=0,ds(),Ot)}function Sy(){for(;et!==null&&!Ue();)Pd(et)}function Pd(t){var o=ud(t.alternate,t,yo);t.memoizedProps=t.pendingProps,o===null?$s(t):et=o}function Gd(t){var o=t,s=o.alternate;switch(o.tag){case 15:case 0:o=od(s,o,o.pendingProps,o.type,void 0,it);break;case 11:o=od(s,o,o.pendingProps,o.type.render,o.ref,it);break;case 5:yr(o);default:fd(s,o),o=et=Bc(o,yo),o=ud(s,o,yo)}t.memoizedProps=t.pendingProps,o===null?$s(t):et=o}function Oi(t,o,s,u){so=ti=null,yr(o),bi=null,El=0;var d=o.return;try{if(uy(t,d,o,s,it)){Ot=1,Us(t,kn(s,t.current)),et=null;return}}catch(p){if(d!==null)throw et=d,p;Ot=1,Us(t,kn(s,t.current)),et=null;return}o.flags&32768?(at||u===1?t=!0:Pi||(it&536870912)!==0?t=!1:(Lo=t=!0,(u===2||u===9||u===3||u===6)&&(u=Mn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Hd(o,t)):$s(o)}function $s(t){var o=t;do{if((o.flags&32768)!==0){Hd(o,Lo);return}t=o.return;var s=dy(o.alternate,o,yo);if(s!==null){et=s;return}if(o=o.sibling,o!==null){et=o;return}et=o=t}while(o!==null);Ot===0&&(Ot=5)}function Hd(t,o){do{var s=py(t.alternate,t);if(s!==null){s.flags&=32767,et=s;return}if(s=t.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!o&&(t=t.sibling,t!==null)){et=t;return}et=t=s}while(t!==null);Ot=6,et=null}function zd(t,o,s,u,d,p,T,A,_){t.cancelPendingCommit=null;do Ks();while(jt!==0);if((Et&6)!==0)throw Error(l(327));if(o!==null){if(o===t.current)throw Error(l(177));if(p=o.lanes|o.childLanes,p|=Fa,hn(t,s,p,T,A,_),t===wt&&(et=wt=null,it=0),Hi=o,qo=t,vo=s,Wr=p,jr=d,Dd=u,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,xy(dt,function(){return $d(),null})):(t.callbackNode=null,t.callbackPriority=0),u=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||u){u=L.T,L.T=null,d=ie.p,ie.p=2,T=Et,Et|=4;try{my(t,o,s)}finally{Et=T,ie.p=d,L.T=u}}jt=1,Od(),Fd(),Jd()}}function Od(){if(jt===1){jt=0;var t=qo,o=Hi,s=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||s){s=L.T,L.T=null;var u=ie.p;ie.p=2;var d=Et;Et|=4;try{Ad(o,t);var p=mu,T=Rc(t.containerInfo),A=p.focusedElem,_=p.selectionRange;if(T!==A&&A&&A.ownerDocument&&Nc(A.ownerDocument.documentElement,A)){if(_!==null&&Pa(A)){var k=_.start,J=_.end;if(J===void 0&&(J=k),"selectionStart"in A)A.selectionStart=k,A.selectionEnd=Math.min(J,A.value.length);else{var X=A.ownerDocument||document,B=X&&X.defaultView||window;if(B.getSelection){var H=B.getSelection(),ge=A.textContent.length,Ie=Math.min(_.start,ge),Rt=_.end===void 0?Ie:Math.min(_.end,ge);!H.extend&&Ie>Rt&&(T=Rt,Rt=Ie,Ie=T);var D=Mc(A,Ie),N=Mc(A,Rt);if(D&&N&&(H.rangeCount!==1||H.anchorNode!==D.node||H.anchorOffset!==D.offset||H.focusNode!==N.node||H.focusOffset!==N.offset)){var b=X.createRange();b.setStart(D.node,D.offset),H.removeAllRanges(),Ie>Rt?(H.addRange(b),H.extend(N.node,N.offset)):(b.setEnd(N.node,N.offset),H.addRange(b))}}}}for(X=[],H=A;H=H.parentNode;)H.nodeType===1&&X.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<X.length;A++){var K=X[A];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}sa=!!pu,mu=pu=null}finally{Et=d,ie.p=u,L.T=s}}t.current=o,jt=2}}function Fd(){if(jt===2){jt=0;var t=qo,o=Hi,s=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||s){s=L.T,L.T=null;var u=ie.p;ie.p=2;var d=Et;Et|=4;try{vd(t,o.alternate,o)}finally{Et=d,ie.p=u,L.T=s}}jt=3}}function Jd(){if(jt===4||jt===3){jt=0,Ke();var t=qo,o=Hi,s=vo,u=Dd;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?jt=5:(jt=0,Hi=qo=null,Yd(t,t.pendingLanes));var d=t.pendingLanes;if(d===0&&(Bo=null),hi(s),o=o.stateNode,Oe&&typeof Oe.onCommitFiberRoot=="function")try{Oe.onCommitFiberRoot(we,o,void 0,(o.current.flags&128)===128)}catch{}if(u!==null){o=L.T,d=ie.p,ie.p=2,L.T=null;try{for(var p=t.onRecoverableError,T=0;T<u.length;T++){var A=u[T];p(A.value,{componentStack:A.stack})}}finally{L.T=o,ie.p=d}}(vo&3)!==0&&Ks(),Qn(t),d=t.pendingLanes,(s&261930)!==0&&(d&42)!==0?t===eu?Pl++:(Pl=0,eu=t):Pl=0,Gl(0)}}function Yd(t,o){(t.pooledCacheLanes&=o)===0&&(o=t.pooledCache,o!=null&&(t.pooledCache=null,Cl(o)))}function Ks(){return Od(),Fd(),Jd(),$d()}function $d(){if(jt!==5)return!1;var t=qo,o=Wr;Wr=0;var s=hi(vo),u=L.T,d=ie.p;try{ie.p=32>s?32:s,L.T=null,s=jr,jr=null;var p=qo,T=vo;if(jt=0,Hi=qo=null,vo=0,(Et&6)!==0)throw Error(l(331));var A=Et;if(Et|=4,Rd(p.current),xd(p,p.current,T,s),Et=A,Gl(0,!1),Oe&&typeof Oe.onPostCommitFiberRoot=="function")try{Oe.onPostCommitFiberRoot(we,p)}catch{}return!0}finally{ie.p=d,L.T=u,Yd(t,o)}}function Kd(t,o,s){o=kn(s,o),o=br(t.stateNode,o,2),t=Do(t,o,2),t!==null&&(St(t,2),Qn(t))}function xt(t,o,s){if(t.tag===3)Kd(t,t,s);else for(;o!==null;){if(o.tag===3){Kd(o,t,s);break}else if(o.tag===1){var u=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Bo===null||!Bo.has(u))){t=kn(s,t),s=Xf(2),u=Do(o,s,2),u!==null&&(Qf(s,u,o,t),St(u,2),Qn(u));break}}o=o.return}}function ou(t,o,s){var u=t.pingCache;if(u===null){u=t.pingCache=new yy;var d=new Set;u.set(o,d)}else d=u.get(o),d===void 0&&(d=new Set,u.set(o,d));d.has(s)||(Xr=!0,d.add(s),t=Ey.bind(null,t,o,s),o.then(t,t))}function Ey(t,o,s){var u=t.pingCache;u!==null&&u.delete(o),t.pingedLanes|=t.suspendedLanes&s,t.warmLanes&=~s,wt===t&&(it&s)===s&&(Ot===4||Ot===3&&(it&62914560)===it&&300>Le()-zs?(Et&2)===0&&zi(t,0):Qr|=s,Gi===it&&(Gi=0)),Qn(t)}function Xd(t,o){o===0&&(o=mn()),t=Wo(t,o),t!==null&&(St(t,o),Qn(t))}function Ay(t){var o=t.memoizedState,s=0;o!==null&&(s=o.retryLane),Xd(t,s)}function _y(t,o){var s=0;switch(t.tag){case 31:case 13:var u=t.stateNode,d=t.memoizedState;d!==null&&(s=d.retryLane);break;case 19:u=t.stateNode;break;case 22:u=t.stateNode._retryCache;break;default:throw Error(l(314))}u!==null&&u.delete(o),Xd(t,s)}function xy(t,o){return ke(t,o)}var Xs=null,Fi=null,iu=!1,Qs=!1,lu=!1,Go=0;function Qn(t){t!==Fi&&t.next===null&&(Fi===null?Xs=Fi=t:Fi=Fi.next=t),Qs=!0,iu||(iu=!0,Ny())}function Gl(t,o){if(!lu&&Qs){lu=!0;do for(var s=!1,u=Xs;u!==null;){if(t!==0){var d=u.pendingLanes;if(d===0)var p=0;else{var T=u.suspendedLanes,A=u.pingedLanes;p=(1<<31-Te(42|t)+1)-1,p&=d&~(T&~A),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(s=!0,jd(u,p))}else p=it,p=$t(u,u===wt?p:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(p&3)===0||Ft(u,p)||(s=!0,jd(u,p));u=u.next}while(s);lu=!1}}function My(){Qd()}function Qd(){Qs=iu=!1;var t=0;Go!==0&&By()&&(t=Go);for(var o=Le(),s=null,u=Xs;u!==null;){var d=u.next,p=Zd(u,o);p===0?(u.next=null,s===null?Xs=d:s.next=d,d===null&&(Fi=s)):(s=u,(t!==0||(p&3)!==0)&&(Qs=!0)),u=d}jt!==0&&jt!==5||Gl(t),Go!==0&&(Go=0)}function Zd(t,o){for(var s=t.suspendedLanes,u=t.pingedLanes,d=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var T=31-Te(p),A=1<<T,_=d[T];_===-1?((A&s)===0||(A&u)!==0)&&(d[T]=pn(A,o)):_<=o&&(t.expiredLanes|=A),p&=~A}if(o=wt,s=it,s=$t(t,t===o?s:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u=t.callbackNode,s===0||t===o&&(_t===2||_t===9)||t.cancelPendingCommit!==null)return u!==null&&u!==null&&st(u),t.callbackNode=null,t.callbackPriority=0;if((s&3)===0||Ft(t,s)){if(o=s&-s,o===t.callbackPriority)return o;switch(u!==null&&st(u),hi(s)){case 2:case 8:s=Pe;break;case 32:s=dt;break;case 268435456:s=pt;break;default:s=dt}return u=Wd.bind(null,t),s=ke(s,u),t.callbackPriority=o,t.callbackNode=s,o}return u!==null&&u!==null&&st(u),t.callbackPriority=2,t.callbackNode=null,2}function Wd(t,o){if(jt!==0&&jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var s=t.callbackNode;if(Ks()&&t.callbackNode!==s)return null;var u=it;return u=$t(t,t===wt?u:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),u===0?null:(kd(t,u,o),Zd(t,Le()),t.callbackNode!=null&&t.callbackNode===s?Wd.bind(null,t):null)}function jd(t,o){if(Ks())return null;kd(t,o,!0)}function Ny(){Py(function(){(Et&6)!==0?ke(Ae,My):Qd()})}function su(){if(Go===0){var t=Ii;t===0&&(t=Ct,Ct<<=1,(Ct&261888)===0&&(Ct=256)),Go=t}return Go}function ep(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:is(""+t)}function tp(t,o){var s=o.ownerDocument.createElement("input");return s.name=o.name,s.value=o.value,t.id&&s.setAttribute("form",t.id),o.parentNode.insertBefore(s,o),t=new FormData(t),s.parentNode.removeChild(s),t}function Ry(t,o,s,u,d){if(o==="submit"&&s&&s.stateNode===d){var p=ep((d[cn]||null).action),T=u.submitter;T&&(o=(o=T[cn]||null)?ep(o.formAction):T.getAttribute("formAction"),o!==null&&(p=o,T=null));var A=new rs("action","action",null,u,d);t.push({event:A,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Go!==0){var _=T?tp(d,T):new FormData(d);Mr(s,{pending:!0,data:_,method:d.method,action:p},null,_)}}else typeof p=="function"&&(A.preventDefault(),_=T?tp(d,T):new FormData(d),Mr(s,{pending:!0,data:_,method:d.method,action:p},p,_))},currentTarget:d}]})}}for(var au=0;au<Oa.length;au++){var ru=Oa[au],Iy=ru.toLowerCase(),wy=ru[0].toUpperCase()+ru.slice(1);zn(Iy,"on"+wy)}zn(Dc,"onAnimationEnd"),zn(bc,"onAnimationIteration"),zn(kc,"onAnimationStart"),zn("dblclick","onDoubleClick"),zn("focusin","onFocus"),zn("focusout","onBlur"),zn(Yg,"onTransitionRun"),zn($g,"onTransitionStart"),zn(Kg,"onTransitionCancel"),zn(Uc,"onTransitionEnd"),to("onMouseEnter",["mouseout","mouseover"]),to("onMouseLeave",["mouseout","mouseover"]),to("onPointerEnter",["pointerout","pointerover"]),to("onPointerLeave",["pointerout","pointerover"]),eo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),eo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),eo("onBeforeInput",["compositionend","keypress","textInput","paste"]),eo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),eo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),eo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hl));function np(t,o){o=(o&4)!==0;for(var s=0;s<t.length;s++){var u=t[s],d=u.event;u=u.listeners;e:{var p=void 0;if(o)for(var T=u.length-1;0<=T;T--){var A=u[T],_=A.instance,k=A.currentTarget;if(A=A.listener,_!==p&&d.isPropagationStopped())break e;p=A,d.currentTarget=k;try{p(d)}catch(J){fs(J)}d.currentTarget=null,p=_}else for(T=0;T<u.length;T++){if(A=u[T],_=A.instance,k=A.currentTarget,A=A.listener,_!==p&&d.isPropagationStopped())break e;p=A,d.currentTarget=k;try{p(d)}catch(J){fs(J)}d.currentTarget=null,p=_}}}}function tt(t,o){var s=o[al];s===void 0&&(s=o[al]=new Set);var u=t+"__bubble";s.has(u)||(op(o,t,2,!1),s.add(u))}function uu(t,o,s){var u=0;o&&(u|=4),op(s,t,u,o)}var Zs="_reactListening"+Math.random().toString(36).slice(2);function cu(t){if(!t[Zs]){t[Zs]=!0,jn.forEach(function(s){s!=="selectionchange"&&(Dy.has(s)||uu(s,!1,t),uu(s,!0,t))});var o=t.nodeType===9?t:t.ownerDocument;o===null||o[Zs]||(o[Zs]=!0,uu("selectionchange",!1,o))}}function op(t,o,s,u){switch(bp(o)){case 2:var d=lv;break;case 8:d=sv;break;default:d=xu}s=d.bind(null,o,s,t),d=void 0,!wa||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(d=!0),u?d!==void 0?t.addEventListener(o,s,{capture:!0,passive:d}):t.addEventListener(o,s,!0):d!==void 0?t.addEventListener(o,s,{passive:d}):t.addEventListener(o,s,!1)}function fu(t,o,s,u,d){var p=u;if((o&1)===0&&(o&2)===0&&u!==null)e:for(;;){if(u===null)return;var T=u.tag;if(T===3||T===4){var A=u.stateNode.containerInfo;if(A===d)break;if(T===4)for(T=u.return;T!==null;){var _=T.tag;if((_===3||_===4)&&T.stateNode.containerInfo===d)return;T=T.return}for(;A!==null;){if(T=Wn(A),T===null)return;if(_=T.tag,_===5||_===6||_===26||_===27){u=p=T;continue e}A=A.parentNode}}u=u.return}ac(function(){var k=p,J=Ra(s),X=[];e:{var B=Lc.get(t);if(B!==void 0){var H=rs,ge=t;switch(t){case"keypress":if(ss(s)===0)break e;case"keydown":case"keyup":H=_g;break;case"focusin":ge="focus",H=Ua;break;case"focusout":ge="blur",H=Ua;break;case"beforeblur":case"afterblur":H=Ua;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":H=cc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":H=dg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":H=Ng;break;case Dc:case bc:case kc:H=hg;break;case Uc:H=Ig;break;case"scroll":case"scrollend":H=cg;break;case"wheel":H=Dg;break;case"copy":case"cut":case"paste":H=yg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":H=dc;break;case"toggle":case"beforetoggle":H=kg}var Ie=(o&4)!==0,Rt=!Ie&&(t==="scroll"||t==="scrollend"),D=Ie?B!==null?B+"Capture":null:B;Ie=[];for(var N=k,b;N!==null;){var K=N;if(b=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||b===null||D===null||(K=ul(N,D),K!=null&&Ie.push(zl(N,K,b))),Rt)break;N=N.return}0<Ie.length&&(B=new H(B,ge,null,s,J),X.push({event:B,listeners:Ie}))}}if((o&7)===0){e:{if(B=t==="mouseover"||t==="pointerover",H=t==="mouseout"||t==="pointerout",B&&s!==Na&&(ge=s.relatedTarget||s.fromElement)&&(Wn(ge)||ge[So]))break e;if((H||B)&&(B=J.window===J?J:(B=J.ownerDocument)?B.defaultView||B.parentWindow:window,H?(ge=s.relatedTarget||s.toElement,H=k,ge=ge?Wn(ge):null,ge!==null&&(Rt=f(ge),Ie=ge.tag,ge!==Rt||Ie!==5&&Ie!==27&&Ie!==6)&&(ge=null)):(H=null,ge=k),H!==ge)){if(Ie=cc,K="onMouseLeave",D="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(Ie=dc,K="onPointerLeave",D="onPointerEnter",N="pointer"),Rt=H==null?B:Ao(H),b=ge==null?B:Ao(ge),B=new Ie(K,N+"leave",H,s,J),B.target=Rt,B.relatedTarget=b,K=null,Wn(J)===k&&(Ie=new Ie(D,N+"enter",ge,s,J),Ie.target=b,Ie.relatedTarget=Rt,K=Ie),Rt=K,H&&ge)t:{for(Ie=by,D=H,N=ge,b=0,K=D;K;K=Ie(K))b++;K=0;for(var Re=N;Re;Re=Ie(Re))K++;for(;0<b-K;)D=Ie(D),b--;for(;0<K-b;)N=Ie(N),K--;for(;b--;){if(D===N||N!==null&&D===N.alternate){Ie=D;break t}D=Ie(D),N=Ie(N)}Ie=null}else Ie=null;H!==null&&ip(X,B,H,Ie,!1),ge!==null&&Rt!==null&&ip(X,Rt,ge,Ie,!0)}}e:{if(B=k?Ao(k):window,H=B.nodeName&&B.nodeName.toLowerCase(),H==="select"||H==="input"&&B.type==="file")var mt=Cc;else if(vc(B))if(Sc)mt=Og;else{mt=Hg;var Ee=Gg}else H=B.nodeName,!H||H.toLowerCase()!=="input"||B.type!=="checkbox"&&B.type!=="radio"?k&&Ma(k.elementType)&&(mt=Cc):mt=zg;if(mt&&(mt=mt(t,k))){Tc(X,mt,s,J);break e}Ee&&Ee(t,B,k),t==="focusout"&&k&&B.type==="number"&&k.memoizedProps.value!=null&&je(B,"number",B.value)}switch(Ee=k?Ao(k):window,t){case"focusin":(vc(Ee)||Ee.contentEditable==="true")&&(Si=Ee,Ga=k,yl=null);break;case"focusout":yl=Ga=Si=null;break;case"mousedown":Ha=!0;break;case"contextmenu":case"mouseup":case"dragend":Ha=!1,Ic(X,s,J);break;case"selectionchange":if(Jg)break;case"keydown":case"keyup":Ic(X,s,J)}var $e;if(Va)e:{switch(t){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Ci?gc(t,s)&&(lt="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(lt="onCompositionStart");lt&&(pc&&s.locale!=="ko"&&(Ci||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Ci&&($e=rc()):(_o=J,Da="value"in _o?_o.value:_o.textContent,Ci=!0)),Ee=Ws(k,lt),0<Ee.length&&(lt=new fc(lt,t,null,s,J),X.push({event:lt,listeners:Ee}),$e?lt.data=$e:($e=yc(s),$e!==null&&(lt.data=$e)))),($e=Lg?Vg(t,s):Bg(t,s))&&(lt=Ws(k,"onBeforeInput"),0<lt.length&&(Ee=new fc("onBeforeInput","beforeinput",null,s,J),X.push({event:Ee,listeners:lt}),Ee.data=$e)),Ry(X,t,k,s,J)}np(X,o)})}function zl(t,o,s){return{instance:t,listener:o,currentTarget:s}}function Ws(t,o){for(var s=o+"Capture",u=[];t!==null;){var d=t,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=ul(t,s),d!=null&&u.unshift(zl(t,d,p)),d=ul(t,o),d!=null&&u.push(zl(t,d,p))),t.tag===3)return u;t=t.return}return[]}function by(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ip(t,o,s,u,d){for(var p=o._reactName,T=[];s!==null&&s!==u;){var A=s,_=A.alternate,k=A.stateNode;if(A=A.tag,_!==null&&_===u)break;A!==5&&A!==26&&A!==27||k===null||(_=k,d?(k=ul(s,p),k!=null&&T.unshift(zl(s,k,_))):d||(k=ul(s,p),k!=null&&T.push(zl(s,k,_)))),s=s.return}T.length!==0&&t.push({event:o,listeners:T})}var ky=/\r\n?/g,Uy=/\u0000|\uFFFD/g;function lp(t){return(typeof t=="string"?t:""+t).replace(ky,`
`).replace(Uy,"")}function sp(t,o){return o=lp(o),lp(t)===o}function Nt(t,o,s,u,d,p){switch(s){case"children":typeof u=="string"?o==="body"||o==="textarea"&&u===""||Ht(t,u):(typeof u=="number"||typeof u=="bigint")&&o!=="body"&&Ht(t,""+u);break;case"className":G(t,"class",u);break;case"tabIndex":G(t,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":G(t,s,u);break;case"style":rl(t,u,p);break;case"data":if(o!=="object"){G(t,"data",u);break}case"src":case"href":if(u===""&&(o!=="a"||s!=="href")){t.removeAttribute(s);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(s);break}u=is(""+u),t.setAttribute(s,u);break;case"action":case"formAction":if(typeof u=="function"){t.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(s==="formAction"?(o!=="input"&&Nt(t,o,"name",d.name,d,null),Nt(t,o,"formEncType",d.formEncType,d,null),Nt(t,o,"formMethod",d.formMethod,d,null),Nt(t,o,"formTarget",d.formTarget,d,null)):(Nt(t,o,"encType",d.encType,d,null),Nt(t,o,"method",d.method,d,null),Nt(t,o,"target",d.target,d,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){t.removeAttribute(s);break}u=is(""+u),t.setAttribute(s,u);break;case"onClick":u!=null&&(t.onclick=no);break;case"onScroll":u!=null&&tt("scroll",t);break;case"onScrollEnd":u!=null&&tt("scrollend",t);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(l(61));if(s=u.__html,s!=null){if(d.children!=null)throw Error(l(60));t.innerHTML=s}}break;case"multiple":t.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":t.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){t.removeAttribute("xlink:href");break}s=is(""+u),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,""+u):t.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,""):t.removeAttribute(s);break;case"capture":case"download":u===!0?t.setAttribute(s,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?t.setAttribute(s,u):t.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?t.setAttribute(s,u):t.removeAttribute(s);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?t.removeAttribute(s):t.setAttribute(s,u);break;case"popover":tt("beforetoggle",t),tt("toggle",t),w(t,"popover",u);break;case"xlinkActuate":V(t,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":V(t,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":V(t,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":V(t,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":V(t,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":V(t,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":V(t,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":V(t,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":V(t,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":w(t,"is",u);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=rg.get(s)||s,w(t,s,u))}}function du(t,o,s,u,d,p){switch(s){case"style":rl(t,u,p);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(l(61));if(s=u.__html,s!=null){if(d.children!=null)throw Error(l(60));t.innerHTML=s}}break;case"children":typeof u=="string"?Ht(t,u):(typeof u=="number"||typeof u=="bigint")&&Ht(t,""+u);break;case"onScroll":u!=null&&tt("scroll",t);break;case"onScrollEnd":u!=null&&tt("scrollend",t);break;case"onClick":u!=null&&(t.onclick=no);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ko.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(d=s.endsWith("Capture"),o=s.slice(2,d?s.length-7:void 0),p=t[cn]||null,p=p!=null?p[s]:null,typeof p=="function"&&t.removeEventListener(o,p,d),typeof u=="function")){typeof p!="function"&&p!==null&&(s in t?t[s]=null:t.hasAttribute(s)&&t.removeAttribute(s)),t.addEventListener(o,u,d);break e}s in t?t[s]=u:u===!0?t.setAttribute(s,""):w(t,s,u)}}}function an(t,o,s){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",t),tt("load",t);var u=!1,d=!1,p;for(p in s)if(s.hasOwnProperty(p)){var T=s[p];if(T!=null)switch(p){case"src":u=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(l(137,o));default:Nt(t,o,p,T,s,null)}}d&&Nt(t,o,"srcSet",s.srcSet,s,null),u&&Nt(t,o,"src",s.src,s,null);return;case"input":tt("invalid",t);var A=p=T=d=null,_=null,k=null;for(u in s)if(s.hasOwnProperty(u)){var J=s[u];if(J!=null)switch(u){case"name":d=J;break;case"type":T=J;break;case"checked":_=J;break;case"defaultChecked":k=J;break;case"value":p=J;break;case"defaultValue":A=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(l(137,o));break;default:Nt(t,o,u,J,s,null)}}De(t,p,A,_,k,T,d,!1);return;case"select":tt("invalid",t),u=T=p=null;for(d in s)if(s.hasOwnProperty(d)&&(A=s[d],A!=null))switch(d){case"value":p=A;break;case"defaultValue":T=A;break;case"multiple":u=A;default:Nt(t,o,d,A,s,null)}o=p,s=T,t.multiple=!!u,o!=null?Ye(t,!!u,o,!1):s!=null&&Ye(t,!!u,s,!0);return;case"textarea":tt("invalid",t),p=d=u=null;for(T in s)if(s.hasOwnProperty(T)&&(A=s[T],A!=null))switch(T){case"value":u=A;break;case"defaultValue":d=A;break;case"children":p=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(l(91));break;default:Nt(t,o,T,A,s,null)}Gt(t,u,d,p);return;case"option":for(_ in s)if(s.hasOwnProperty(_)&&(u=s[_],u!=null))switch(_){case"selected":t.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:Nt(t,o,_,u,s,null)}return;case"dialog":tt("beforetoggle",t),tt("toggle",t),tt("cancel",t),tt("close",t);break;case"iframe":case"object":tt("load",t);break;case"video":case"audio":for(u=0;u<Hl.length;u++)tt(Hl[u],t);break;case"image":tt("error",t),tt("load",t);break;case"details":tt("toggle",t);break;case"embed":case"source":case"link":tt("error",t),tt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(k in s)if(s.hasOwnProperty(k)&&(u=s[k],u!=null))switch(k){case"children":case"dangerouslySetInnerHTML":throw Error(l(137,o));default:Nt(t,o,k,u,s,null)}return;default:if(Ma(o)){for(J in s)s.hasOwnProperty(J)&&(u=s[J],u!==void 0&&du(t,o,J,u,s,void 0));return}}for(A in s)s.hasOwnProperty(A)&&(u=s[A],u!=null&&Nt(t,o,A,u,s,null))}function Ly(t,o,s,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,T=null,A=null,_=null,k=null,J=null;for(H in s){var X=s[H];if(s.hasOwnProperty(H)&&X!=null)switch(H){case"checked":break;case"value":break;case"defaultValue":_=X;default:u.hasOwnProperty(H)||Nt(t,o,H,null,u,X)}}for(var B in u){var H=u[B];if(X=s[B],u.hasOwnProperty(B)&&(H!=null||X!=null))switch(B){case"type":p=H;break;case"name":d=H;break;case"checked":k=H;break;case"defaultChecked":J=H;break;case"value":T=H;break;case"defaultValue":A=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(l(137,o));break;default:H!==X&&Nt(t,o,B,H,u,X)}}ct(t,T,A,_,k,J,p,d);return;case"select":H=T=A=B=null;for(p in s)if(_=s[p],s.hasOwnProperty(p)&&_!=null)switch(p){case"value":break;case"multiple":H=_;default:u.hasOwnProperty(p)||Nt(t,o,p,null,u,_)}for(d in u)if(p=u[d],_=s[d],u.hasOwnProperty(d)&&(p!=null||_!=null))switch(d){case"value":B=p;break;case"defaultValue":A=p;break;case"multiple":T=p;default:p!==_&&Nt(t,o,d,p,u,_)}o=A,s=T,u=H,B!=null?Ye(t,!!s,B,!1):!!u!=!!s&&(o!=null?Ye(t,!!s,o,!0):Ye(t,!!s,s?[]:"",!1));return;case"textarea":H=B=null;for(A in s)if(d=s[A],s.hasOwnProperty(A)&&d!=null&&!u.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Nt(t,o,A,null,u,d)}for(T in u)if(d=u[T],p=s[T],u.hasOwnProperty(T)&&(d!=null||p!=null))switch(T){case"value":B=d;break;case"defaultValue":H=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(l(91));break;default:d!==p&&Nt(t,o,T,d,u,p)}Ge(t,B,H);return;case"option":for(var ge in s)if(B=s[ge],s.hasOwnProperty(ge)&&B!=null&&!u.hasOwnProperty(ge))switch(ge){case"selected":t.selected=!1;break;default:Nt(t,o,ge,null,u,B)}for(_ in u)if(B=u[_],H=s[_],u.hasOwnProperty(_)&&B!==H&&(B!=null||H!=null))switch(_){case"selected":t.selected=B&&typeof B!="function"&&typeof B!="symbol";break;default:Nt(t,o,_,B,u,H)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in s)B=s[Ie],s.hasOwnProperty(Ie)&&B!=null&&!u.hasOwnProperty(Ie)&&Nt(t,o,Ie,null,u,B);for(k in u)if(B=u[k],H=s[k],u.hasOwnProperty(k)&&B!==H&&(B!=null||H!=null))switch(k){case"children":case"dangerouslySetInnerHTML":if(B!=null)throw Error(l(137,o));break;default:Nt(t,o,k,B,u,H)}return;default:if(Ma(o)){for(var Rt in s)B=s[Rt],s.hasOwnProperty(Rt)&&B!==void 0&&!u.hasOwnProperty(Rt)&&du(t,o,Rt,void 0,u,B);for(J in u)B=u[J],H=s[J],!u.hasOwnProperty(J)||B===H||B===void 0&&H===void 0||du(t,o,J,B,u,H);return}}for(var D in s)B=s[D],s.hasOwnProperty(D)&&B!=null&&!u.hasOwnProperty(D)&&Nt(t,o,D,null,u,B);for(X in u)B=u[X],H=s[X],!u.hasOwnProperty(X)||B===H||B==null&&H==null||Nt(t,o,X,B,u,H)}function ap(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Vy(){if(typeof performance.getEntriesByType=="function"){for(var t=0,o=0,s=performance.getEntriesByType("resource"),u=0;u<s.length;u++){var d=s[u],p=d.transferSize,T=d.initiatorType,A=d.duration;if(p&&A&&ap(T)){for(T=0,A=d.responseEnd,u+=1;u<s.length;u++){var _=s[u],k=_.startTime;if(k>A)break;var J=_.transferSize,X=_.initiatorType;J&&ap(X)&&(_=_.responseEnd,T+=J*(_<A?1:(A-k)/(_-k)))}if(--u,o+=8*(p+T)/(d.duration/1e3),t++,10<t)break}}if(0<t)return o/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var pu=null,mu=null;function js(t){return t.nodeType===9?t:t.ownerDocument}function rp(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function up(t,o){if(t===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&o==="foreignObject"?0:t}function hu(t,o){return t==="textarea"||t==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var gu=null;function By(){var t=window.event;return t&&t.type==="popstate"?t===gu?!1:(gu=t,!0):(gu=null,!1)}var cp=typeof setTimeout=="function"?setTimeout:void 0,qy=typeof clearTimeout=="function"?clearTimeout:void 0,fp=typeof Promise=="function"?Promise:void 0,Py=typeof queueMicrotask=="function"?queueMicrotask:typeof fp<"u"?function(t){return fp.resolve(null).then(t).catch(Gy)}:cp;function Gy(t){setTimeout(function(){throw t})}function Ho(t){return t==="head"}function dp(t,o){var s=o,u=0;do{var d=s.nextSibling;if(t.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"||s==="/&"){if(u===0){t.removeChild(d),Ki(o);return}u--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")u++;else if(s==="html")Ol(t.ownerDocument.documentElement);else if(s==="head"){s=t.ownerDocument.head,Ol(s);for(var p=s.firstChild;p;){var T=p.nextSibling,A=p.nodeName;p[$o]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&p.rel.toLowerCase()==="stylesheet"||s.removeChild(p),p=T}}else s==="body"&&Ol(t.ownerDocument.body);s=d}while(s);Ki(o)}function pp(t,o){var s=t;t=0;do{var u=s.nextSibling;if(s.nodeType===1?o?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(o?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),u&&u.nodeType===8)if(s=u.data,s==="/$"){if(t===0)break;t--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||t++;s=u}while(s)}function yu(t){var o=t.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var s=o;switch(o=o.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":yu(s),yi(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}t.removeChild(s)}}function Hy(t,o,s,u){for(;t.nodeType===1;){var d=s;if(t.nodeName.toLowerCase()!==o.toLowerCase()){if(!u&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(u){if(!t[$o])switch(o){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==d.rel||t.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||t.getAttribute("title")!==(d.title==null?null:d.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(d.src==null?null:d.src)||t.getAttribute("type")!==(d.type==null?null:d.type)||t.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(o==="input"&&t.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=qn(t.nextSibling),t===null)break}return null}function zy(t,o,s){if(o==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=qn(t.nextSibling),t===null))return null;return t}function mp(t,o){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!o||(t=qn(t.nextSibling),t===null))return null;return t}function vu(t){return t.data==="$?"||t.data==="$~"}function Tu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Oy(t,o){var s=t.ownerDocument;if(t.data==="$~")t._reactRetry=o;else if(t.data!=="$?"||s.readyState!=="loading")o();else{var u=function(){o(),s.removeEventListener("DOMContentLoaded",u)};s.addEventListener("DOMContentLoaded",u),t._reactRetry=u}}function qn(t){for(;t!=null;t=t.nextSibling){var o=t.nodeType;if(o===1||o===3)break;if(o===8){if(o=t.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return t}var Cu=null;function hp(t){t=t.nextSibling;for(var o=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"||s==="/&"){if(o===0)return qn(t.nextSibling);o--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||o++}t=t.nextSibling}return null}function gp(t){t=t.previousSibling;for(var o=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(o===0)return t;o--}else s!=="/$"&&s!=="/&"||o++}t=t.previousSibling}return null}function yp(t,o,s){switch(o=js(s),t){case"html":if(t=o.documentElement,!t)throw Error(l(452));return t;case"head":if(t=o.head,!t)throw Error(l(453));return t;case"body":if(t=o.body,!t)throw Error(l(454));return t;default:throw Error(l(451))}}function Ol(t){for(var o=t.attributes;o.length;)t.removeAttributeNode(o[0]);yi(t)}var Pn=new Map,vp=new Set;function ea(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var To=ie.d;ie.d={f:Fy,r:Jy,D:Yy,C:$y,L:Ky,m:Xy,X:Zy,S:Qy,M:Wy};function Fy(){var t=To.f(),o=Js();return t||o}function Jy(t){var o=Eo(t);o!==null&&o.tag===5&&o.type==="form"?Lf(o):To.r(t)}var Ji=typeof document>"u"?null:document;function Tp(t,o,s){var u=Ji;if(u&&typeof o=="string"&&o){var d=Fe(o);d='link[rel="'+t+'"][href="'+d+'"]',typeof s=="string"&&(d+='[crossorigin="'+s+'"]'),vp.has(d)||(vp.add(d),t={rel:t,crossOrigin:s,href:o},u.querySelector(d)===null&&(o=u.createElement("link"),an(o,"link",t),Lt(o),u.head.appendChild(o)))}}function Yy(t){To.D(t),Tp("dns-prefetch",t,null)}function $y(t,o){To.C(t,o),Tp("preconnect",t,o)}function Ky(t,o,s){To.L(t,o,s);var u=Ji;if(u&&t&&o){var d='link[rel="preload"][as="'+Fe(o)+'"]';o==="image"&&s&&s.imageSrcSet?(d+='[imagesrcset="'+Fe(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(d+='[imagesizes="'+Fe(s.imageSizes)+'"]')):d+='[href="'+Fe(t)+'"]';var p=d;switch(o){case"style":p=Yi(t);break;case"script":p=$i(t)}Pn.has(p)||(t=C({rel:"preload",href:o==="image"&&s&&s.imageSrcSet?void 0:t,as:o},s),Pn.set(p,t),u.querySelector(d)!==null||o==="style"&&u.querySelector(Fl(p))||o==="script"&&u.querySelector(Jl(p))||(o=u.createElement("link"),an(o,"link",t),Lt(o),u.head.appendChild(o)))}}function Xy(t,o){To.m(t,o);var s=Ji;if(s&&t){var u=o&&typeof o.as=="string"?o.as:"script",d='link[rel="modulepreload"][as="'+Fe(u)+'"][href="'+Fe(t)+'"]',p=d;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=$i(t)}if(!Pn.has(p)&&(t=C({rel:"modulepreload",href:t},o),Pn.set(p,t),s.querySelector(d)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Jl(p)))return}u=s.createElement("link"),an(u,"link",t),Lt(u),s.head.appendChild(u)}}}function Qy(t,o,s){To.S(t,o,s);var u=Ji;if(u&&t){var d=tn(u).hoistableStyles,p=Yi(t);o=o||"default";var T=d.get(p);if(!T){var A={loading:0,preload:null};if(T=u.querySelector(Fl(p)))A.loading=5;else{t=C({rel:"stylesheet",href:t,"data-precedence":o},s),(s=Pn.get(p))&&Su(t,s);var _=T=u.createElement("link");Lt(_),an(_,"link",t),_._p=new Promise(function(k,J){_.onload=k,_.onerror=J}),_.addEventListener("load",function(){A.loading|=1}),_.addEventListener("error",function(){A.loading|=2}),A.loading|=4,ta(T,o,u)}T={type:"stylesheet",instance:T,count:1,state:A},d.set(p,T)}}}function Zy(t,o){To.X(t,o);var s=Ji;if(s&&t){var u=tn(s).hoistableScripts,d=$i(t),p=u.get(d);p||(p=s.querySelector(Jl(d)),p||(t=C({src:t,async:!0},o),(o=Pn.get(d))&&Eu(t,o),p=s.createElement("script"),Lt(p),an(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function Wy(t,o){To.M(t,o);var s=Ji;if(s&&t){var u=tn(s).hoistableScripts,d=$i(t),p=u.get(d);p||(p=s.querySelector(Jl(d)),p||(t=C({src:t,async:!0,type:"module"},o),(o=Pn.get(d))&&Eu(t,o),p=s.createElement("script"),Lt(p),an(p,"link",t),s.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},u.set(d,p))}}function Cp(t,o,s,u){var d=(d=ze.current)?ea(d):null;if(!d)throw Error(l(446));switch(t){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(o=Yi(s.href),s=tn(d).hoistableStyles,u=s.get(o),u||(u={type:"style",instance:null,count:0,state:null},s.set(o,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){t=Yi(s.href);var p=tn(d).hoistableStyles,T=p.get(t);if(T||(d=d.ownerDocument||d,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,T),(p=d.querySelector(Fl(t)))&&!p._p&&(T.instance=p,T.state.loading=5),Pn.has(t)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Pn.set(t,s),p||jy(d,t,s,T.state))),o&&u===null)throw Error(l(528,""));return T}if(o&&u!==null)throw Error(l(529,""));return null;case"script":return o=s.async,s=s.src,typeof s=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=$i(s),s=tn(d).hoistableScripts,u=s.get(o),u||(u={type:"script",instance:null,count:0,state:null},s.set(o,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(l(444,t))}}function Yi(t){return'href="'+Fe(t)+'"'}function Fl(t){return'link[rel="stylesheet"]['+t+"]"}function Sp(t){return C({},t,{"data-precedence":t.precedence,precedence:null})}function jy(t,o,s,u){t.querySelector('link[rel="preload"][as="style"]['+o+"]")?u.loading=1:(o=t.createElement("link"),u.preload=o,o.addEventListener("load",function(){return u.loading|=1}),o.addEventListener("error",function(){return u.loading|=2}),an(o,"link",s),Lt(o),t.head.appendChild(o))}function $i(t){return'[src="'+Fe(t)+'"]'}function Jl(t){return"script[async]"+t}function Ep(t,o,s){if(o.count++,o.instance===null)switch(o.type){case"style":var u=t.querySelector('style[data-href~="'+Fe(s.href)+'"]');if(u)return o.instance=u,Lt(u),u;var d=C({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return u=(t.ownerDocument||t).createElement("style"),Lt(u),an(u,"style",d),ta(u,s.precedence,t),o.instance=u;case"stylesheet":d=Yi(s.href);var p=t.querySelector(Fl(d));if(p)return o.state.loading|=4,o.instance=p,Lt(p),p;u=Sp(s),(d=Pn.get(d))&&Su(u,d),p=(t.ownerDocument||t).createElement("link"),Lt(p);var T=p;return T._p=new Promise(function(A,_){T.onload=A,T.onerror=_}),an(p,"link",u),o.state.loading|=4,ta(p,s.precedence,t),o.instance=p;case"script":return p=$i(s.src),(d=t.querySelector(Jl(p)))?(o.instance=d,Lt(d),d):(u=s,(d=Pn.get(p))&&(u=C({},s),Eu(u,d)),t=t.ownerDocument||t,d=t.createElement("script"),Lt(d),an(d,"link",u),t.head.appendChild(d),o.instance=d);case"void":return null;default:throw Error(l(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(u=o.instance,o.state.loading|=4,ta(u,s.precedence,t));return o.instance}function ta(t,o,s){for(var u=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=u.length?u[u.length-1]:null,p=d,T=0;T<u.length;T++){var A=u[T];if(A.dataset.precedence===o)p=A;else if(p!==d)break}p?p.parentNode.insertBefore(t,p.nextSibling):(o=s.nodeType===9?s.head:s,o.insertBefore(t,o.firstChild))}function Su(t,o){t.crossOrigin==null&&(t.crossOrigin=o.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=o.referrerPolicy),t.title==null&&(t.title=o.title)}function Eu(t,o){t.crossOrigin==null&&(t.crossOrigin=o.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=o.referrerPolicy),t.integrity==null&&(t.integrity=o.integrity)}var na=null;function Ap(t,o,s){if(na===null){var u=new Map,d=na=new Map;d.set(s,u)}else d=na,u=d.get(s),u||(u=new Map,d.set(s,u));if(u.has(t))return u;for(u.set(t,null),s=s.getElementsByTagName(t),d=0;d<s.length;d++){var p=s[d];if(!(p[$o]||p[Wt]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var T=p.getAttribute(o)||"";T=t+T;var A=u.get(T);A?A.push(p):u.set(T,[p])}}return u}function _p(t,o,s){t=t.ownerDocument||t,t.head.insertBefore(s,o==="title"?t.querySelector("head > title"):null)}function ev(t,o,s){if(s===1||o.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return t=o.disabled,typeof o.precedence=="string"&&t==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function xp(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function tv(t,o,s,u){if(s.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var d=Yi(u.href),p=o.querySelector(Fl(d));if(p){o=p._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(t.count++,t=oa.bind(t),o.then(t,t)),s.state.loading|=4,s.instance=p,Lt(p);return}p=o.ownerDocument||o,u=Sp(u),(d=Pn.get(d))&&Su(u,d),p=p.createElement("link"),Lt(p);var T=p;T._p=new Promise(function(A,_){T.onload=A,T.onerror=_}),an(p,"link",u),s.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(s,o),(o=s.state.preload)&&(s.state.loading&3)===0&&(t.count++,s=oa.bind(t),o.addEventListener("load",s),o.addEventListener("error",s))}}var Au=0;function nv(t,o){return t.stylesheets&&t.count===0&&la(t,t.stylesheets),0<t.count||0<t.imgCount?function(s){var u=setTimeout(function(){if(t.stylesheets&&la(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+o);0<t.imgBytes&&Au===0&&(Au=62500*Vy());var d=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&la(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Au?50:800)+o);return t.unsuspend=s,function(){t.unsuspend=null,clearTimeout(u),clearTimeout(d)}}:null}function oa(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)la(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var ia=null;function la(t,o){t.stylesheets=null,t.unsuspend!==null&&(t.count++,ia=new Map,o.forEach(ov,t),ia=null,oa.call(t))}function ov(t,o){if(!(o.state.loading&4)){var s=ia.get(t);if(s)var u=s.get(null);else{s=new Map,ia.set(t,s);for(var d=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var T=d[p];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(s.set(T.dataset.precedence,T),u=T)}u&&s.set(null,u)}d=o.instance,T=d.getAttribute("data-precedence"),p=s.get(T)||u,p===u&&s.set(null,d),s.set(T,d),this.count++,u=oa.bind(this),d.addEventListener("load",u),d.addEventListener("error",u),p?p.parentNode.insertBefore(d,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(d,t.firstChild)),o.state.loading|=4}}var Yl={$$typeof:Z,Provider:null,Consumer:null,_currentValue:xe,_currentValue2:xe,_threadCount:0};function iv(t,o,s,u,d,p,T,A,_){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=en(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=en(0),this.hiddenUpdates=en(null),this.identifierPrefix=u,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_,this.incompleteTransitions=new Map}function Mp(t,o,s,u,d,p,T,A,_,k,J,X){return t=new iv(t,o,s,T,_,k,J,X,A),o=1,p===!0&&(o|=24),p=xn(3,null,null,o),t.current=p,p.stateNode=t,o=nr(),o.refCount++,t.pooledCache=o,o.refCount++,p.memoizedState={element:u,isDehydrated:s,cache:o},sr(p),t}function Np(t){return t?(t=_i,t):_i}function Rp(t,o,s,u,d,p){d=Np(d),u.context===null?u.context=d:u.pendingContext=d,u=wo(o),u.payload={element:s},p=p===void 0?null:p,p!==null&&(u.callback=p),s=Do(t,u,o),s!==null&&(En(s,t,o),_l(s,t,o))}function Ip(t,o){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<o?s:o}}function _u(t,o){Ip(t,o),(t=t.alternate)&&Ip(t,o)}function wp(t){if(t.tag===13||t.tag===31){var o=Wo(t,67108864);o!==null&&En(o,t,67108864),_u(t,67108864)}}function Dp(t){if(t.tag===13||t.tag===31){var o=wn();o=mi(o);var s=Wo(t,o);s!==null&&En(s,t,o),_u(t,o)}}var sa=!0;function lv(t,o,s,u){var d=L.T;L.T=null;var p=ie.p;try{ie.p=2,xu(t,o,s,u)}finally{ie.p=p,L.T=d}}function sv(t,o,s,u){var d=L.T;L.T=null;var p=ie.p;try{ie.p=8,xu(t,o,s,u)}finally{ie.p=p,L.T=d}}function xu(t,o,s,u){if(sa){var d=Mu(u);if(d===null)fu(t,o,u,aa,s),kp(t,u);else if(rv(d,t,o,s,u))u.stopPropagation();else if(kp(t,u),o&4&&-1<av.indexOf(t)){for(;d!==null;){var p=Eo(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var T=At(p.pendingLanes);if(T!==0){var A=p;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var _=1<<31-Te(T);A.entanglements[1]|=_,T&=~_}Qn(p),(Et&6)===0&&(Os=Le()+500,Gl(0))}}break;case 31:case 13:A=Wo(p,2),A!==null&&En(A,p,2),Js(),_u(p,2)}if(p=Mu(u),p===null&&fu(t,o,u,aa,s),p===d)break;d=p}d!==null&&u.stopPropagation()}else fu(t,o,u,null,s)}}function Mu(t){return t=Ra(t),Nu(t)}var aa=null;function Nu(t){if(aa=null,t=Wn(t),t!==null){var o=f(t);if(o===null)t=null;else{var s=o.tag;if(s===13){if(t=m(o),t!==null)return t;t=null}else if(s===31){if(t=g(o),t!==null)return t;t=null}else if(s===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;t=null}else o!==t&&(t=null)}}return aa=t,null}function bp(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ce()){case Ae:return 2;case Pe:return 8;case dt:case rt:return 32;case pt:return 268435456;default:return 32}default:return 32}}var Ru=!1,zo=null,Oo=null,Fo=null,$l=new Map,Kl=new Map,Jo=[],av="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function kp(t,o){switch(t){case"focusin":case"focusout":zo=null;break;case"dragenter":case"dragleave":Oo=null;break;case"mouseover":case"mouseout":Fo=null;break;case"pointerover":case"pointerout":$l.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kl.delete(o.pointerId)}}function Xl(t,o,s,u,d,p){return t===null||t.nativeEvent!==p?(t={blockedOn:o,domEventName:s,eventSystemFlags:u,nativeEvent:p,targetContainers:[d]},o!==null&&(o=Eo(o),o!==null&&wp(o)),t):(t.eventSystemFlags|=u,o=t.targetContainers,d!==null&&o.indexOf(d)===-1&&o.push(d),t)}function rv(t,o,s,u,d){switch(o){case"focusin":return zo=Xl(zo,t,o,s,u,d),!0;case"dragenter":return Oo=Xl(Oo,t,o,s,u,d),!0;case"mouseover":return Fo=Xl(Fo,t,o,s,u,d),!0;case"pointerover":var p=d.pointerId;return $l.set(p,Xl($l.get(p)||null,t,o,s,u,d)),!0;case"gotpointercapture":return p=d.pointerId,Kl.set(p,Xl(Kl.get(p)||null,t,o,s,u,d)),!0}return!1}function Up(t){var o=Wn(t.target);if(o!==null){var s=f(o);if(s!==null){if(o=s.tag,o===13){if(o=m(s),o!==null){t.blockedOn=o,sl(t.priority,function(){Dp(s)});return}}else if(o===31){if(o=g(s),o!==null){t.blockedOn=o,sl(t.priority,function(){Dp(s)});return}}else if(o===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ra(t){if(t.blockedOn!==null)return!1;for(var o=t.targetContainers;0<o.length;){var s=Mu(t.nativeEvent);if(s===null){s=t.nativeEvent;var u=new s.constructor(s.type,s);Na=u,s.target.dispatchEvent(u),Na=null}else return o=Eo(s),o!==null&&wp(o),t.blockedOn=s,!1;o.shift()}return!0}function Lp(t,o,s){ra(t)&&s.delete(o)}function uv(){Ru=!1,zo!==null&&ra(zo)&&(zo=null),Oo!==null&&ra(Oo)&&(Oo=null),Fo!==null&&ra(Fo)&&(Fo=null),$l.forEach(Lp),Kl.forEach(Lp)}function ua(t,o){t.blockedOn===o&&(t.blockedOn=null,Ru||(Ru=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,uv)))}var ca=null;function Vp(t){ca!==t&&(ca=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){ca===t&&(ca=null);for(var o=0;o<t.length;o+=3){var s=t[o],u=t[o+1],d=t[o+2];if(typeof u!="function"){if(Nu(u||s)===null)continue;break}var p=Eo(s);p!==null&&(t.splice(o,3),o-=3,Mr(p,{pending:!0,data:d,method:s.method,action:u},u,d))}}))}function Ki(t){function o(_){return ua(_,t)}zo!==null&&ua(zo,t),Oo!==null&&ua(Oo,t),Fo!==null&&ua(Fo,t),$l.forEach(o),Kl.forEach(o);for(var s=0;s<Jo.length;s++){var u=Jo[s];u.blockedOn===t&&(u.blockedOn=null)}for(;0<Jo.length&&(s=Jo[0],s.blockedOn===null);)Up(s),s.blockedOn===null&&Jo.shift();if(s=(t.ownerDocument||t).$$reactFormReplay,s!=null)for(u=0;u<s.length;u+=3){var d=s[u],p=s[u+1],T=d[cn]||null;if(typeof p=="function")T||Vp(s);else if(T){var A=null;if(p&&p.hasAttribute("formAction")){if(d=p,T=p[cn]||null)A=T.formAction;else if(Nu(d)!==null)continue}else A=T.action;typeof A=="function"?s[u+1]=A:(s.splice(u,3),u-=3),Vp(s)}}}function Bp(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(T){return d=T})},focusReset:"manual",scroll:"manual"})}function o(){d!==null&&(d(),d=null),u||setTimeout(s,20)}function s(){if(!u&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,d=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(s,100),function(){u=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),d!==null&&(d(),d=null)}}}function Iu(t){this._internalRoot=t}fa.prototype.render=Iu.prototype.render=function(t){var o=this._internalRoot;if(o===null)throw Error(l(409));var s=o.current,u=wn();Rp(s,u,t,o,null,null)},fa.prototype.unmount=Iu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var o=t.containerInfo;Rp(t.current,2,null,t,null,null),Js(),o[So]=null}};function fa(t){this._internalRoot=t}fa.prototype.unstable_scheduleHydration=function(t){if(t){var o=ll();t={blockedOn:null,target:t,priority:o};for(var s=0;s<Jo.length&&o!==0&&o<Jo[s].priority;s++);Jo.splice(s,0,t),s===0&&Up(t)}};var qp=e.version;if(qp!=="19.2.0")throw Error(l(527,qp,"19.2.0"));ie.findDOMNode=function(t){var o=t._reactInternals;if(o===void 0)throw typeof t.render=="function"?Error(l(188)):(t=Object.keys(t).join(","),Error(l(268,t)));return t=h(o),t=t!==null?v(t):null,t=t===null?null:t.stateNode,t};var cv={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var da=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!da.isDisabled&&da.supportsFiber)try{we=da.inject(cv),Oe=da}catch{}}return Zl.createRoot=function(t,o){if(!c(t))throw Error(l(299));var s=!1,u="",d=Jf,p=Yf,T=$f;return o!=null&&(o.unstable_strictMode===!0&&(s=!0),o.identifierPrefix!==void 0&&(u=o.identifierPrefix),o.onUncaughtError!==void 0&&(d=o.onUncaughtError),o.onCaughtError!==void 0&&(p=o.onCaughtError),o.onRecoverableError!==void 0&&(T=o.onRecoverableError)),o=Mp(t,1,!1,null,null,s,u,null,d,p,T,Bp),t[So]=o.current,cu(t),new Iu(o)},Zl.hydrateRoot=function(t,o,s){if(!c(t))throw Error(l(299));var u=!1,d="",p=Jf,T=Yf,A=$f,_=null;return s!=null&&(s.unstable_strictMode===!0&&(u=!0),s.identifierPrefix!==void 0&&(d=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError),s.formState!==void 0&&(_=s.formState)),o=Mp(t,1,!0,o,s??null,u,d,_,p,T,A,Bp),o.context=Np(null),s=o.current,u=wn(),u=mi(u),d=wo(u),d.callback=null,Do(s,d,u),s=u,o.current.lanes=s,St(o,s),Qn(o),t[So]=o.current,cu(t),new fa(o)},Zl.version="19.2.0",Zl}var Kp;function Cv(){if(Kp)return bu.exports;Kp=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),bu.exports=Tv(),bu.exports}var Sv=Cv();/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * Configuration file for application-level constants. It exports the Google Client ID
 * required for Google Sign-In and Google Drive API access, and the Google API Key
 * for accessing public Google APIs like the Picker API.
 *
 * IMPORTANT: The placeholder values must be replaced with valid credentials obtained
 * from the Google Cloud Console for the application to function correctly.
 */const Xp="594109471805-ru20g1u51eh5qbq9e0mbc8vu5fqcean3.apps.googleusercontent.com",Vu="AIzaSyAQ6PxFUXWtbrfySIbHyiOnccMPUb5_kaE";/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * Provides a developer-friendly, promise-based wrapper for IndexedDB to implement a
 * hierarchical key-value store.
 *
 * This abstraction simplifies local data persistence by offering an intuitive API (`get`,
 * `set`, `delete`, `list`) that handles database connections, transactions, and hierarchical
 * key management (using arrays as keys). It serves as a robust, local-first data layer,
 * enabling the application to work seamlessly offline and reducing the complexity of direct
 * IndexedDB interaction.
 */const Ev="CloudCounterDB",pa="HierarchicalStore",Av=1;class _v{constructor(){this.dbPromise=new Promise((e,i)=>{const l=indexedDB.open(Ev,Av);l.onupgradeneeded=c=>{const f=c.target.result;f.objectStoreNames.contains(pa)||f.createObjectStore(pa)},l.onsuccess=c=>{e(c.target.result)},l.onerror=c=>{console.error("IndexedDB setup error:",c.target.error),i(c.target.error)}})}getStore(e){return this.dbPromise.then(i=>i.transaction(pa,e).objectStore(pa))}async get(e){const i=await this.getStore("readonly");return new Promise((l,c)=>{const f=i.get(e);f.onsuccess=()=>l(f.result),f.onerror=m=>c(f.error)})}async set(e,i){const l=await this.getStore("readwrite");return new Promise((c,f)=>{const m=l.put(i,e);m.onsuccess=()=>c(),m.onerror=()=>f(m.error)})}async delete(e){const i=await this.getStore("readwrite");return new Promise((l,c)=>{const f=i.delete(e);f.onsuccess=()=>l(),f.onerror=()=>c(f.error)})}async list(e){const i=await this.getStore("readonly"),l=new Map,c=IDBKeyRange.bound(e,[...e,""],!1,!0);return new Promise((f,m)=>{const g=i.openCursor(c);g.onsuccess=y=>{const h=y.target.result;h?(Array.isArray(h.key)&&l.set(h.key,h.value),h.continue()):f(l)},g.onerror=()=>m(g.error)})}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * Provides a key-value store abstraction over the Google Drive API, specifically for
 * managing a single JSON file in the user's hidden App Data folder. This service handles
 * file discovery, creation, reading, and writing, abstracting away the complexities of
 * the Google Drive REST API.
 */class xv{constructor(e){this.file=null,this.cache=null,this.token=e}async apiRequest(e,i,l){const c=new Headers({Authorization:`Bearer ${this.token}`});let f;l&&(c.append("Content-Type","application/json"),f=JSON.stringify(l));const m=await fetch(`https://www.googleapis.com/${e}`,{method:i,headers:c,body:f});if(!m.ok){let y;try{y=await m.json()}catch{y={error:{message:`API request failed with status ${m.status}: ${m.statusText}`}}}throw console.error("Google Drive API Error:",y),m.status===401?new Error("Your session has expired. Please sign in again."):new Error(y.error.message||"An API error occurred.")}if(m.status===204)return{};const g=await m.text();try{return g.trim()===""?{}:JSON.parse(g)}catch(y){if(console.error(`[DEBUG] Failed to parse response from Drive API as JSON. Path: "${e}". Raw text was:`,g,y),e.includes("alt=media"))return{};throw new Error(`Received invalid JSON from Google Drive API for request: ${e}`)}}async findFile(){if(this.file)return this.file;const e=await this.apiRequest("drive/v3/files?q=name='synced-notepad.json' and trashed=false&spaces=appDataFolder&fields=files(id,name,headRevisionId)","GET");return e.files&&e.files.length>0?(this.file=e.files[0],this.file):null}async createFile(){const e={name:"synced-notepad.json",parents:["appDataFolder"],mimeType:"application/json"},i=await this.apiRequest("drive/v3/files?fields=id,headRevisionId","POST",e);return this.file=await this.writeFile(i.id,{books:{}}),this.file}async readFile(e){if(this.cache)return this.cache;try{const i=await this.apiRequest(`drive/v3/files/${e}?alt=media`,"GET");return this.cache=i||{},this.cache}catch(i){if(i.message.includes("404"))return{};throw i}}async writeFile(e,i){this.cache=i;const l=`upload/drive/v3/files/${e}?uploadType=media&fields=id,headRevisionId`;return this.apiRequest(l,"PATCH",i)}async getContentAndRevision(e,i){let l=await this.findFile();return l?{value:(await this.readFile(l.id))[e]??i,revisionId:l.headRevisionId}:{value:i,revisionId:null}}async set(e,i){let l=await this.findFile();l||(l=await this.createFile());const c=await this.readFile(l.id);c[e]=i;const f=await this.writeFile(l.id,c);return this.file=f,f}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * Contains data migration logic for updating the application's data structure
 * to the latest schema. This ensures backward compatibility with older data formats
 * that may be stored locally or in the cloud.
 */const ma=n=>{let e=!1;const i=JSON.parse(JSON.stringify(n));return Object.values(i).forEach(l=>{l.povs||(l.povs={}),l.relationships?l.relationships.forEach(c=>{c.hasOwnProperty("label")&&!c.hasOwnProperty("sourceLabel")&&(e=!0,c.targetLabel=c.label,c.sourceLabel="",delete c.label)}):(l.relationships=[],e=!0),Object.values(l.povs).forEach(c=>{if(c.hasOwnProperty("content")&&!c.hasOwnProperty("versions")){e=!0;const f=Date.now(),m=`v-${f}-${Math.random()}`;c.versions={[m]:{id:m,timestamp:f,content:c.content,name:`Version from ${new Date(f).toLocaleString()}`}},c.activeVersionId=m,delete c.content}if(c.hasOwnProperty("versions")&&!c.hasOwnProperty("entries")){e=!0;const f=`entry-${Date.now()}-${Math.random()}`,m={id:f,versions:c.versions,activeVersionId:c.activeVersionId,type:"prose",inputs:[],outputs:[]};Object.values(m.versions).forEach(g=>{g.hasOwnProperty("title")||(g.title=c.title)}),c.entries={[f]:m},delete c.versions,delete c.activeVersionId}else c.hasOwnProperty("entries")&&Object.values(c.entries).forEach(f=>{var m,g;if(Object.values(f.versions).forEach(y=>{y.hasOwnProperty("title")||(e=!0,y.title=c.title)}),!f.hasOwnProperty("type"))e=!0,f.type="prose";else switch(f.type){case"code":case"js-code":e=!0,f.type="js";break;case"narrative":e=!0,f.type="prose";break;case"nl-code":e=!0,f.type="nl";break}f.type==="input"?((m=f.outputs)==null?void 0:m.length)===1&&f.outputs[0]==="value"&&(!f.inputs||f.inputs.length===0)||(e=!0,f.outputs=["value"],f.inputs=[]):f.type==="output"?((g=f.inputs)==null?void 0:g.length)===1&&f.inputs[0]==="value"&&(!f.outputs||f.outputs.length===0)||(e=!0,f.inputs=["value"],f.outputs=[]):(f.hasOwnProperty("inputs")||(e=!0,f.inputs=[]),f.hasOwnProperty("outputs")||(e=!0,f.outputs=[])),f.hasOwnProperty("dirty")||(e=!0,f.dirty=!1)})})}),{migratedBooks:i,wasMigrated:e}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Mv,Nv;function Rv(){return{geminiUrl:Mv,vertexUrl:Nv}}function Iv(n,e,i,l){var c,f;if(!(n!=null&&n.baseUrl)){const m=Rv();return e?(c=m.vertexUrl)!==null&&c!==void 0?c:i:(f=m.geminiUrl)!==null&&f!==void 0?f:l}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class di{}function ye(n,e){const i=/\{([^}]+)\}/g;return n.replace(i,(l,c)=>{if(Object.prototype.hasOwnProperty.call(e,c)){const f=e[c];return f!=null?String(f):""}else throw new Error(`Key '${c}' not found in valueMap.`)})}function r(n,e,i){for(let f=0;f<e.length-1;f++){const m=e[f];if(m.endsWith("[]")){const g=m.slice(0,-2);if(!(g in n))if(Array.isArray(i))n[g]=Array.from({length:i.length},()=>({}));else throw new Error(`Value must be a list given an array path ${m}`);if(Array.isArray(n[g])){const y=n[g];if(Array.isArray(i))for(let h=0;h<y.length;h++){const v=y[h];r(v,e.slice(f+1),i[h])}else for(const h of y)r(h,e.slice(f+1),i)}return}else if(m.endsWith("[0]")){const g=m.slice(0,-3);g in n||(n[g]=[{}]);const y=n[g];r(y[0],e.slice(f+1),i);return}(!n[m]||typeof n[m]!="object")&&(n[m]={}),n=n[m]}const l=e[e.length-1],c=n[l];if(c!==void 0){if(!i||typeof i=="object"&&Object.keys(i).length===0||i===c)return;if(typeof c=="object"&&typeof i=="object"&&c!==null&&i!==null)Object.assign(c,i);else throw new Error(`Cannot set value for an existing key. Key: ${l}`)}else l==="_self"&&typeof i=="object"&&i!==null&&!Array.isArray(i)?Object.assign(n,i):n[l]=i}function a(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return;const l=e[i];if(l.endsWith("[]")){const c=l.slice(0,-2);if(c in n){const f=n[c];return Array.isArray(f)?f.map(m=>a(m,e.slice(i+1))):void 0}else return}else n=n[l]}return n}catch(i){if(i instanceof TypeError)return;throw i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ju(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wv(n){const e={},i=a(n,["operationName"]);i!=null&&r(e,["operationName"],i);const l=a(n,["resourceName"]);return l!=null&&r(e,["_url","resourceName"],l),e}function Dv(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["metadata"]);l!=null&&r(e,["metadata"],l);const c=a(n,["done"]);c!=null&&r(e,["done"],c);const f=a(n,["error"]);f!=null&&r(e,["error"],f);const m=a(n,["response","generateVideoResponse"]);return m!=null&&r(e,["response"],kv(m)),e}function bv(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["metadata"]);l!=null&&r(e,["metadata"],l);const c=a(n,["done"]);c!=null&&r(e,["done"],c);const f=a(n,["error"]);f!=null&&r(e,["error"],f);const m=a(n,["response"]);return m!=null&&r(e,["response"],Uv(m)),e}function kv(n){const e={},i=a(n,["generatedSamples"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>Lv(m))),r(e,["generatedVideos"],f)}const l=a(n,["raiMediaFilteredCount"]);l!=null&&r(e,["raiMediaFilteredCount"],l);const c=a(n,["raiMediaFilteredReasons"]);return c!=null&&r(e,["raiMediaFilteredReasons"],c),e}function Uv(n){const e={},i=a(n,["videos"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>Vv(m))),r(e,["generatedVideos"],f)}const l=a(n,["raiMediaFilteredCount"]);l!=null&&r(e,["raiMediaFilteredCount"],l);const c=a(n,["raiMediaFilteredReasons"]);return c!=null&&r(e,["raiMediaFilteredReasons"],c),e}function Lv(n){const e={},i=a(n,["_self"]);return i!=null&&r(e,["video"],Pv(i)),e}function Vv(n){const e={},i=a(n,["_self"]);return i!=null&&r(e,["video"],Gv(i)),e}function Bv(n){const e={},i=a(n,["operationName"]);return i!=null&&r(e,["_url","operationName"],i),e}function qv(n){const e={},i=a(n,["operationName"]);return i!=null&&r(e,["_url","operationName"],i),e}function Pv(n){const e={},i=a(n,["video","uri"]);i!=null&&r(e,["uri"],i);const l=a(n,["video","encodedVideo"]);l!=null&&r(e,["videoBytes"],ju(l));const c=a(n,["encoding"]);return c!=null&&r(e,["mimeType"],c),e}function Gv(n){const e={},i=a(n,["gcsUri"]);i!=null&&r(e,["uri"],i);const l=a(n,["bytesBase64Encoded"]);l!=null&&r(e,["videoBytes"],ju(l));const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Qp;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Qp||(Qp={}));var Zp;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(Zp||(Zp={}));var Gn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Gn||(Gn={}));var Wp;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Wp||(Wp={}));var jp;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(jp||(jp={}));var em;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(em||(em={}));var tm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(tm||(tm={}));var nm;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(nm||(nm={}));var om;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(om||(om={}));var im;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(im||(im={}));var lm;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT"})(lm||(lm={}));var sm;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(sm||(sm={}));var am;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(am||(am={}));var rm;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(rm||(rm={}));var um;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(um||(um={}));var Ta;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Ta||(Ta={}));var cm;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(cm||(cm={}));var zu;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(zu||(zu={}));var fm;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(fm||(fm={}));var dm;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(dm||(dm={}));var pm;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V"})(pm||(pm={}));var mm;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(mm||(mm={}));var hm;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(hm||(hm={}));var gm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(gm||(gm={}));var ym;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(ym||(ym={}));var vm;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(vm||(vm={}));var Tm;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Tm||(Tm={}));var Cm;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Cm||(Cm={}));var Sm;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Sm||(Sm={}));var Em;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Em||(Em={}));var Am;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Am||(Am={}));var _m;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(_m||(_m={}));var xm;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xm||(xm={}));var Mm;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Mm||(Mm={}));var Nm;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Nm||(Nm={}));var Rm;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Rm||(Rm={}));var Im;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Im||(Im={}));var wm;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(wm||(wm={}));var Dm;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Dm||(Dm={}));var bm;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(bm||(bm={}));var km;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(km||(km={}));var Um;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Um||(Um={}));var Lm;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Lm||(Lm={}));var Vm;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Vm||(Vm={}));var Bm;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Bm||(Bm={}));var qm;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(qm||(qm={}));var Pm;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Pm||(Pm={}));var Gm;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Gm||(Gm={}));var Qi;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Qi||(Qi={}));class Ou{constructor(e){const i={};for(const l of e.headers.entries())i[l[0]]=l[1];this.headers=i,this.responseInternal=e}json(){return this.responseInternal.json()}}class Wl{get text(){var e,i,l,c,f,m,g,y;if(((c=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",v=!1;const C=[];for(const E of(y=(g=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)!==null&&y!==void 0?y:[]){for(const[x,U]of Object.entries(E))x!=="text"&&x!=="thought"&&(U!==null||U!==void 0)&&C.push(x);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;v=!0,h+=E.text}}return C.length>0&&console.warn(`there are non-text parts ${C} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?h:void 0}get data(){var e,i,l,c,f,m,g,y;if(((c=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const v=[];for(const C of(y=(g=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)!==null&&y!==void 0?y:[]){for(const[E,x]of Object.entries(C))E!=="inlineData"&&(x!==null||x!==void 0)&&v.push(E);C.inlineData&&typeof C.inlineData.data=="string"&&(h+=atob(C.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,i,l,c,f,m,g,y;if(((c=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(y=(g=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,i,l,c,f,m,g,y,h;if(((c=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(g=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(C=>C.executableCode).map(C=>C.executableCode).filter(C=>C!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,i,l,c,f,m,g,y,h;if(((c=(l=(i=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||i===void 0?void 0:i.content)===null||l===void 0?void 0:l.parts)===null||c===void 0?void 0:c.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(g=(m=(f=this.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content)===null||g===void 0?void 0:g.parts)===null||y===void 0?void 0:y.filter(C=>C.codeExecutionResult).map(C=>C.codeExecutionResult).filter(C=>C!==void 0);if((v==null?void 0:v.length)!==0)return(h=v==null?void 0:v[0])===null||h===void 0?void 0:h.output}}class Hm{}class zm{}class Hv{}class zv{}class Ov{}class Fv{}class Om{}class Fm{}class Jm{}class Jv{}class Ca{_fromAPIResponse({apiResponse:e,isVertexAI:i}){const l=new Ca;let c;const f=e;return i?c=bv(f):c=Dv(f),Object.assign(l,c),l}}class Ym{}class $m{}class Km{}class Yv{}class $v{}class Kv{}class Xm{}class Xv{get text(){var e,i,l;let c="",f=!1;const m=[];for(const g of(l=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&l!==void 0?l:[]){for(const[y,h]of Object.entries(g))y!=="text"&&y!=="thought"&&h!==null&&m.push(y);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;f=!0,c+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?c:void 0}get data(){var e,i,l;let c="";const f=[];for(const m of(l=(i=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||i===void 0?void 0:i.parts)!==null&&l!==void 0?l:[]){for(const[g,y]of Object.entries(m))g!=="inlineData"&&y!==null&&f.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(c+=atob(m.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),c.length>0?btoa(c):void 0}}class Qv{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const i=e.split("/",2);return`publishers/${i[0]}/models/${i[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Rh(n,e){const i=gt(n,e);return i?i.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}`:i.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${i}`:i:""}function Ih(n){return Array.isArray(n)?n.map(e=>Sa(e)):[Sa(n)]}function Sa(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function wh(n){const e=Sa(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Dh(n){const e=Sa(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Qm(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function bh(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Qm(e)):[Qm(n)]}function Fu(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Zm(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function Wm(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function dn(n){if(n==null)throw new Error("ContentUnion is required");return Fu(n)?n:{role:"user",parts:bh(n)}}function ec(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(i=>{const l=dn(i);return l.parts&&l.parts.length>0&&l.parts[0].text!==void 0?[l.parts[0].text]:[]});if(n.isVertexAI()){const i=dn(e);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]}return Array.isArray(e)?e.map(i=>dn(i)):[dn(e)]}function Hn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Zm(n)||Wm(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[dn(n)]}const e=[],i=[],l=Fu(n[0]);for(const c of n){const f=Fu(c);if(f!=l)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(f)e.push(c);else{if(Zm(c)||Wm(c))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(c)}}return l||e.push({role:"user",parts:bh(i)}),e}function Zv(n,e){n.includes("null")&&(e.nullable=!0);const i=n.filter(l=>l!=="null");if(i.length===1)e.type=Object.values(Gn).includes(i[0].toUpperCase())?i[0].toUpperCase():Gn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const l of i)e.anyOf.push({type:Object.values(Gn).includes(l.toUpperCase())?l.toUpperCase():Gn.TYPE_UNSPECIFIED})}}function Zi(n){const e={},i=["items"],l=["anyOf"],c=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const f=n.anyOf;f!=null&&f.length==2&&(f[0].type==="null"?(e.nullable=!0,n=f[1]):f[1].type==="null"&&(e.nullable=!0,n=f[0])),n.type instanceof Array&&Zv(n.type,e);for(const[m,g]of Object.entries(n))if(g!=null)if(m=="type"){if(g==="null")throw new Error("type: null can not be the only possible type for the field.");if(g instanceof Array)continue;e.type=Object.values(Gn).includes(g.toUpperCase())?g.toUpperCase():Gn.TYPE_UNSPECIFIED}else if(i.includes(m))e[m]=Zi(g);else if(l.includes(m)){const y=[];for(const h of g){if(h.type=="null"){e.nullable=!0;continue}y.push(Zi(h))}e[m]=y}else if(c.includes(m)){const y={};for(const[h,v]of Object.entries(g))y[h]=Zi(v);e[m]=y}else{if(m==="additionalProperties")continue;e[m]=g}return e}function tc(n){return Zi(n)}function nc(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function oc(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function el(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Zi(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Zi(e.response));return n}function tl(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const i of n)e.push(i);return e}function Wv(n,e,i,l=1){const c=!e.startsWith(`${i}/`)&&e.split("/").length===l;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${i}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:c?`projects/${n.getProject()}/locations/${n.getLocation()}/${i}/${e}`:e:c?`${i}/${e}`:e}function Co(n,e){if(typeof e!="string")throw new Error("name must be a string");return Wv(n,e,"cachedContents")}function kh(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function pi(n){return ju(n)}function jv(n){return n!=null&&typeof n=="object"&&"name"in n}function eT(n){return n!=null&&typeof n=="object"&&"video"in n}function tT(n){return n!=null&&typeof n=="object"&&"uri"in n}function Uh(n){var e;let i;if(jv(n)&&(i=n.name),!(tT(n)&&(i=n.uri,i===void 0))&&!(eT(n)&&(i=(e=n.video)===null||e===void 0?void 0:e.uri,i===void 0))){if(typeof n=="string"&&(i=n),i===void 0)throw new Error("Could not extract file name from the provided input.");if(i.startsWith("https://")){const c=i.split("files/")[1].match(/[a-z0-9]+/);if(c===null)throw new Error(`Could not extract file name from URI ${i}`);i=c[0]}else i.startsWith("files/")&&(i=i.split("files/")[1]);return i}}function Lh(n,e){let i;return n.isVertexAI()?i=e?"publishers/google/models":"models":i=e?"models":"tunedModels",i}function Vh(n){for(const e of["models","tunedModels","publisherModels"])if(nT(n,e))return n[e];return[]}function nT(n,e){return n!==null&&typeof n=="object"&&e in n}function oT(n,e={}){const i=n,l={name:i.name,description:i.description,parametersJsonSchema:i.inputSchema};return i.outputSchema&&(l.responseJsonSchema=i.outputSchema),e.behavior&&(l.behavior=e.behavior),{functionDeclarations:[l]}}function iT(n,e={}){const i=[],l=new Set;for(const c of n){const f=c.name;if(l.has(f))throw new Error(`Duplicate function name ${f} found in MCP tools. Please ensure function names are unique.`);l.add(f);const m=oT(c,e);m.functionDeclarations&&i.push(...m.functionDeclarations)}return{functionDeclarations:i}}function Bh(n,e){let i;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))i={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))i={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))i={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");i={inlinedRequests:e}}else i=e;const l=[i.gcsUri,i.bigqueryUri].filter(Boolean).length,c=[i.inlinedRequests,i.fileName].filter(Boolean).length;if(n.isVertexAI()){if(c>0||l!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(l>0||c!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return i}function lT(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function qh(n){if(typeof n!="object"||n===null)return{};const e=n,i=e.inlinedResponses;if(typeof i!="object"||i===null)return n;const c=i.inlinedResponses;if(!Array.isArray(c)||c.length===0)return n;let f=!1;for(const m of c){if(typeof m!="object"||m===null)continue;const y=m.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){f=!0;break}}return f&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function nl(n,e){const i=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(i))return i.split("/").pop();throw new Error(`Invalid batch job name: ${i}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(i))return i.split("/").pop();if(/^\d+$/.test(i))return i;throw new Error(`Invalid batch job name: ${i}.`)}function Ph(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sT(n){const e={},i=a(n,["responsesFile"]);i!=null&&r(e,["fileName"],i);const l=a(n,["inlinedResponses","inlinedResponses"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>KT(m))),r(e,["inlinedResponses"],f)}const c=a(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>YT(m))),r(e,["inlinedEmbedContentResponses"],f)}return e}function aT(n){const e={},i=a(n,["predictionsFormat"]);i!=null&&r(e,["format"],i);const l=a(n,["gcsDestination","outputUriPrefix"]);l!=null&&r(e,["gcsUri"],l);const c=a(n,["bigqueryDestination","outputUri"]);return c!=null&&r(e,["bigqueryUri"],c),e}function rT(n){const e={},i=a(n,["format"]);i!=null&&r(e,["predictionsFormat"],i);const l=a(n,["gcsUri"]);l!=null&&r(e,["gcsDestination","outputUriPrefix"],l);const c=a(n,["bigqueryUri"]);if(c!=null&&r(e,["bigqueryDestination","outputUri"],c),a(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(a(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Xi(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["metadata","displayName"]);l!=null&&r(e,["displayName"],l);const c=a(n,["metadata","state"]);c!=null&&r(e,["state"],Ph(c));const f=a(n,["metadata","createTime"]);f!=null&&r(e,["createTime"],f);const m=a(n,["metadata","endTime"]);m!=null&&r(e,["endTime"],m);const g=a(n,["metadata","updateTime"]);g!=null&&r(e,["updateTime"],g);const y=a(n,["metadata","model"]);y!=null&&r(e,["model"],y);const h=a(n,["metadata","output"]);return h!=null&&r(e,["dest"],sT(qh(h))),e}function Ju(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["displayName"]);l!=null&&r(e,["displayName"],l);const c=a(n,["state"]);c!=null&&r(e,["state"],Ph(c));const f=a(n,["error"]);f!=null&&r(e,["error"],Hh(f));const m=a(n,["createTime"]);m!=null&&r(e,["createTime"],m);const g=a(n,["startTime"]);g!=null&&r(e,["startTime"],g);const y=a(n,["endTime"]);y!=null&&r(e,["endTime"],y);const h=a(n,["updateTime"]);h!=null&&r(e,["updateTime"],h);const v=a(n,["model"]);v!=null&&r(e,["model"],v);const C=a(n,["inputConfig"]);C!=null&&r(e,["src"],uT(C));const E=a(n,["outputConfig"]);return E!=null&&r(e,["dest"],aT(qh(E))),e}function uT(n){const e={},i=a(n,["instancesFormat"]);i!=null&&r(e,["format"],i);const l=a(n,["gcsSource","uris"]);l!=null&&r(e,["gcsUri"],l);const c=a(n,["bigquerySource","inputUri"]);return c!=null&&r(e,["bigqueryUri"],c),e}function cT(n,e){const i={};if(a(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(a(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const l=a(e,["fileName"]);l!=null&&r(i,["fileName"],l);const c=a(e,["inlinedRequests"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>$T(n,m))),r(i,["requests","requests"],f)}return i}function fT(n){const e={},i=a(n,["format"]);i!=null&&r(e,["instancesFormat"],i);const l=a(n,["gcsUri"]);l!=null&&r(e,["gcsSource","uris"],l);const c=a(n,["bigqueryUri"]);if(c!=null&&r(e,["bigquerySource","inputUri"],c),a(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(a(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function dT(n){const e={},i=a(n,["data"]);i!=null&&r(e,["data"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function pT(n){const e={};if(a(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(n,["data"]);i!=null&&r(e,["data"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function mT(n,e){const i={},l=a(e,["name"]);return l!=null&&r(i,["_url","name"],nl(n,l)),i}function hT(n,e){const i={},l=a(e,["name"]);return l!=null&&r(i,["_url","name"],nl(n,l)),i}function gT(n){const e={},i=a(n,["content"]);i!=null&&r(e,["content"],CT(i));const l=a(n,["citationMetadata"]);l!=null&&r(e,["citationMetadata"],yT(l));const c=a(n,["tokenCount"]);c!=null&&r(e,["tokenCount"],c);const f=a(n,["finishReason"]);f!=null&&r(e,["finishReason"],f);const m=a(n,["urlContextMetadata"]);m!=null&&r(e,["urlContextMetadata"],gC(m));const g=a(n,["avgLogprobs"]);g!=null&&r(e,["avgLogprobs"],g);const y=a(n,["groundingMetadata"]);y!=null&&r(e,["groundingMetadata"],y);const h=a(n,["index"]);h!=null&&r(e,["index"],h);const v=a(n,["logprobsResult"]);v!=null&&r(e,["logprobsResult"],v);const C=a(n,["safetyRatings"]);return C!=null&&r(e,["safetyRatings"],C),e}function yT(n){const e={},i=a(n,["citationSources"]);return i!=null&&r(e,["citations"],i),e}function vT(n){const e={},i=a(n,["environment"]);i!=null&&r(e,["environment"],i);const l=a(n,["excludedPredefinedFunctions"]);return l!=null&&r(e,["excludedPredefinedFunctions"],l),e}function TT(n){const e={},i=a(n,["values"]);return i!=null&&r(e,["values"],i),e}function CT(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>iC(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function Gh(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>lC(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function ST(n,e){const i={},l=a(n,["displayName"]);if(e!==void 0&&l!=null&&r(e,["batch","displayName"],l),a(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return i}function ET(n,e){const i={},l=a(n,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const c=a(n,["dest"]);return e!==void 0&&c!=null&&r(e,["outputConfig"],rT(lT(c))),i}function Bu(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["src"]);c!=null&&r(i,["batch","inputConfig"],cT(n,Bh(n,c)));const f=a(e,["config"]);return f!=null&&ST(f,i),i}function AT(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["model"],gt(n,l));const c=a(e,["src"]);c!=null&&r(i,["inputConfig"],fT(Bh(n,c)));const f=a(e,["config"]);return f!=null&&ET(f,i),i}function _T(n,e){const i={},l=a(n,["displayName"]);return e!==void 0&&l!=null&&r(e,["batch","displayName"],l),i}function qu(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["src"]);c!=null&&r(i,["batch","inputConfig"],bT(n,c));const f=a(e,["config"]);return f!=null&&_T(f,i),i}function xT(n,e){const i={},l=a(e,["name"]);return l!=null&&r(i,["_url","name"],nl(n,l)),i}function MT(n,e){const i={},l=a(e,["name"]);return l!=null&&r(i,["_url","name"],nl(n,l)),i}function NT(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["name"]);l!=null&&r(e,["name"],l);const c=a(n,["done"]);c!=null&&r(e,["done"],c);const f=a(n,["error"]);return f!=null&&r(e,["error"],ic(f)),e}function RT(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["name"]);l!=null&&r(e,["name"],l);const c=a(n,["done"]);c!=null&&r(e,["done"],c);const f=a(n,["error"]);return f!=null&&r(e,["error"],Hh(f)),e}function IT(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["dynamicThreshold"]);return l!=null&&r(e,["dynamicThreshold"],l),e}function wT(n,e){const i={},l=a(e,["contents"]);l!=null&&r(i,["requests[]","request","content"],ec(n,l));const c=a(e,["config"]);return c!=null&&r(i,["config"],DT(c,i)),i}function DT(n,e){const i={},l=a(n,["taskType"]);e!==void 0&&l!=null&&r(e,["requests[]","taskType"],l);const c=a(n,["title"]);e!==void 0&&c!=null&&r(e,["requests[]","title"],c);const f=a(n,["outputDimensionality"]);if(e!==void 0&&f!=null&&r(e,["requests[]","outputDimensionality"],f),a(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function bT(n,e){const i={},l=a(e,["fileName"]);l!=null&&r(i,["file_name"],l);const c=a(e,["inlinedRequests"]);return c!=null&&r(i,["requests"],wT(n,c)),i}function kT(n){const e={},i=a(n,["fileUri"]);i!=null&&r(e,["fileUri"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function UT(n){const e={};if(a(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(n,["fileUri"]);i!=null&&r(e,["fileUri"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function LT(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function VT(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function BT(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["allowedFunctionNames"]);return l!=null&&r(e,["allowedFunctionNames"],l),e}function qT(n){const e={},i=a(n,["behavior"]);i!=null&&r(e,["behavior"],i);const l=a(n,["description"]);l!=null&&r(e,["description"],l);const c=a(n,["name"]);c!=null&&r(e,["name"],c);const f=a(n,["parameters"]);f!=null&&r(e,["parameters"],f);const m=a(n,["parametersJsonSchema"]);m!=null&&r(e,["parametersJsonSchema"],m);const g=a(n,["response"]);g!=null&&r(e,["response"],g);const y=a(n,["responseJsonSchema"]);return y!=null&&r(e,["responseJsonSchema"],y),e}function PT(n,e,i){const l={},c=a(e,["systemInstruction"]);i!==void 0&&c!=null&&r(i,["systemInstruction"],Gh(dn(c)));const f=a(e,["temperature"]);f!=null&&r(l,["temperature"],f);const m=a(e,["topP"]);m!=null&&r(l,["topP"],m);const g=a(e,["topK"]);g!=null&&r(l,["topK"],g);const y=a(e,["candidateCount"]);y!=null&&r(l,["candidateCount"],y);const h=a(e,["maxOutputTokens"]);h!=null&&r(l,["maxOutputTokens"],h);const v=a(e,["stopSequences"]);v!=null&&r(l,["stopSequences"],v);const C=a(e,["responseLogprobs"]);C!=null&&r(l,["responseLogprobs"],C);const E=a(e,["logprobs"]);E!=null&&r(l,["logprobs"],E);const x=a(e,["presencePenalty"]);x!=null&&r(l,["presencePenalty"],x);const U=a(e,["frequencyPenalty"]);U!=null&&r(l,["frequencyPenalty"],U);const O=a(e,["seed"]);O!=null&&r(l,["seed"],O);const q=a(e,["responseMimeType"]);q!=null&&r(l,["responseMimeType"],q);const z=a(e,["responseSchema"]);z!=null&&r(l,["responseSchema"],uC(tc(z)));const F=a(e,["responseJsonSchema"]);if(F!=null&&r(l,["responseJsonSchema"],F),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=a(e,["safetySettings"]);if(i!==void 0&&Z!=null){let ve=Z;Array.isArray(ve)&&(ve=ve.map(nt=>rC(nt))),r(i,["safetySettings"],ve)}const ee=a(e,["tools"]);if(i!==void 0&&ee!=null){let ve=tl(ee);Array.isArray(ve)&&(ve=ve.map(nt=>hC(el(nt)))),r(i,["tools"],ve)}const ce=a(e,["toolConfig"]);if(i!==void 0&&ce!=null&&r(i,["toolConfig"],mC(ce)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=a(e,["cachedContent"]);i!==void 0&&fe!=null&&r(i,["cachedContent"],Co(n,fe));const oe=a(e,["responseModalities"]);oe!=null&&r(l,["responseModalities"],oe);const pe=a(e,["mediaResolution"]);pe!=null&&r(l,["mediaResolution"],pe);const j=a(e,["speechConfig"]);if(j!=null&&r(l,["speechConfig"],dC(nc(j))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const me=a(e,["thinkingConfig"]);me!=null&&r(l,["thinkingConfig"],pC(me));const re=a(e,["imageConfig"]);return re!=null&&r(l,["imageConfig"],JT(re)),l}function GT(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["candidates"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(h=>gT(h))),r(e,["candidates"],y)}const c=a(n,["modelVersion"]);c!=null&&r(e,["modelVersion"],c);const f=a(n,["promptFeedback"]);f!=null&&r(e,["promptFeedback"],f);const m=a(n,["responseId"]);m!=null&&r(e,["responseId"],m);const g=a(n,["usageMetadata"]);return g!=null&&r(e,["usageMetadata"],g),e}function HT(n,e){const i={},l=a(e,["name"]);return l!=null&&r(i,["_url","name"],nl(n,l)),i}function zT(n,e){const i={},l=a(e,["name"]);return l!=null&&r(i,["_url","name"],nl(n,l)),i}function OT(n){const e={},i=a(n,["dynamicRetrievalConfig"]);return i!=null&&r(e,["dynamicRetrievalConfig"],IT(i)),e}function FT(n){const e={},i=a(n,["timeRangeFilter"]);if(i!=null&&r(e,["timeRangeFilter"],XT(i)),a(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function JT(n){const e={},i=a(n,["aspectRatio"]);return i!=null&&r(e,["aspectRatio"],i),e}function YT(n){const e={},i=a(n,["response"]);i!=null&&r(e,["response"],cC(i));const l=a(n,["error"]);return l!=null&&r(e,["error"],ic(l)),e}function $T(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["request","model"],gt(n,l));const c=a(e,["contents"]);if(c!=null){let m=Hn(c);Array.isArray(m)&&(m=m.map(g=>Gh(g))),r(i,["request","contents"],m)}const f=a(e,["config"]);return f!=null&&r(i,["request","generationConfig"],PT(n,f,i)),i}function KT(n){const e={},i=a(n,["response"]);i!=null&&r(e,["response"],GT(i));const l=a(n,["error"]);return l!=null&&r(e,["error"],ic(l)),e}function XT(n){const e={},i=a(n,["startTime"]);i!=null&&r(e,["startTime"],i);const l=a(n,["endTime"]);return l!=null&&r(e,["endTime"],l),e}function ic(n){const e={},i=a(n,["details"]);i!=null&&r(e,["details"],i);const l=a(n,["code"]);l!=null&&r(e,["code"],l);const c=a(n,["message"]);return c!=null&&r(e,["message"],c),e}function Hh(n){const e={},i=a(n,["details"]);i!=null&&r(e,["details"],i);const l=a(n,["code"]);l!=null&&r(e,["code"],l);const c=a(n,["message"]);return c!=null&&r(e,["message"],c),e}function QT(n){const e={},i=a(n,["latitude"]);i!=null&&r(e,["latitude"],i);const l=a(n,["longitude"]);return l!=null&&r(e,["longitude"],l),e}function ZT(n,e){const i={},l=a(n,["pageSize"]);e!==void 0&&l!=null&&r(e,["_query","pageSize"],l);const c=a(n,["pageToken"]);if(e!==void 0&&c!=null&&r(e,["_query","pageToken"],c),a(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return i}function WT(n,e){const i={},l=a(n,["pageSize"]);e!==void 0&&l!=null&&r(e,["_query","pageSize"],l);const c=a(n,["pageToken"]);e!==void 0&&c!=null&&r(e,["_query","pageToken"],c);const f=a(n,["filter"]);return e!==void 0&&f!=null&&r(e,["_query","filter"],f),i}function jT(n){const e={},i=a(n,["config"]);return i!=null&&ZT(i,e),e}function eC(n){const e={},i=a(n,["config"]);return i!=null&&WT(i,e),e}function tC(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["nextPageToken"]);l!=null&&r(e,["nextPageToken"],l);const c=a(n,["operations"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Xi(m))),r(e,["batchJobs"],f)}return e}function nC(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["nextPageToken"]);l!=null&&r(e,["nextPageToken"],l);const c=a(n,["batchPredictionJobs"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Ju(m))),r(e,["batchJobs"],f)}return e}function oC(n){const e={},i=a(n,["speakerVoiceConfigs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>fC(c))),r(e,["speakerVoiceConfigs"],l)}return e}function iC(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],TC(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],dT(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],kT(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],LT(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function lC(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],CC(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],pT(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],UT(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],VT(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function sC(n){const e={},i=a(n,["voiceName"]);return i!=null&&r(e,["voiceName"],i),e}function aC(n){const e={},i=a(n,["latLng"]);i!=null&&r(e,["latLng"],QT(i));const l=a(n,["languageCode"]);return l!=null&&r(e,["languageCode"],l),e}function rC(n){const e={};if(a(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(n,["category"]);i!=null&&r(e,["category"],i);const l=a(n,["threshold"]);return l!=null&&r(e,["threshold"],l),e}function uC(n){const e={},i=a(n,["anyOf"]);i!=null&&r(e,["anyOf"],i);const l=a(n,["default"]);l!=null&&r(e,["default"],l);const c=a(n,["description"]);c!=null&&r(e,["description"],c);const f=a(n,["enum"]);f!=null&&r(e,["enum"],f);const m=a(n,["example"]);m!=null&&r(e,["example"],m);const g=a(n,["format"]);g!=null&&r(e,["format"],g);const y=a(n,["items"]);y!=null&&r(e,["items"],y);const h=a(n,["maxItems"]);h!=null&&r(e,["maxItems"],h);const v=a(n,["maxLength"]);v!=null&&r(e,["maxLength"],v);const C=a(n,["maxProperties"]);C!=null&&r(e,["maxProperties"],C);const E=a(n,["maximum"]);E!=null&&r(e,["maximum"],E);const x=a(n,["minItems"]);x!=null&&r(e,["minItems"],x);const U=a(n,["minLength"]);U!=null&&r(e,["minLength"],U);const O=a(n,["minProperties"]);O!=null&&r(e,["minProperties"],O);const q=a(n,["minimum"]);q!=null&&r(e,["minimum"],q);const z=a(n,["nullable"]);z!=null&&r(e,["nullable"],z);const F=a(n,["pattern"]);F!=null&&r(e,["pattern"],F);const Z=a(n,["properties"]);Z!=null&&r(e,["properties"],Z);const ee=a(n,["propertyOrdering"]);ee!=null&&r(e,["propertyOrdering"],ee);const ce=a(n,["required"]);ce!=null&&r(e,["required"],ce);const fe=a(n,["title"]);fe!=null&&r(e,["title"],fe);const oe=a(n,["type"]);return oe!=null&&r(e,["type"],oe),e}function cC(n){const e={},i=a(n,["embedding"]);i!=null&&r(e,["embedding"],TT(i));const l=a(n,["tokenCount"]);return l!=null&&r(e,["tokenCount"],l),e}function fC(n){const e={},i=a(n,["speaker"]);i!=null&&r(e,["speaker"],i);const l=a(n,["voiceConfig"]);return l!=null&&r(e,["voiceConfig"],zh(l)),e}function dC(n){const e={},i=a(n,["voiceConfig"]);i!=null&&r(e,["voiceConfig"],zh(i));const l=a(n,["multiSpeakerVoiceConfig"]);l!=null&&r(e,["multiSpeakerVoiceConfig"],oC(l));const c=a(n,["languageCode"]);return c!=null&&r(e,["languageCode"],c),e}function pC(n){const e={},i=a(n,["includeThoughts"]);i!=null&&r(e,["includeThoughts"],i);const l=a(n,["thinkingBudget"]);return l!=null&&r(e,["thinkingBudget"],l),e}function mC(n){const e={},i=a(n,["functionCallingConfig"]);i!=null&&r(e,["functionCallingConfig"],BT(i));const l=a(n,["retrievalConfig"]);return l!=null&&r(e,["retrievalConfig"],aC(l)),e}function hC(n){const e={},i=a(n,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>qT(h))),r(e,["functionDeclarations"],y)}if(a(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=a(n,["googleSearch"]);l!=null&&r(e,["googleSearch"],FT(l));const c=a(n,["googleSearchRetrieval"]);if(c!=null&&r(e,["googleSearchRetrieval"],OT(c)),a(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(n,["urlContext"])!=null&&r(e,["urlContext"],yC());const m=a(n,["computerUse"]);m!=null&&r(e,["computerUse"],vT(m));const g=a(n,["codeExecution"]);return g!=null&&r(e,["codeExecution"],g),e}function gC(n){const e={},i=a(n,["urlMetadata"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>vC(c))),r(e,["urlMetadata"],l)}return e}function yC(){return{}}function vC(n){const e={},i=a(n,["retrievedUrl"]);i!=null&&r(e,["retrievedUrl"],i);const l=a(n,["urlRetrievalStatus"]);return l!=null&&r(e,["urlRetrievalStatus"],l),e}function TC(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function CC(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function zh(n){const e={},i=a(n,["prebuiltVoiceConfig"]);return i!=null&&r(e,["prebuiltVoiceConfig"],sC(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var fi;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(fi||(fi={}));class es{constructor(e,i,l,c){this.pageInternal=[],this.paramsInternal={},this.requestInternal=i,this.init(e,l,c)}init(e,i,l){var c,f;this.nameInternal=e,this.pageInternal=i[this.nameInternal]||[],this.sdkHttpResponseInternal=i==null?void 0:i.sdkHttpResponse,this.idxInternal=0;let m={config:{}};!l||Object.keys(l).length===0?m={config:{}}:typeof l=="object"?m=Object.assign({},l):m=l,m.config&&(m.config.pageToken=i.nextPageToken),this.paramsInternal=m,this.pageInternalSize=(f=(c=m.config)===null||c===void 0?void 0:c.pageSize)!==null&&f!==void 0?f:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SC extends di{constructor(e){super(),this.apiClient=e,this.create=async i=>{var l,c;if(this.apiClient.isVertexAI())return i.config=this.formatDestination(i.src,i.config),this.createInternal(i);const f=i.src;if(!(Array.isArray(i.src)||f.inlinedRequests!==void 0))return this.createInternal(i);const g=this.createInlinedGenerateContentRequest(i),y=g.path,h=g.body,v=Bu(this.apiClient,i)._query||{};return this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=i.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=i.config)===null||c===void 0?void 0:c.abortSignal}).then(E=>E.json()).then(E=>Xi(E))},this.createEmbeddings=async i=>{var l,c;if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");if(!(i.src.inlinedRequests!==void 0))return this.createEmbeddingsInternal(i);const g=this.createInlinedEmbedContentRequest(i),y=g.path,h=g.body,v=qu(this.apiClient,i)._query||{};return this.apiClient.request({path:y,queryParams:v,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(l=i.config)===null||l===void 0?void 0:l.httpOptions,abortSignal:(c=i.config)===null||c===void 0?void 0:c.abortSignal}).then(E=>E.json()).then(E=>Xi(E))},this.list=async(i={})=>new es(fi.PAGED_ITEM_BATCH_JOBS,l=>this.listInternal(l),await this.listInternal(i),i)}createInlinedGenerateContentRequest(e){const i=Bu(this.apiClient,e),l=i._url,c=ye("{model}:batchGenerateContent",l),g=i.batch.inputConfig.requests,y=g.requests,h=[];for(const v of y){const C=Object.assign({},v);if(C.systemInstruction){const E=C.systemInstruction;delete C.systemInstruction;const x=C.request;x.systemInstruction=E,C.request=x}h.push(C)}return g.requests=h,delete i.config,delete i._url,delete i._query,{path:c,body:i}}createInlinedEmbedContentRequest(e){const i=qu(this.apiClient,e),l=i._url,c=ye("{model}:asyncBatchEmbedContent",l),g=i.batch.inputConfig.requests,y=g.requests,h=[];delete g.config;for(const v of y){const C=Object.assign({},v),E=C.request;for(const x in C)x!=="request"&&(E[x]=C[x],delete C[x]);h.push(C)}return g.requests=h,delete i.config,delete i._url,delete i._query,{path:c,body:i}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,i){const l=i?Object.assign({},i):{},c=Date.now().toString();if(l.displayName||(l.displayName=`genaiBatchJob_${c}`),l.dest===void 0){const f=this.getGcsUri(e),m=this.getBigqueryUri(e);if(f)f.endsWith(".jsonl")?l.dest=`${f.slice(0,-6)}/dest`:l.dest=`${f}_dest_${c}`;else if(m)l.dest=`${m}_dest_${c}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return l}async createInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=AT(this.apiClient,e);return g=ye("batchPredictionJobs",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>Ju(v))}else{const h=Bu(this.apiClient,e);return g=ye("{model}:batchGenerateContent",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Xi(v))}}async createEmbeddingsInternal(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=qu(this.apiClient,e);return f=ye("{model}:asyncBatchEmbedContent",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Xi(y))}}async get(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=zT(this.apiClient,e);return g=ye("batchPredictionJobs/{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>Ju(v))}else{const h=HT(this.apiClient,e);return g=ye("batches/{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Xi(v))}}async cancel(e){var i,l,c,f;let m="",g={};if(this.apiClient.isVertexAI()){const y=hT(this.apiClient,e);m=ye("batchPredictionJobs/{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}else{const y=mT(this.apiClient,e);m=ye("batches/{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async listInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=eC(e);return g=ye("batchPredictionJobs",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=nC(v),E=new Xm;return Object.assign(E,C),E})}else{const h=jT(e);return g=ye("batches",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=tC(v),E=new Xm;return Object.assign(E,C),E})}}async delete(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=MT(this.apiClient,e);return g=ye("batchPredictionJobs/{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>RT(v))}else{const h=xT(this.apiClient,e);return g=ye("batches/{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>NT(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function EC(n){const e={},i=a(n,["apiKeyString"]);return i!=null&&r(e,["apiKeyString"],i),e}function AC(n){const e={},i=a(n,["apiKeyConfig"]);i!=null&&r(e,["apiKeyConfig"],EC(i));const l=a(n,["authType"]);l!=null&&r(e,["authType"],l);const c=a(n,["googleServiceAccountConfig"]);c!=null&&r(e,["googleServiceAccountConfig"],c);const f=a(n,["httpBasicAuthConfig"]);f!=null&&r(e,["httpBasicAuthConfig"],f);const m=a(n,["oauthConfig"]);m!=null&&r(e,["oauthConfig"],m);const g=a(n,["oidcConfig"]);return g!=null&&r(e,["oidcConfig"],g),e}function _C(n){const e={};if(a(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(n,["data"]);i!=null&&r(e,["data"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function xC(n){const e={},i=a(n,["displayName"]);i!=null&&r(e,["displayName"],i);const l=a(n,["data"]);l!=null&&r(e,["data"],l);const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function ya(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["displayName"]);l!=null&&r(e,["displayName"],l);const c=a(n,["model"]);c!=null&&r(e,["model"],c);const f=a(n,["createTime"]);f!=null&&r(e,["createTime"],f);const m=a(n,["updateTime"]);m!=null&&r(e,["updateTime"],m);const g=a(n,["expireTime"]);g!=null&&r(e,["expireTime"],g);const y=a(n,["usageMetadata"]);return y!=null&&r(e,["usageMetadata"],y),e}function va(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["displayName"]);l!=null&&r(e,["displayName"],l);const c=a(n,["model"]);c!=null&&r(e,["model"],c);const f=a(n,["createTime"]);f!=null&&r(e,["createTime"],f);const m=a(n,["updateTime"]);m!=null&&r(e,["updateTime"],m);const g=a(n,["expireTime"]);g!=null&&r(e,["expireTime"],g);const y=a(n,["usageMetadata"]);return y!=null&&r(e,["usageMetadata"],y),e}function MC(n){const e={},i=a(n,["environment"]);i!=null&&r(e,["environment"],i);const l=a(n,["excludedPredefinedFunctions"]);return l!=null&&r(e,["excludedPredefinedFunctions"],l),e}function NC(n){const e={},i=a(n,["environment"]);i!=null&&r(e,["environment"],i);const l=a(n,["excludedPredefinedFunctions"]);return l!=null&&r(e,["excludedPredefinedFunctions"],l),e}function jm(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>cS(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function eh(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>fS(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function RC(n,e){const i={},l=a(n,["ttl"]);e!==void 0&&l!=null&&r(e,["ttl"],l);const c=a(n,["expireTime"]);e!==void 0&&c!=null&&r(e,["expireTime"],c);const f=a(n,["displayName"]);e!==void 0&&f!=null&&r(e,["displayName"],f);const m=a(n,["contents"]);if(e!==void 0&&m!=null){let v=Hn(m);Array.isArray(v)&&(v=v.map(C=>jm(C))),r(e,["contents"],v)}const g=a(n,["systemInstruction"]);e!==void 0&&g!=null&&r(e,["systemInstruction"],jm(dn(g)));const y=a(n,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(C=>gS(C))),r(e,["tools"],v)}const h=a(n,["toolConfig"]);if(e!==void 0&&h!=null&&r(e,["toolConfig"],mS(h)),a(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return i}function IC(n,e){const i={},l=a(n,["ttl"]);e!==void 0&&l!=null&&r(e,["ttl"],l);const c=a(n,["expireTime"]);e!==void 0&&c!=null&&r(e,["expireTime"],c);const f=a(n,["displayName"]);e!==void 0&&f!=null&&r(e,["displayName"],f);const m=a(n,["contents"]);if(e!==void 0&&m!=null){let C=Hn(m);Array.isArray(C)&&(C=C.map(E=>eh(E))),r(e,["contents"],C)}const g=a(n,["systemInstruction"]);e!==void 0&&g!=null&&r(e,["systemInstruction"],eh(dn(g)));const y=a(n,["tools"]);if(e!==void 0&&y!=null){let C=y;Array.isArray(C)&&(C=C.map(E=>yS(E))),r(e,["tools"],C)}const h=a(n,["toolConfig"]);e!==void 0&&h!=null&&r(e,["toolConfig"],hS(h));const v=a(n,["kmsKeyName"]);return e!==void 0&&v!=null&&r(e,["encryption_spec","kmsKeyName"],v),i}function wC(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["model"],Rh(n,l));const c=a(e,["config"]);return c!=null&&RC(c,i),i}function DC(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["model"],Rh(n,l));const c=a(e,["config"]);return c!=null&&IC(c,i),i}function bC(n,e){const i={},l=a(e,["name"]);return l!=null&&r(i,["_url","name"],Co(n,l)),i}function kC(n,e){const i={},l=a(e,["name"]);return l!=null&&r(i,["_url","name"],Co(n,l)),i}function UC(n){const e={},i=a(n,["sdkHttpResponse"]);return i!=null&&r(e,["sdkHttpResponse"],i),e}function LC(n){const e={},i=a(n,["sdkHttpResponse"]);return i!=null&&r(e,["sdkHttpResponse"],i),e}function VC(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["dynamicThreshold"]);return l!=null&&r(e,["dynamicThreshold"],l),e}function BC(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["dynamicThreshold"]);return l!=null&&r(e,["dynamicThreshold"],l),e}function qC(n){const e={},i=a(n,["excludeDomains"]);return i!=null&&r(e,["excludeDomains"],i),e}function PC(n){const e={};if(a(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(n,["fileUri"]);i!=null&&r(e,["fileUri"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function GC(n){const e={},i=a(n,["displayName"]);i!=null&&r(e,["displayName"],i);const l=a(n,["fileUri"]);l!=null&&r(e,["fileUri"],l);const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function HC(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function zC(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function OC(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["allowedFunctionNames"]);return l!=null&&r(e,["allowedFunctionNames"],l),e}function FC(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["allowedFunctionNames"]);return l!=null&&r(e,["allowedFunctionNames"],l),e}function JC(n){const e={},i=a(n,["behavior"]);i!=null&&r(e,["behavior"],i);const l=a(n,["description"]);l!=null&&r(e,["description"],l);const c=a(n,["name"]);c!=null&&r(e,["name"],c);const f=a(n,["parameters"]);f!=null&&r(e,["parameters"],f);const m=a(n,["parametersJsonSchema"]);m!=null&&r(e,["parametersJsonSchema"],m);const g=a(n,["response"]);g!=null&&r(e,["response"],g);const y=a(n,["responseJsonSchema"]);return y!=null&&r(e,["responseJsonSchema"],y),e}function YC(n){const e={};if(a(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=a(n,["description"]);i!=null&&r(e,["description"],i);const l=a(n,["name"]);l!=null&&r(e,["name"],l);const c=a(n,["parameters"]);c!=null&&r(e,["parameters"],c);const f=a(n,["parametersJsonSchema"]);f!=null&&r(e,["parametersJsonSchema"],f);const m=a(n,["response"]);m!=null&&r(e,["response"],m);const g=a(n,["responseJsonSchema"]);return g!=null&&r(e,["responseJsonSchema"],g),e}function $C(n,e){const i={},l=a(e,["name"]);return l!=null&&r(i,["_url","name"],Co(n,l)),i}function KC(n,e){const i={},l=a(e,["name"]);return l!=null&&r(i,["_url","name"],Co(n,l)),i}function XC(n){const e={},i=a(n,["authConfig"]);return i!=null&&r(e,["authConfig"],AC(i)),e}function QC(n){const e={},i=a(n,["dynamicRetrievalConfig"]);return i!=null&&r(e,["dynamicRetrievalConfig"],VC(i)),e}function ZC(n){const e={},i=a(n,["dynamicRetrievalConfig"]);return i!=null&&r(e,["dynamicRetrievalConfig"],BC(i)),e}function WC(n){const e={},i=a(n,["timeRangeFilter"]);if(i!=null&&r(e,["timeRangeFilter"],eS(i)),a(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function jC(n){const e={},i=a(n,["timeRangeFilter"]);i!=null&&r(e,["timeRangeFilter"],tS(i));const l=a(n,["excludeDomains"]);return l!=null&&r(e,["excludeDomains"],l),e}function eS(n){const e={},i=a(n,["startTime"]);i!=null&&r(e,["startTime"],i);const l=a(n,["endTime"]);return l!=null&&r(e,["endTime"],l),e}function tS(n){const e={},i=a(n,["startTime"]);i!=null&&r(e,["startTime"],i);const l=a(n,["endTime"]);return l!=null&&r(e,["endTime"],l),e}function nS(n){const e={},i=a(n,["latitude"]);i!=null&&r(e,["latitude"],i);const l=a(n,["longitude"]);return l!=null&&r(e,["longitude"],l),e}function oS(n){const e={},i=a(n,["latitude"]);i!=null&&r(e,["latitude"],i);const l=a(n,["longitude"]);return l!=null&&r(e,["longitude"],l),e}function iS(n,e){const i={},l=a(n,["pageSize"]);e!==void 0&&l!=null&&r(e,["_query","pageSize"],l);const c=a(n,["pageToken"]);return e!==void 0&&c!=null&&r(e,["_query","pageToken"],c),i}function lS(n,e){const i={},l=a(n,["pageSize"]);e!==void 0&&l!=null&&r(e,["_query","pageSize"],l);const c=a(n,["pageToken"]);return e!==void 0&&c!=null&&r(e,["_query","pageToken"],c),i}function sS(n){const e={},i=a(n,["config"]);return i!=null&&iS(i,e),e}function aS(n){const e={},i=a(n,["config"]);return i!=null&&lS(i,e),e}function rS(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["nextPageToken"]);l!=null&&r(e,["nextPageToken"],l);const c=a(n,["cachedContents"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>ya(m))),r(e,["cachedContents"],f)}return e}function uS(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["nextPageToken"]);l!=null&&r(e,["nextPageToken"],l);const c=a(n,["cachedContents"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>va(m))),r(e,["cachedContents"],f)}return e}function cS(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],_S(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],_C(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],PC(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],HC(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function fS(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],xS(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],xC(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],GC(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],zC(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function dS(n){const e={},i=a(n,["latLng"]);i!=null&&r(e,["latLng"],nS(i));const l=a(n,["languageCode"]);return l!=null&&r(e,["languageCode"],l),e}function pS(n){const e={},i=a(n,["latLng"]);i!=null&&r(e,["latLng"],oS(i));const l=a(n,["languageCode"]);return l!=null&&r(e,["languageCode"],l),e}function mS(n){const e={},i=a(n,["functionCallingConfig"]);i!=null&&r(e,["functionCallingConfig"],OC(i));const l=a(n,["retrievalConfig"]);return l!=null&&r(e,["retrievalConfig"],dS(l)),e}function hS(n){const e={},i=a(n,["functionCallingConfig"]);i!=null&&r(e,["functionCallingConfig"],FC(i));const l=a(n,["retrievalConfig"]);return l!=null&&r(e,["retrievalConfig"],pS(l)),e}function gS(n){const e={},i=a(n,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>JC(h))),r(e,["functionDeclarations"],y)}if(a(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=a(n,["googleSearch"]);l!=null&&r(e,["googleSearch"],WC(l));const c=a(n,["googleSearchRetrieval"]);if(c!=null&&r(e,["googleSearchRetrieval"],QC(c)),a(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(n,["urlContext"])!=null&&r(e,["urlContext"],ES());const m=a(n,["computerUse"]);m!=null&&r(e,["computerUse"],MC(m));const g=a(n,["codeExecution"]);return g!=null&&r(e,["codeExecution"],g),e}function yS(n){const e={},i=a(n,["functionDeclarations"]);if(i!=null){let C=i;Array.isArray(C)&&(C=C.map(E=>YC(E))),r(e,["functionDeclarations"],C)}const l=a(n,["retrieval"]);l!=null&&r(e,["retrieval"],l);const c=a(n,["googleSearch"]);c!=null&&r(e,["googleSearch"],jC(c));const f=a(n,["googleSearchRetrieval"]);f!=null&&r(e,["googleSearchRetrieval"],ZC(f));const m=a(n,["enterpriseWebSearch"]);m!=null&&r(e,["enterpriseWebSearch"],qC(m));const g=a(n,["googleMaps"]);g!=null&&r(e,["googleMaps"],XC(g)),a(n,["urlContext"])!=null&&r(e,["urlContext"],AS());const h=a(n,["computerUse"]);h!=null&&r(e,["computerUse"],NC(h));const v=a(n,["codeExecution"]);return v!=null&&r(e,["codeExecution"],v),e}function vS(n,e){const i={},l=a(n,["ttl"]);e!==void 0&&l!=null&&r(e,["ttl"],l);const c=a(n,["expireTime"]);return e!==void 0&&c!=null&&r(e,["expireTime"],c),i}function TS(n,e){const i={},l=a(n,["ttl"]);e!==void 0&&l!=null&&r(e,["ttl"],l);const c=a(n,["expireTime"]);return e!==void 0&&c!=null&&r(e,["expireTime"],c),i}function CS(n,e){const i={},l=a(e,["name"]);l!=null&&r(i,["_url","name"],Co(n,l));const c=a(e,["config"]);return c!=null&&vS(c,i),i}function SS(n,e){const i={},l=a(e,["name"]);l!=null&&r(i,["_url","name"],Co(n,l));const c=a(e,["config"]);return c!=null&&TS(c,i),i}function ES(){return{}}function AS(){return{}}function _S(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function xS(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class MS extends di{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new es(fi.PAGED_ITEM_CACHED_CONTENTS,l=>this.listInternal(l),await this.listInternal(i),i)}async create(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=DC(this.apiClient,e);return g=ye("cachedContents",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>va(v))}else{const h=wC(this.apiClient,e);return g=ye("cachedContents",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>ya(v))}}async get(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=KC(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>va(v))}else{const h=$C(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>ya(v))}}async delete(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=kC(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=LC(v),E=new $m;return Object.assign(E,C),E})}else{const h=bC(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=UC(v),E=new $m;return Object.assign(E,C),E})}}async update(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=SS(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>va(v))}else{const h=CS(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>ya(v))}}async listInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=aS(e);return g=ye("cachedContents",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=uS(v),E=new Km;return Object.assign(E,C),E})}else{const h=sS(e);return g=ye("cachedContents",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=rS(v),E=new Km;return Object.assign(E,C),E})}}}function th(n){var e=typeof Symbol=="function"&&Symbol.iterator,i=e&&n[e],l=0;if(i)return i.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&l>=n.length&&(n=void 0),{value:n&&n[l++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ut(n){return this instanceof Ut?(this.v=n,this):new Ut(n)}function Wi(n,e,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=i.apply(n,e||[]),c,f=[];return c=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),g("next"),g("throw"),g("return",m),c[Symbol.asyncIterator]=function(){return this},c;function m(x){return function(U){return Promise.resolve(U).then(x,C)}}function g(x,U){l[x]&&(c[x]=function(O){return new Promise(function(q,z){f.push([x,O,q,z])>1||y(x,O)})},U&&(c[x]=U(c[x])))}function y(x,U){try{h(l[x](U))}catch(O){E(f[0][3],O)}}function h(x){x.value instanceof Ut?Promise.resolve(x.value.v).then(v,C):E(f[0][2],x)}function v(x){y("next",x)}function C(x){y("throw",x)}function E(x,U){x(U),f.shift(),f.length&&y(f[0][0],f[0][1])}}function jl(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],i;return e?e.call(n):(n=typeof th=="function"?th(n):n[Symbol.iterator](),i={},l("next"),l("throw"),l("return"),i[Symbol.asyncIterator]=function(){return this},i);function l(f){i[f]=n[f]&&function(m){return new Promise(function(g,y){m=n[f](m),c(g,y,m.done,m.value)})}}function c(f,m,g,y){Promise.resolve(y).then(function(h){f({value:h,done:g})},m)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NS(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const i=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return i===void 0?!1:Oh(i)}function Oh(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function RS(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function nh(n){if(n===void 0||n.length===0)return[];const e=[],i=n.length;let l=0;for(;l<i;)if(n[l].role==="user")e.push(n[l]),l++;else{const c=[];let f=!0;for(;l<i&&n[l].role==="model";)c.push(n[l]),f&&!Oh(n[l])&&(f=!1),l++;f?e.push(...c):e.pop()}return e}class IS{constructor(e,i){this.modelsModule=e,this.apiClient=i}create(e){return new wS(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class wS{constructor(e,i,l,c={},f=[]){this.apiClient=e,this.modelsModule=i,this.model=l,this.config=c,this.history=f,this.sendPromise=Promise.resolve(),RS(f)}async sendMessage(e){var i;await this.sendPromise;const l=dn(e.message),c=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(l),config:(i=e.config)!==null&&i!==void 0?i:this.config});return this.sendPromise=(async()=>{var f,m,g;const y=await c,h=(m=(f=y.candidates)===null||f===void 0?void 0:f[0])===null||m===void 0?void 0:m.content,v=y.automaticFunctionCallingHistory,C=this.getHistory(!0).length;let E=[];v!=null&&(E=(g=v.slice(C))!==null&&g!==void 0?g:[]);const x=h?[h]:[];this.recordHistory(l,x,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),c}async sendMessageStream(e){var i;await this.sendPromise;const l=dn(e.message),c=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(l),config:(i=e.config)!==null&&i!==void 0?i:this.config});this.sendPromise=c.then(()=>{}).catch(()=>{});const f=await c;return this.processStreamResponse(f,l)}getHistory(e=!1){const i=e?nh(this.history):this.history;return structuredClone(i)}processStreamResponse(e,i){var l,c;return Wi(this,arguments,function*(){var m,g,y,h;const v=[];try{for(var C=!0,E=jl(e),x;x=yield Ut(E.next()),m=x.done,!m;C=!0){h=x.value,C=!1;const U=h;if(NS(U)){const O=(c=(l=U.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content;O!==void 0&&v.push(O)}yield yield Ut(U)}}catch(U){g={error:U}}finally{try{!C&&!m&&(y=E.return)&&(yield Ut(y.call(E)))}finally{if(g)throw g.error}}this.recordHistory(i,v)})}recordHistory(e,i,l){let c=[];i.length>0&&i.every(f=>f.role!==void 0)?c=i:c.push({role:"model",parts:[]}),l&&l.length>0?this.history.push(...nh(l)):this.history.push(e),this.history.push(...c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ea extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Ea.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function DS(n){const e={},i=a(n,["file"]);return i!=null&&r(e,["file"],BS(i)),e}function bS(n){const e={},i=a(n,["sdkHttpResponse"]);return i!=null&&r(e,["sdkHttpResponse"],i),e}function kS(n){const e={},i=a(n,["name"]);return i!=null&&r(e,["_url","file"],Uh(i)),e}function US(n){const e={},i=a(n,["sdkHttpResponse"]);return i!=null&&r(e,["sdkHttpResponse"],i),e}function Yu(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["displayName"]);l!=null&&r(e,["displayName"],l);const c=a(n,["mimeType"]);c!=null&&r(e,["mimeType"],c);const f=a(n,["sizeBytes"]);f!=null&&r(e,["sizeBytes"],f);const m=a(n,["createTime"]);m!=null&&r(e,["createTime"],m);const g=a(n,["expirationTime"]);g!=null&&r(e,["expirationTime"],g);const y=a(n,["updateTime"]);y!=null&&r(e,["updateTime"],y);const h=a(n,["sha256Hash"]);h!=null&&r(e,["sha256Hash"],h);const v=a(n,["uri"]);v!=null&&r(e,["uri"],v);const C=a(n,["downloadUri"]);C!=null&&r(e,["downloadUri"],C);const E=a(n,["state"]);E!=null&&r(e,["state"],E);const x=a(n,["source"]);x!=null&&r(e,["source"],x);const U=a(n,["videoMetadata"]);U!=null&&r(e,["videoMetadata"],U);const O=a(n,["error"]);return O!=null&&r(e,["error"],LS(O)),e}function LS(n){const e={},i=a(n,["details"]);i!=null&&r(e,["details"],i);const l=a(n,["message"]);l!=null&&r(e,["message"],l);const c=a(n,["code"]);return c!=null&&r(e,["code"],c),e}function VS(n){const e={},i=a(n,["details"]);i!=null&&r(e,["details"],i);const l=a(n,["message"]);l!=null&&r(e,["message"],l);const c=a(n,["code"]);return c!=null&&r(e,["code"],c),e}function BS(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["displayName"]);l!=null&&r(e,["displayName"],l);const c=a(n,["mimeType"]);c!=null&&r(e,["mimeType"],c);const f=a(n,["sizeBytes"]);f!=null&&r(e,["sizeBytes"],f);const m=a(n,["createTime"]);m!=null&&r(e,["createTime"],m);const g=a(n,["expirationTime"]);g!=null&&r(e,["expirationTime"],g);const y=a(n,["updateTime"]);y!=null&&r(e,["updateTime"],y);const h=a(n,["sha256Hash"]);h!=null&&r(e,["sha256Hash"],h);const v=a(n,["uri"]);v!=null&&r(e,["uri"],v);const C=a(n,["downloadUri"]);C!=null&&r(e,["downloadUri"],C);const E=a(n,["state"]);E!=null&&r(e,["state"],E);const x=a(n,["source"]);x!=null&&r(e,["source"],x);const U=a(n,["videoMetadata"]);U!=null&&r(e,["videoMetadata"],U);const O=a(n,["error"]);return O!=null&&r(e,["error"],VS(O)),e}function qS(n){const e={},i=a(n,["name"]);return i!=null&&r(e,["_url","file"],Uh(i)),e}function PS(n,e){const i={},l=a(n,["pageSize"]);e!==void 0&&l!=null&&r(e,["_query","pageSize"],l);const c=a(n,["pageToken"]);return e!==void 0&&c!=null&&r(e,["_query","pageToken"],c),i}function GS(n){const e={},i=a(n,["config"]);return i!=null&&PS(i,e),e}function HS(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["nextPageToken"]);l!=null&&r(e,["nextPageToken"],l);const c=a(n,["files"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Yu(m))),r(e,["files"],f)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zS extends di{constructor(e){super(),this.apiClient=e,this.list=async(i={})=>new es(fi.PAGED_ITEM_FILES,l=>this.listInternal(l),await this.listInternal(i),i)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(i=>Yu(i))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=GS(e);return f=ye("files",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const h=HS(y),v=new Yv;return Object.assign(v,h),v})}}async createInternal(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=DS(e);return f=ye("upload/v1beta/files",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const h=bS(y),v=new $v;return Object.assign(v,h),v})}}async get(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=qS(e);return f=ye("files/{file}",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>Yu(y))}}async delete(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=kS(e);return f=ye("files/{file}",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const h=US(y),v=new Kv;return Object.assign(v,h),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OS(){return{}}function FS(){return{}}function JS(){return{}}function YS(){return{}}function $S(n){const e={},i=a(n,["apiKeyString"]);return i!=null&&r(e,["apiKeyString"],i),e}function KS(n){const e={},i=a(n,["data"]);i!=null&&r(e,["data"],i);const l=a(n,["mimeType"]);l!=null&&r(e,["mimeType"],l);const c=a(n,["sourceMetadata"]);return c!=null&&r(e,["sourceMetadata"],G0(c)),e}function oh(){return{}}function ih(){return{}}function XS(n){const e={},i=a(n,["apiKeyConfig"]);i!=null&&r(e,["apiKeyConfig"],$S(i));const l=a(n,["authType"]);l!=null&&r(e,["authType"],l);const c=a(n,["googleServiceAccountConfig"]);c!=null&&r(e,["googleServiceAccountConfig"],c);const f=a(n,["httpBasicAuthConfig"]);f!=null&&r(e,["httpBasicAuthConfig"],f);const m=a(n,["oauthConfig"]);m!=null&&r(e,["oauthConfig"],m);const g=a(n,["oidcConfig"]);return g!=null&&r(e,["oidcConfig"],g),e}function QS(n){const e={},i=a(n,["disabled"]);i!=null&&r(e,["disabled"],i);const l=a(n,["startOfSpeechSensitivity"]);l!=null&&r(e,["startOfSpeechSensitivity"],l);const c=a(n,["endOfSpeechSensitivity"]);c!=null&&r(e,["endOfSpeechSensitivity"],c);const f=a(n,["prefixPaddingMs"]);f!=null&&r(e,["prefixPaddingMs"],f);const m=a(n,["silenceDurationMs"]);return m!=null&&r(e,["silenceDurationMs"],m),e}function ZS(n){const e={},i=a(n,["disabled"]);i!=null&&r(e,["disabled"],i);const l=a(n,["startOfSpeechSensitivity"]);l!=null&&r(e,["startOfSpeechSensitivity"],l);const c=a(n,["endOfSpeechSensitivity"]);c!=null&&r(e,["endOfSpeechSensitivity"],c);const f=a(n,["prefixPaddingMs"]);f!=null&&r(e,["prefixPaddingMs"],f);const m=a(n,["silenceDurationMs"]);return m!=null&&r(e,["silenceDurationMs"],m),e}function WS(n){const e={},i=a(n,["data"]);i!=null&&r(e,["data"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function jS(n){const e={},i=a(n,["displayName"]);i!=null&&r(e,["displayName"],i);const l=a(n,["data"]);l!=null&&r(e,["data"],l);const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function e0(n){const e={};if(a(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(n,["data"]);i!=null&&r(e,["data"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function t0(n){const e={},i=a(n,["displayName"]);i!=null&&r(e,["displayName"],i);const l=a(n,["data"]);l!=null&&r(e,["data"],l);const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function n0(n){const e={},i=a(n,["environment"]);i!=null&&r(e,["environment"],i);const l=a(n,["excludedPredefinedFunctions"]);return l!=null&&r(e,["excludedPredefinedFunctions"],l),e}function o0(n){const e={},i=a(n,["environment"]);i!=null&&r(e,["environment"],i);const l=a(n,["excludedPredefinedFunctions"]);return l!=null&&r(e,["excludedPredefinedFunctions"],l),e}function i0(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>iE(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function l0(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>lE(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function s0(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>sE(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function a0(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>aE(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function r0(n){const e={},i=a(n,["triggerTokens"]);i!=null&&r(e,["triggerTokens"],i);const l=a(n,["slidingWindow"]);return l!=null&&r(e,["slidingWindow"],gE(l)),e}function u0(n){const e={},i=a(n,["triggerTokens"]);i!=null&&r(e,["triggerTokens"],i);const l=a(n,["slidingWindow"]);return l!=null&&r(e,["slidingWindow"],yE(l)),e}function c0(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["dynamicThreshold"]);return l!=null&&r(e,["dynamicThreshold"],l),e}function f0(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["dynamicThreshold"]);return l!=null&&r(e,["dynamicThreshold"],l),e}function d0(n){const e={},i=a(n,["excludeDomains"]);return i!=null&&r(e,["excludeDomains"],i),e}function p0(n){const e={},i=a(n,["fileUri"]);i!=null&&r(e,["fileUri"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function m0(n){const e={},i=a(n,["displayName"]);i!=null&&r(e,["displayName"],i);const l=a(n,["fileUri"]);l!=null&&r(e,["fileUri"],l);const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function h0(n){const e={};if(a(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(n,["fileUri"]);i!=null&&r(e,["fileUri"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function g0(n){const e={},i=a(n,["displayName"]);i!=null&&r(e,["displayName"],i);const l=a(n,["fileUri"]);l!=null&&r(e,["fileUri"],l);const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function Fh(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function Jh(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function y0(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function v0(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function T0(n){const e={},i=a(n,["behavior"]);i!=null&&r(e,["behavior"],i);const l=a(n,["description"]);l!=null&&r(e,["description"],l);const c=a(n,["name"]);c!=null&&r(e,["name"],c);const f=a(n,["parameters"]);f!=null&&r(e,["parameters"],f);const m=a(n,["parametersJsonSchema"]);m!=null&&r(e,["parametersJsonSchema"],m);const g=a(n,["response"]);g!=null&&r(e,["response"],g);const y=a(n,["responseJsonSchema"]);return y!=null&&r(e,["responseJsonSchema"],y),e}function C0(n){const e={};if(a(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=a(n,["description"]);i!=null&&r(e,["description"],i);const l=a(n,["name"]);l!=null&&r(e,["name"],l);const c=a(n,["parameters"]);c!=null&&r(e,["parameters"],c);const f=a(n,["parametersJsonSchema"]);f!=null&&r(e,["parametersJsonSchema"],f);const m=a(n,["response"]);m!=null&&r(e,["response"],m);const g=a(n,["responseJsonSchema"]);return g!=null&&r(e,["responseJsonSchema"],g),e}function S0(n){const e={},i=a(n,["authConfig"]);return i!=null&&r(e,["authConfig"],XS(i)),e}function E0(n){const e={},i=a(n,["dynamicRetrievalConfig"]);return i!=null&&r(e,["dynamicRetrievalConfig"],c0(i)),e}function A0(n){const e={},i=a(n,["dynamicRetrievalConfig"]);return i!=null&&r(e,["dynamicRetrievalConfig"],f0(i)),e}function _0(n){const e={},i=a(n,["timeRangeFilter"]);if(i!=null&&r(e,["timeRangeFilter"],M0(i)),a(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function x0(n){const e={},i=a(n,["timeRangeFilter"]);i!=null&&r(e,["timeRangeFilter"],N0(i));const l=a(n,["excludeDomains"]);return l!=null&&r(e,["excludeDomains"],l),e}function M0(n){const e={},i=a(n,["startTime"]);i!=null&&r(e,["startTime"],i);const l=a(n,["endTime"]);return l!=null&&r(e,["endTime"],l),e}function N0(n){const e={},i=a(n,["startTime"]);i!=null&&r(e,["startTime"],i);const l=a(n,["endTime"]);return l!=null&&r(e,["endTime"],l),e}function R0(n,e){const i={},l=a(n,["generationConfig"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig"],l);const c=a(n,["responseModalities"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","responseModalities"],c);const f=a(n,["temperature"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","temperature"],f);const m=a(n,["topP"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","topP"],m);const g=a(n,["topK"]);e!==void 0&&g!=null&&r(e,["setup","generationConfig","topK"],g);const y=a(n,["maxOutputTokens"]);e!==void 0&&y!=null&&r(e,["setup","generationConfig","maxOutputTokens"],y);const h=a(n,["mediaResolution"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","mediaResolution"],h);const v=a(n,["seed"]);e!==void 0&&v!=null&&r(e,["setup","generationConfig","seed"],v);const C=a(n,["speechConfig"]);e!==void 0&&C!=null&&r(e,["setup","generationConfig","speechConfig"],TE(oc(C)));const E=a(n,["thinkingConfig"]);e!==void 0&&E!=null&&r(e,["setup","generationConfig","thinkingConfig"],SE(E));const x=a(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=a(n,["systemInstruction"]);e!==void 0&&U!=null&&r(e,["setup","systemInstruction"],s0(dn(U)));const O=a(n,["tools"]);if(e!==void 0&&O!=null){let fe=tl(O);Array.isArray(fe)&&(fe=fe.map(oe=>AE(el(oe)))),r(e,["setup","tools"],fe)}const q=a(n,["sessionResumption"]);e!==void 0&&q!=null&&r(e,["setup","sessionResumption"],mE(q));const z=a(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&r(e,["setup","inputAudioTranscription"],oh());const F=a(n,["outputAudioTranscription"]);e!==void 0&&F!=null&&r(e,["setup","outputAudioTranscription"],oh());const Z=a(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&r(e,["setup","realtimeInputConfig"],dE(Z));const ee=a(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&r(e,["setup","contextWindowCompression"],r0(ee));const ce=a(n,["proactivity"]);return e!==void 0&&ce!=null&&r(e,["setup","proactivity"],cE(ce)),i}function I0(n,e){const i={},l=a(n,["generationConfig"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig"],l);const c=a(n,["responseModalities"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","responseModalities"],c);const f=a(n,["temperature"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","temperature"],f);const m=a(n,["topP"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","topP"],m);const g=a(n,["topK"]);e!==void 0&&g!=null&&r(e,["setup","generationConfig","topK"],g);const y=a(n,["maxOutputTokens"]);e!==void 0&&y!=null&&r(e,["setup","generationConfig","maxOutputTokens"],y);const h=a(n,["mediaResolution"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","mediaResolution"],h);const v=a(n,["seed"]);e!==void 0&&v!=null&&r(e,["setup","generationConfig","seed"],v);const C=a(n,["speechConfig"]);e!==void 0&&C!=null&&r(e,["setup","generationConfig","speechConfig"],CE(oc(C)));const E=a(n,["thinkingConfig"]);e!==void 0&&E!=null&&r(e,["setup","generationConfig","thinkingConfig"],EE(E));const x=a(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=a(n,["systemInstruction"]);e!==void 0&&U!=null&&r(e,["setup","systemInstruction"],a0(dn(U)));const O=a(n,["tools"]);if(e!==void 0&&O!=null){let fe=tl(O);Array.isArray(fe)&&(fe=fe.map(oe=>_E(el(oe)))),r(e,["setup","tools"],fe)}const q=a(n,["sessionResumption"]);e!==void 0&&q!=null&&r(e,["setup","sessionResumption"],hE(q));const z=a(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&r(e,["setup","inputAudioTranscription"],ih());const F=a(n,["outputAudioTranscription"]);e!==void 0&&F!=null&&r(e,["setup","outputAudioTranscription"],ih());const Z=a(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&r(e,["setup","realtimeInputConfig"],pE(Z));const ee=a(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&r(e,["setup","contextWindowCompression"],u0(ee));const ce=a(n,["proactivity"]);return e!==void 0&&ce!=null&&r(e,["setup","proactivity"],fE(ce)),i}function w0(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["setup","model"],gt(n,l));const c=a(e,["config"]);return c!=null&&r(i,["config"],R0(c,i)),i}function D0(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["setup","model"],gt(n,l));const c=a(e,["config"]);return c!=null&&r(i,["config"],I0(c,i)),i}function b0(n){const e={},i=a(n,["weightedPrompts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>VE(c))),r(e,["weightedPrompts"],l)}return e}function Yh(n){const e={},i=a(n,["weightedPrompts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Qh(c))),r(e,["weightedPrompts"],l)}return e}function $u(n){const e={},i=a(n,["setup"]);i!=null&&r(e,["setup"],$h(i));const l=a(n,["clientContent"]);l!=null&&r(e,["clientContent"],Yh(l));const c=a(n,["musicGenerationConfig"]);c!=null&&r(e,["musicGenerationConfig"],Kh(c));const f=a(n,["playbackControl"]);return f!=null&&r(e,["playbackControl"],f),e}function $h(n){const e={},i=a(n,["model"]);return i!=null&&r(e,["model"],i),e}function k0(n){const e={},i=a(n,["text"]);i!=null&&r(e,["text"],i);const l=a(n,["filteredReason"]);return l!=null&&r(e,["filteredReason"],l),e}function U0(n){const e={},i=a(n,["temperature"]);i!=null&&r(e,["temperature"],i);const l=a(n,["topK"]);l!=null&&r(e,["topK"],l);const c=a(n,["seed"]);c!=null&&r(e,["seed"],c);const f=a(n,["guidance"]);f!=null&&r(e,["guidance"],f);const m=a(n,["bpm"]);m!=null&&r(e,["bpm"],m);const g=a(n,["density"]);g!=null&&r(e,["density"],g);const y=a(n,["brightness"]);y!=null&&r(e,["brightness"],y);const h=a(n,["scale"]);h!=null&&r(e,["scale"],h);const v=a(n,["muteBass"]);v!=null&&r(e,["muteBass"],v);const C=a(n,["muteDrums"]);C!=null&&r(e,["muteDrums"],C);const E=a(n,["onlyBassAndDrums"]);E!=null&&r(e,["onlyBassAndDrums"],E);const x=a(n,["musicGenerationMode"]);return x!=null&&r(e,["musicGenerationMode"],x),e}function Kh(n){const e={},i=a(n,["temperature"]);i!=null&&r(e,["temperature"],i);const l=a(n,["topK"]);l!=null&&r(e,["topK"],l);const c=a(n,["seed"]);c!=null&&r(e,["seed"],c);const f=a(n,["guidance"]);f!=null&&r(e,["guidance"],f);const m=a(n,["bpm"]);m!=null&&r(e,["bpm"],m);const g=a(n,["density"]);g!=null&&r(e,["density"],g);const y=a(n,["brightness"]);y!=null&&r(e,["brightness"],y);const h=a(n,["scale"]);h!=null&&r(e,["scale"],h);const v=a(n,["muteBass"]);v!=null&&r(e,["muteBass"],v);const C=a(n,["muteDrums"]);C!=null&&r(e,["muteDrums"],C);const E=a(n,["onlyBassAndDrums"]);E!=null&&r(e,["onlyBassAndDrums"],E);const x=a(n,["musicGenerationMode"]);return x!=null&&r(e,["musicGenerationMode"],x),e}function L0(n){const e={},i=a(n,["audioChunks"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>KS(c))),r(e,["audioChunks"],l)}return e}function V0(n){const e={};a(n,["setupComplete"])!=null&&r(e,["setupComplete"],B0());const l=a(n,["serverContent"]);l!=null&&r(e,["serverContent"],L0(l));const c=a(n,["filteredPrompt"]);return c!=null&&r(e,["filteredPrompt"],k0(c)),e}function B0(){return{}}function q0(n){const e={},i=a(n,["musicGenerationConfig"]);return i!=null&&r(e,["musicGenerationConfig"],Kh(i)),e}function P0(n){const e={},i=a(n,["weightedPrompts"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Qh(c))),r(e,["weightedPrompts"],l)}return e}function G0(n){const e={},i=a(n,["clientContent"]);i!=null&&r(e,["clientContent"],b0(i));const l=a(n,["musicGenerationConfig"]);return l!=null&&r(e,["musicGenerationConfig"],U0(l)),e}function H0(n){const e={},i=a(n,["media"]);if(i!=null){let h=Ih(i);Array.isArray(h)&&(h=h.map(v=>v)),r(e,["mediaChunks"],h)}const l=a(n,["audio"]);l!=null&&r(e,["audio"],Dh(l));const c=a(n,["audioStreamEnd"]);c!=null&&r(e,["audioStreamEnd"],c);const f=a(n,["video"]);f!=null&&r(e,["video"],wh(f));const m=a(n,["text"]);return m!=null&&r(e,["text"],m),a(n,["activityStart"])!=null&&r(e,["activityStart"],JS()),a(n,["activityEnd"])!=null&&r(e,["activityEnd"],OS()),e}function z0(n){const e={},i=a(n,["media"]);if(i!=null){let h=Ih(i);Array.isArray(h)&&(h=h.map(v=>v)),r(e,["mediaChunks"],h)}const l=a(n,["audio"]);l!=null&&r(e,["audio"],Dh(l));const c=a(n,["audioStreamEnd"]);c!=null&&r(e,["audioStreamEnd"],c);const f=a(n,["video"]);f!=null&&r(e,["video"],wh(f));const m=a(n,["text"]);return m!=null&&r(e,["text"],m),a(n,["activityStart"])!=null&&r(e,["activityStart"],YS()),a(n,["activityEnd"])!=null&&r(e,["activityEnd"],FS()),e}function O0(n){const e={},i=a(n,["modelTurn"]);i!=null&&r(e,["modelTurn"],i0(i));const l=a(n,["turnComplete"]);l!=null&&r(e,["turnComplete"],l);const c=a(n,["interrupted"]);c!=null&&r(e,["interrupted"],c);const f=a(n,["groundingMetadata"]);f!=null&&r(e,["groundingMetadata"],f);const m=a(n,["generationComplete"]);m!=null&&r(e,["generationComplete"],m);const g=a(n,["inputTranscription"]);g!=null&&r(e,["inputTranscription"],lh(g));const y=a(n,["outputTranscription"]);y!=null&&r(e,["outputTranscription"],lh(y));const h=a(n,["urlContextMetadata"]);h!=null&&r(e,["urlContextMetadata"],xE(h));const v=a(n,["turnCompleteReason"]);v!=null&&r(e,["turnCompleteReason"],v);const C=a(n,["waitingForInput"]);return C!=null&&r(e,["waitingForInput"],C),e}function F0(n){const e={},i=a(n,["modelTurn"]);i!=null&&r(e,["modelTurn"],l0(i));const l=a(n,["turnComplete"]);l!=null&&r(e,["turnComplete"],l);const c=a(n,["interrupted"]);c!=null&&r(e,["interrupted"],c);const f=a(n,["groundingMetadata"]);f!=null&&r(e,["groundingMetadata"],f);const m=a(n,["generationComplete"]);m!=null&&r(e,["generationComplete"],m);const g=a(n,["inputTranscription"]);g!=null&&r(e,["inputTranscription"],sh(g));const y=a(n,["outputTranscription"]);y!=null&&r(e,["outputTranscription"],sh(y));const h=a(n,["turnCompleteReason"]);h!=null&&r(e,["turnCompleteReason"],h);const v=a(n,["waitingForInput"]);return v!=null&&r(e,["waitingForInput"],v),e}function J0(n){const e={},i=a(n,["timeLeft"]);return i!=null&&r(e,["timeLeft"],i),e}function Y0(n){const e={},i=a(n,["timeLeft"]);return i!=null&&r(e,["timeLeft"],i),e}function $0(n){const e={};a(n,["setupComplete"])!=null&&r(e,["setupComplete"],Z0());const l=a(n,["serverContent"]);l!=null&&r(e,["serverContent"],O0(l));const c=a(n,["toolCall"]);c!=null&&r(e,["toolCall"],tE(c));const f=a(n,["toolCallCancellation"]);f!=null&&r(e,["toolCallCancellation"],j0(f));const m=a(n,["usageMetadata"]);m!=null&&r(e,["usageMetadata"],IE(m));const g=a(n,["goAway"]);g!=null&&r(e,["goAway"],J0(g));const y=a(n,["sessionResumptionUpdate"]);return y!=null&&r(e,["sessionResumptionUpdate"],X0(y)),e}function K0(n){const e={},i=a(n,["setupComplete"]);i!=null&&r(e,["setupComplete"],W0(i));const l=a(n,["serverContent"]);l!=null&&r(e,["serverContent"],F0(l));const c=a(n,["toolCall"]);c!=null&&r(e,["toolCall"],nE(c));const f=a(n,["toolCallCancellation"]);f!=null&&r(e,["toolCallCancellation"],eE(f));const m=a(n,["usageMetadata"]);m!=null&&r(e,["usageMetadata"],wE(m));const g=a(n,["goAway"]);g!=null&&r(e,["goAway"],Y0(g));const y=a(n,["sessionResumptionUpdate"]);return y!=null&&r(e,["sessionResumptionUpdate"],Q0(y)),e}function X0(n){const e={},i=a(n,["newHandle"]);i!=null&&r(e,["newHandle"],i);const l=a(n,["resumable"]);l!=null&&r(e,["resumable"],l);const c=a(n,["lastConsumedClientMessageIndex"]);return c!=null&&r(e,["lastConsumedClientMessageIndex"],c),e}function Q0(n){const e={},i=a(n,["newHandle"]);i!=null&&r(e,["newHandle"],i);const l=a(n,["resumable"]);l!=null&&r(e,["resumable"],l);const c=a(n,["lastConsumedClientMessageIndex"]);return c!=null&&r(e,["lastConsumedClientMessageIndex"],c),e}function Z0(){return{}}function W0(n){const e={},i=a(n,["sessionId"]);return i!=null&&r(e,["sessionId"],i),e}function j0(n){const e={},i=a(n,["ids"]);return i!=null&&r(e,["ids"],i),e}function eE(n){const e={},i=a(n,["ids"]);return i!=null&&r(e,["ids"],i),e}function tE(n){const e={},i=a(n,["functionCalls"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Fh(c))),r(e,["functionCalls"],l)}return e}function nE(n){const e={},i=a(n,["functionCalls"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Jh(c))),r(e,["functionCalls"],l)}return e}function ha(n){const e={},i=a(n,["modality"]);i!=null&&r(e,["modality"],i);const l=a(n,["tokenCount"]);return l!=null&&r(e,["tokenCount"],l),e}function ga(n){const e={},i=a(n,["modality"]);i!=null&&r(e,["modality"],i);const l=a(n,["tokenCount"]);return l!=null&&r(e,["tokenCount"],l),e}function oE(n){const e={},i=a(n,["speakerVoiceConfigs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>vE(c))),r(e,["speakerVoiceConfigs"],l)}return e}function iE(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],DE(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],WS(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],p0(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],Fh(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function lE(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],bE(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],jS(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],m0(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],Jh(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function sE(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],kE(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],e0(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],h0(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],y0(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function aE(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],UE(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],t0(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],g0(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],v0(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function rE(n){const e={},i=a(n,["voiceName"]);return i!=null&&r(e,["voiceName"],i),e}function uE(n){const e={},i=a(n,["voiceName"]);return i!=null&&r(e,["voiceName"],i),e}function cE(n){const e={},i=a(n,["proactiveAudio"]);return i!=null&&r(e,["proactiveAudio"],i),e}function fE(n){const e={},i=a(n,["proactiveAudio"]);return i!=null&&r(e,["proactiveAudio"],i),e}function dE(n){const e={},i=a(n,["automaticActivityDetection"]);i!=null&&r(e,["automaticActivityDetection"],QS(i));const l=a(n,["activityHandling"]);l!=null&&r(e,["activityHandling"],l);const c=a(n,["turnCoverage"]);return c!=null&&r(e,["turnCoverage"],c),e}function pE(n){const e={},i=a(n,["automaticActivityDetection"]);i!=null&&r(e,["automaticActivityDetection"],ZS(i));const l=a(n,["activityHandling"]);l!=null&&r(e,["activityHandling"],l);const c=a(n,["turnCoverage"]);return c!=null&&r(e,["turnCoverage"],c),e}function mE(n){const e={},i=a(n,["handle"]);if(i!=null&&r(e,["handle"],i),a(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function hE(n){const e={},i=a(n,["handle"]);i!=null&&r(e,["handle"],i);const l=a(n,["transparent"]);return l!=null&&r(e,["transparent"],l),e}function gE(n){const e={},i=a(n,["targetTokens"]);return i!=null&&r(e,["targetTokens"],i),e}function yE(n){const e={},i=a(n,["targetTokens"]);return i!=null&&r(e,["targetTokens"],i),e}function vE(n){const e={},i=a(n,["speaker"]);i!=null&&r(e,["speaker"],i);const l=a(n,["voiceConfig"]);return l!=null&&r(e,["voiceConfig"],Xh(l)),e}function TE(n){const e={},i=a(n,["voiceConfig"]);i!=null&&r(e,["voiceConfig"],Xh(i));const l=a(n,["multiSpeakerVoiceConfig"]);l!=null&&r(e,["multiSpeakerVoiceConfig"],oE(l));const c=a(n,["languageCode"]);return c!=null&&r(e,["languageCode"],c),e}function CE(n){const e={},i=a(n,["voiceConfig"]);if(i!=null&&r(e,["voiceConfig"],LE(i)),a(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const l=a(n,["languageCode"]);return l!=null&&r(e,["languageCode"],l),e}function SE(n){const e={},i=a(n,["includeThoughts"]);i!=null&&r(e,["includeThoughts"],i);const l=a(n,["thinkingBudget"]);return l!=null&&r(e,["thinkingBudget"],l),e}function EE(n){const e={},i=a(n,["includeThoughts"]);i!=null&&r(e,["includeThoughts"],i);const l=a(n,["thinkingBudget"]);return l!=null&&r(e,["thinkingBudget"],l),e}function AE(n){const e={},i=a(n,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>T0(h))),r(e,["functionDeclarations"],y)}if(a(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=a(n,["googleSearch"]);l!=null&&r(e,["googleSearch"],_0(l));const c=a(n,["googleSearchRetrieval"]);if(c!=null&&r(e,["googleSearchRetrieval"],E0(c)),a(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(n,["urlContext"])!=null&&r(e,["urlContext"],ME());const m=a(n,["computerUse"]);m!=null&&r(e,["computerUse"],n0(m));const g=a(n,["codeExecution"]);return g!=null&&r(e,["codeExecution"],g),e}function _E(n){const e={},i=a(n,["functionDeclarations"]);if(i!=null){let C=i;Array.isArray(C)&&(C=C.map(E=>C0(E))),r(e,["functionDeclarations"],C)}const l=a(n,["retrieval"]);l!=null&&r(e,["retrieval"],l);const c=a(n,["googleSearch"]);c!=null&&r(e,["googleSearch"],x0(c));const f=a(n,["googleSearchRetrieval"]);f!=null&&r(e,["googleSearchRetrieval"],A0(f));const m=a(n,["enterpriseWebSearch"]);m!=null&&r(e,["enterpriseWebSearch"],d0(m));const g=a(n,["googleMaps"]);g!=null&&r(e,["googleMaps"],S0(g)),a(n,["urlContext"])!=null&&r(e,["urlContext"],NE());const h=a(n,["computerUse"]);h!=null&&r(e,["computerUse"],o0(h));const v=a(n,["codeExecution"]);return v!=null&&r(e,["codeExecution"],v),e}function lh(n){const e={},i=a(n,["text"]);i!=null&&r(e,["text"],i);const l=a(n,["finished"]);return l!=null&&r(e,["finished"],l),e}function sh(n){const e={},i=a(n,["text"]);i!=null&&r(e,["text"],i);const l=a(n,["finished"]);return l!=null&&r(e,["finished"],l),e}function xE(n){const e={},i=a(n,["urlMetadata"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>RE(c))),r(e,["urlMetadata"],l)}return e}function ME(){return{}}function NE(){return{}}function RE(n){const e={},i=a(n,["retrievedUrl"]);i!=null&&r(e,["retrievedUrl"],i);const l=a(n,["urlRetrievalStatus"]);return l!=null&&r(e,["urlRetrievalStatus"],l),e}function IE(n){const e={},i=a(n,["promptTokenCount"]);i!=null&&r(e,["promptTokenCount"],i);const l=a(n,["cachedContentTokenCount"]);l!=null&&r(e,["cachedContentTokenCount"],l);const c=a(n,["responseTokenCount"]);c!=null&&r(e,["responseTokenCount"],c);const f=a(n,["toolUsePromptTokenCount"]);f!=null&&r(e,["toolUsePromptTokenCount"],f);const m=a(n,["thoughtsTokenCount"]);m!=null&&r(e,["thoughtsTokenCount"],m);const g=a(n,["totalTokenCount"]);g!=null&&r(e,["totalTokenCount"],g);const y=a(n,["promptTokensDetails"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(x=>ha(x))),r(e,["promptTokensDetails"],E)}const h=a(n,["cacheTokensDetails"]);if(h!=null){let E=h;Array.isArray(E)&&(E=E.map(x=>ha(x))),r(e,["cacheTokensDetails"],E)}const v=a(n,["responseTokensDetails"]);if(v!=null){let E=v;Array.isArray(E)&&(E=E.map(x=>ha(x))),r(e,["responseTokensDetails"],E)}const C=a(n,["toolUsePromptTokensDetails"]);if(C!=null){let E=C;Array.isArray(E)&&(E=E.map(x=>ha(x))),r(e,["toolUsePromptTokensDetails"],E)}return e}function wE(n){const e={},i=a(n,["promptTokenCount"]);i!=null&&r(e,["promptTokenCount"],i);const l=a(n,["cachedContentTokenCount"]);l!=null&&r(e,["cachedContentTokenCount"],l);const c=a(n,["candidatesTokenCount"]);c!=null&&r(e,["responseTokenCount"],c);const f=a(n,["toolUsePromptTokenCount"]);f!=null&&r(e,["toolUsePromptTokenCount"],f);const m=a(n,["thoughtsTokenCount"]);m!=null&&r(e,["thoughtsTokenCount"],m);const g=a(n,["totalTokenCount"]);g!=null&&r(e,["totalTokenCount"],g);const y=a(n,["promptTokensDetails"]);if(y!=null){let x=y;Array.isArray(x)&&(x=x.map(U=>ga(U))),r(e,["promptTokensDetails"],x)}const h=a(n,["cacheTokensDetails"]);if(h!=null){let x=h;Array.isArray(x)&&(x=x.map(U=>ga(U))),r(e,["cacheTokensDetails"],x)}const v=a(n,["candidatesTokensDetails"]);if(v!=null){let x=v;Array.isArray(x)&&(x=x.map(U=>ga(U))),r(e,["responseTokensDetails"],x)}const C=a(n,["toolUsePromptTokensDetails"]);if(C!=null){let x=C;Array.isArray(x)&&(x=x.map(U=>ga(U))),r(e,["toolUsePromptTokensDetails"],x)}const E=a(n,["trafficType"]);return E!=null&&r(e,["trafficType"],E),e}function DE(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function bE(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function kE(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function UE(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function Xh(n){const e={},i=a(n,["prebuiltVoiceConfig"]);return i!=null&&r(e,["prebuiltVoiceConfig"],rE(i)),e}function LE(n){const e={},i=a(n,["prebuiltVoiceConfig"]);return i!=null&&r(e,["prebuiltVoiceConfig"],uE(i)),e}function VE(n){const e={},i=a(n,["text"]);i!=null&&r(e,["text"],i);const l=a(n,["weight"]);return l!=null&&r(e,["weight"],l),e}function Qh(n){const e={},i=a(n,["text"]);i!=null&&r(e,["text"],i);const l=a(n,["weight"]);return l!=null&&r(e,["weight"],l),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BE(n){const e={},i=a(n,["apiKeyString"]);return i!=null&&r(e,["apiKeyString"],i),e}function qE(n){const e={},i=a(n,["apiKeyConfig"]);i!=null&&r(e,["apiKeyConfig"],BE(i));const l=a(n,["authType"]);l!=null&&r(e,["authType"],l);const c=a(n,["googleServiceAccountConfig"]);c!=null&&r(e,["googleServiceAccountConfig"],c);const f=a(n,["httpBasicAuthConfig"]);f!=null&&r(e,["httpBasicAuthConfig"],f);const m=a(n,["oauthConfig"]);m!=null&&r(e,["oauthConfig"],m);const g=a(n,["oidcConfig"]);return g!=null&&r(e,["oidcConfig"],g),e}function PE(n){const e={},i=a(n,["data"]);i!=null&&r(e,["data"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function GE(n){const e={},i=a(n,["displayName"]);i!=null&&r(e,["displayName"],i);const l=a(n,["data"]);l!=null&&r(e,["data"],l);const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function HE(n){const e={};if(a(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(n,["data"]);i!=null&&r(e,["data"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function zE(n){const e={},i=a(n,["displayName"]);i!=null&&r(e,["displayName"],i);const l=a(n,["data"]);l!=null&&r(e,["data"],l);const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function OE(n){const e={},i=a(n,["content"]);i!=null&&r(e,["content"],tA(i));const l=a(n,["citationMetadata"]);l!=null&&r(e,["citationMetadata"],YE(l));const c=a(n,["tokenCount"]);c!=null&&r(e,["tokenCount"],c);const f=a(n,["finishReason"]);f!=null&&r(e,["finishReason"],f);const m=a(n,["urlContextMetadata"]);m!=null&&r(e,["urlContextMetadata"],Sx(m));const g=a(n,["avgLogprobs"]);g!=null&&r(e,["avgLogprobs"],g);const y=a(n,["groundingMetadata"]);y!=null&&r(e,["groundingMetadata"],y);const h=a(n,["index"]);h!=null&&r(e,["index"],h);const v=a(n,["logprobsResult"]);v!=null&&r(e,["logprobsResult"],v);const C=a(n,["safetyRatings"]);return C!=null&&r(e,["safetyRatings"],C),e}function FE(n){const e={},i=a(n,["content"]);i!=null&&r(e,["content"],nA(i));const l=a(n,["citationMetadata"]);l!=null&&r(e,["citationMetadata"],$E(l));const c=a(n,["finishMessage"]);c!=null&&r(e,["finishMessage"],c);const f=a(n,["finishReason"]);f!=null&&r(e,["finishReason"],f);const m=a(n,["urlContextMetadata"]);m!=null&&r(e,["urlContextMetadata"],Ex(m));const g=a(n,["avgLogprobs"]);g!=null&&r(e,["avgLogprobs"],g);const y=a(n,["groundingMetadata"]);y!=null&&r(e,["groundingMetadata"],y);const h=a(n,["index"]);h!=null&&r(e,["index"],h);const v=a(n,["logprobsResult"]);v!=null&&r(e,["logprobsResult"],v);const C=a(n,["safetyRatings"]);return C!=null&&r(e,["safetyRatings"],C),e}function JE(n){const e={},i=a(n,["checkpointId"]);i!=null&&r(e,["checkpointId"],i);const l=a(n,["epoch"]);l!=null&&r(e,["epoch"],l);const c=a(n,["step"]);return c!=null&&r(e,["step"],c),e}function YE(n){const e={},i=a(n,["citationSources"]);return i!=null&&r(e,["citations"],i),e}function $E(n){const e={},i=a(n,["citations"]);return i!=null&&r(e,["citations"],i),e}function KE(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["contents"]);if(c!=null){let f=Hn(c);Array.isArray(f)&&(f=f.map(m=>ol(m))),r(i,["contents"],f)}return i}function XE(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["tokensInfo"]);return l!=null&&r(e,["tokensInfo"],l),e}function QE(n){const e={},i=a(n,["environment"]);i!=null&&r(e,["environment"],i);const l=a(n,["excludedPredefinedFunctions"]);return l!=null&&r(e,["excludedPredefinedFunctions"],l),e}function ZE(n){const e={},i=a(n,["environment"]);i!=null&&r(e,["environment"],i);const l=a(n,["excludedPredefinedFunctions"]);return l!=null&&r(e,["excludedPredefinedFunctions"],l),e}function WE(n){const e={},i=a(n,["values"]);return i!=null&&r(e,["values"],i),e}function jE(n){const e={},i=a(n,["values"]);i!=null&&r(e,["values"],i);const l=a(n,["statistics"]);return l!=null&&r(e,["statistics"],eA(l)),e}function eA(n){const e={},i=a(n,["truncated"]);i!=null&&r(e,["truncated"],i);const l=a(n,["token_count"]);return l!=null&&r(e,["tokenCount"],l),e}function tA(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>k_(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function nA(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>U_(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function Aa(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>L_(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function ol(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>V_(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function oA(n){const e={},i=a(n,["controlType"]);i!=null&&r(e,["controlType"],i);const l=a(n,["enableControlImageComputation"]);return l!=null&&r(e,["computeControl"],l),e}function iA(n){const e={};if(a(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(a(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(a(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function lA(n,e){const i={},l=a(n,["systemInstruction"]);e!==void 0&&l!=null&&r(e,["systemInstruction"],ol(dn(l)));const c=a(n,["tools"]);if(e!==void 0&&c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>tg(g))),r(e,["tools"],m)}const f=a(n,["generationConfig"]);return e!==void 0&&f!=null&&r(e,["generationConfig"],f),i}function sA(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["contents"]);if(c!=null){let m=Hn(c);Array.isArray(m)&&(m=m.map(g=>Aa(g))),r(i,["contents"],m)}const f=a(e,["config"]);return f!=null&&iA(f),i}function aA(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["contents"]);if(c!=null){let m=Hn(c);Array.isArray(m)&&(m=m.map(g=>ol(g))),r(i,["contents"],m)}const f=a(e,["config"]);return f!=null&&lA(f,i),i}function rA(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["totalTokens"]);l!=null&&r(e,["totalTokens"],l);const c=a(n,["cachedContentTokenCount"]);return c!=null&&r(e,["cachedContentTokenCount"],c),e}function uA(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["totalTokens"]);return l!=null&&r(e,["totalTokens"],l),e}function cA(n,e){const i={},l=a(e,["model"]);return l!=null&&r(i,["_url","name"],gt(n,l)),i}function fA(n,e){const i={},l=a(e,["model"]);return l!=null&&r(i,["_url","name"],gt(n,l)),i}function dA(n){const e={},i=a(n,["sdkHttpResponse"]);return i!=null&&r(e,["sdkHttpResponse"],i),e}function pA(n){const e={},i=a(n,["sdkHttpResponse"]);return i!=null&&r(e,["sdkHttpResponse"],i),e}function mA(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["dynamicThreshold"]);return l!=null&&r(e,["dynamicThreshold"],l),e}function hA(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["dynamicThreshold"]);return l!=null&&r(e,["dynamicThreshold"],l),e}function gA(n,e){const i={},l=a(n,["outputGcsUri"]);e!==void 0&&l!=null&&r(e,["parameters","storageUri"],l);const c=a(n,["negativePrompt"]);e!==void 0&&c!=null&&r(e,["parameters","negativePrompt"],c);const f=a(n,["numberOfImages"]);e!==void 0&&f!=null&&r(e,["parameters","sampleCount"],f);const m=a(n,["aspectRatio"]);e!==void 0&&m!=null&&r(e,["parameters","aspectRatio"],m);const g=a(n,["guidanceScale"]);e!==void 0&&g!=null&&r(e,["parameters","guidanceScale"],g);const y=a(n,["seed"]);e!==void 0&&y!=null&&r(e,["parameters","seed"],y);const h=a(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&r(e,["parameters","safetySetting"],h);const v=a(n,["personGeneration"]);e!==void 0&&v!=null&&r(e,["parameters","personGeneration"],v);const C=a(n,["includeSafetyAttributes"]);e!==void 0&&C!=null&&r(e,["parameters","includeSafetyAttributes"],C);const E=a(n,["includeRaiReason"]);e!==void 0&&E!=null&&r(e,["parameters","includeRaiReason"],E);const x=a(n,["language"]);e!==void 0&&x!=null&&r(e,["parameters","language"],x);const U=a(n,["outputMimeType"]);e!==void 0&&U!=null&&r(e,["parameters","outputOptions","mimeType"],U);const O=a(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&r(e,["parameters","outputOptions","compressionQuality"],O);const q=a(n,["addWatermark"]);e!==void 0&&q!=null&&r(e,["parameters","addWatermark"],q);const z=a(n,["editMode"]);e!==void 0&&z!=null&&r(e,["parameters","editMode"],z);const F=a(n,["baseSteps"]);return e!==void 0&&F!=null&&r(e,["parameters","editConfig","baseSteps"],F),i}function yA(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["prompt"]);c!=null&&r(i,["instances[0]","prompt"],c);const f=a(e,["referenceImages"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(y=>F_(y))),r(i,["instances[0]","referenceImages"],g)}const m=a(e,["config"]);return m!=null&&gA(m,i),i}function vA(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["predictions"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>_a(f))),r(e,["generatedImages"],c)}return e}function TA(n,e){const i={},l=a(n,["taskType"]);e!==void 0&&l!=null&&r(e,["requests[]","taskType"],l);const c=a(n,["title"]);e!==void 0&&c!=null&&r(e,["requests[]","title"],c);const f=a(n,["outputDimensionality"]);if(e!==void 0&&f!=null&&r(e,["requests[]","outputDimensionality"],f),a(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(a(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function CA(n,e){const i={},l=a(n,["taskType"]);e!==void 0&&l!=null&&r(e,["instances[]","task_type"],l);const c=a(n,["title"]);e!==void 0&&c!=null&&r(e,["instances[]","title"],c);const f=a(n,["outputDimensionality"]);e!==void 0&&f!=null&&r(e,["parameters","outputDimensionality"],f);const m=a(n,["mimeType"]);e!==void 0&&m!=null&&r(e,["instances[]","mimeType"],m);const g=a(n,["autoTruncate"]);return e!==void 0&&g!=null&&r(e,["parameters","autoTruncate"],g),i}function SA(){return{}}function EA(n){const e={},i=a(n,["billableCharacterCount"]);return i!=null&&r(e,["billableCharacterCount"],i),e}function AA(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["contents"]);c!=null&&r(i,["requests[]","content"],ec(n,c));const f=a(e,["config"]);f!=null&&TA(f,i);const m=a(e,["model"]);return m!==void 0&&r(i,["requests[]","model"],gt(n,m)),i}function _A(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["contents"]);c!=null&&r(i,["instances[]","content"],ec(n,c));const f=a(e,["config"]);return f!=null&&CA(f,i),i}function xA(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["embeddings"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>WE(m))),r(e,["embeddings"],f)}return a(n,["metadata"])!=null&&r(e,["metadata"],SA()),e}function MA(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["predictions[]","embeddings"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>jE(m))),r(e,["embeddings"],f)}const c=a(n,["metadata"]);return c!=null&&r(e,["metadata"],EA(c)),e}function NA(n){const e={},i=a(n,["endpoint"]);i!=null&&r(e,["name"],i);const l=a(n,["deployedModelId"]);return l!=null&&r(e,["deployedModelId"],l),e}function RA(n){const e={},i=a(n,["excludeDomains"]);return i!=null&&r(e,["excludeDomains"],i),e}function IA(n){const e={},i=a(n,["label"]);i!=null&&r(e,["label"],i);const l=a(n,["score"]);return l!=null&&r(e,["score"],l),e}function wA(n){const e={},i=a(n,["fileUri"]);i!=null&&r(e,["fileUri"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function DA(n){const e={},i=a(n,["displayName"]);i!=null&&r(e,["displayName"],i);const l=a(n,["fileUri"]);l!=null&&r(e,["fileUri"],l);const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function bA(n){const e={};if(a(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(n,["fileUri"]);i!=null&&r(e,["fileUri"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function kA(n){const e={},i=a(n,["displayName"]);i!=null&&r(e,["displayName"],i);const l=a(n,["fileUri"]);l!=null&&r(e,["fileUri"],l);const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function UA(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function LA(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function VA(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function BA(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function qA(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["allowedFunctionNames"]);return l!=null&&r(e,["allowedFunctionNames"],l),e}function PA(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["allowedFunctionNames"]);return l!=null&&r(e,["allowedFunctionNames"],l),e}function GA(n){const e={},i=a(n,["behavior"]);i!=null&&r(e,["behavior"],i);const l=a(n,["description"]);l!=null&&r(e,["description"],l);const c=a(n,["name"]);c!=null&&r(e,["name"],c);const f=a(n,["parameters"]);f!=null&&r(e,["parameters"],f);const m=a(n,["parametersJsonSchema"]);m!=null&&r(e,["parametersJsonSchema"],m);const g=a(n,["response"]);g!=null&&r(e,["response"],g);const y=a(n,["responseJsonSchema"]);return y!=null&&r(e,["responseJsonSchema"],y),e}function HA(n){const e={};if(a(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const i=a(n,["description"]);i!=null&&r(e,["description"],i);const l=a(n,["name"]);l!=null&&r(e,["name"],l);const c=a(n,["parameters"]);c!=null&&r(e,["parameters"],c);const f=a(n,["parametersJsonSchema"]);f!=null&&r(e,["parametersJsonSchema"],f);const m=a(n,["response"]);m!=null&&r(e,["response"],m);const g=a(n,["responseJsonSchema"]);return g!=null&&r(e,["responseJsonSchema"],g),e}function zA(n,e,i){const l={},c=a(e,["systemInstruction"]);i!==void 0&&c!=null&&r(i,["systemInstruction"],Aa(dn(c)));const f=a(e,["temperature"]);f!=null&&r(l,["temperature"],f);const m=a(e,["topP"]);m!=null&&r(l,["topP"],m);const g=a(e,["topK"]);g!=null&&r(l,["topK"],g);const y=a(e,["candidateCount"]);y!=null&&r(l,["candidateCount"],y);const h=a(e,["maxOutputTokens"]);h!=null&&r(l,["maxOutputTokens"],h);const v=a(e,["stopSequences"]);v!=null&&r(l,["stopSequences"],v);const C=a(e,["responseLogprobs"]);C!=null&&r(l,["responseLogprobs"],C);const E=a(e,["logprobs"]);E!=null&&r(l,["logprobs"],E);const x=a(e,["presencePenalty"]);x!=null&&r(l,["presencePenalty"],x);const U=a(e,["frequencyPenalty"]);U!=null&&r(l,["frequencyPenalty"],U);const O=a(e,["seed"]);O!=null&&r(l,["seed"],O);const q=a(e,["responseMimeType"]);q!=null&&r(l,["responseMimeType"],q);const z=a(e,["responseSchema"]);z!=null&&r(l,["responseSchema"],X_(tc(z)));const F=a(e,["responseJsonSchema"]);if(F!=null&&r(l,["responseJsonSchema"],F),a(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(a(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=a(e,["safetySettings"]);if(i!==void 0&&Z!=null){let ve=Z;Array.isArray(ve)&&(ve=ve.map(nt=>$_(nt))),r(i,["safetySettings"],ve)}const ee=a(e,["tools"]);if(i!==void 0&&ee!=null){let ve=tl(ee);Array.isArray(ve)&&(ve=ve.map(nt=>fx(el(nt)))),r(i,["tools"],ve)}const ce=a(e,["toolConfig"]);if(i!==void 0&&ce!=null&&r(i,["toolConfig"],ux(ce)),a(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const fe=a(e,["cachedContent"]);i!==void 0&&fe!=null&&r(i,["cachedContent"],Co(n,fe));const oe=a(e,["responseModalities"]);oe!=null&&r(l,["responseModalities"],oe);const pe=a(e,["mediaResolution"]);pe!=null&&r(l,["mediaResolution"],pe);const j=a(e,["speechConfig"]);if(j!=null&&r(l,["speechConfig"],ox(nc(j))),a(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const me=a(e,["thinkingConfig"]);me!=null&&r(l,["thinkingConfig"],ax(me));const re=a(e,["imageConfig"]);return re!=null&&r(l,["imageConfig"],y_(re)),l}function OA(n,e,i){const l={},c=a(e,["systemInstruction"]);i!==void 0&&c!=null&&r(i,["systemInstruction"],ol(dn(c)));const f=a(e,["temperature"]);f!=null&&r(l,["temperature"],f);const m=a(e,["topP"]);m!=null&&r(l,["topP"],m);const g=a(e,["topK"]);g!=null&&r(l,["topK"],g);const y=a(e,["candidateCount"]);y!=null&&r(l,["candidateCount"],y);const h=a(e,["maxOutputTokens"]);h!=null&&r(l,["maxOutputTokens"],h);const v=a(e,["stopSequences"]);v!=null&&r(l,["stopSequences"],v);const C=a(e,["responseLogprobs"]);C!=null&&r(l,["responseLogprobs"],C);const E=a(e,["logprobs"]);E!=null&&r(l,["logprobs"],E);const x=a(e,["presencePenalty"]);x!=null&&r(l,["presencePenalty"],x);const U=a(e,["frequencyPenalty"]);U!=null&&r(l,["frequencyPenalty"],U);const O=a(e,["seed"]);O!=null&&r(l,["seed"],O);const q=a(e,["responseMimeType"]);q!=null&&r(l,["responseMimeType"],q);const z=a(e,["responseSchema"]);z!=null&&r(l,["responseSchema"],Q_(tc(z)));const F=a(e,["responseJsonSchema"]);F!=null&&r(l,["responseJsonSchema"],F);const Z=a(e,["routingConfig"]);Z!=null&&r(l,["routingConfig"],Z);const ee=a(e,["modelSelectionConfig"]);ee!=null&&r(l,["modelConfig"],D_(ee));const ce=a(e,["safetySettings"]);if(i!==void 0&&ce!=null){let L=ce;Array.isArray(L)&&(L=L.map(ie=>K_(ie))),r(i,["safetySettings"],L)}const fe=a(e,["tools"]);if(i!==void 0&&fe!=null){let L=tl(fe);Array.isArray(L)&&(L=L.map(ie=>tg(el(ie)))),r(i,["tools"],L)}const oe=a(e,["toolConfig"]);i!==void 0&&oe!=null&&r(i,["toolConfig"],cx(oe));const pe=a(e,["labels"]);i!==void 0&&pe!=null&&r(i,["labels"],pe);const j=a(e,["cachedContent"]);i!==void 0&&j!=null&&r(i,["cachedContent"],Co(n,j));const me=a(e,["responseModalities"]);me!=null&&r(l,["responseModalities"],me);const re=a(e,["mediaResolution"]);re!=null&&r(l,["mediaResolution"],re);const ve=a(e,["speechConfig"]);ve!=null&&r(l,["speechConfig"],ix(nc(ve)));const nt=a(e,["audioTimestamp"]);nt!=null&&r(l,["audioTimestamp"],nt);const Bt=a(e,["thinkingConfig"]);Bt!=null&&r(l,["thinkingConfig"],rx(Bt));const yt=a(e,["imageConfig"]);return yt!=null&&r(l,["imageConfig"],v_(yt)),l}function ah(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["contents"]);if(c!=null){let m=Hn(c);Array.isArray(m)&&(m=m.map(g=>Aa(g))),r(i,["contents"],m)}const f=a(e,["config"]);return f!=null&&r(i,["generationConfig"],zA(n,f,i)),i}function rh(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["contents"]);if(c!=null){let m=Hn(c);Array.isArray(m)&&(m=m.map(g=>ol(g))),r(i,["contents"],m)}const f=a(e,["config"]);return f!=null&&r(i,["generationConfig"],OA(n,f,i)),i}function uh(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["candidates"]);if(l!=null){let y=l;Array.isArray(y)&&(y=y.map(h=>OE(h))),r(e,["candidates"],y)}const c=a(n,["modelVersion"]);c!=null&&r(e,["modelVersion"],c);const f=a(n,["promptFeedback"]);f!=null&&r(e,["promptFeedback"],f);const m=a(n,["responseId"]);m!=null&&r(e,["responseId"],m);const g=a(n,["usageMetadata"]);return g!=null&&r(e,["usageMetadata"],g),e}function ch(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["candidates"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(v=>FE(v))),r(e,["candidates"],h)}const c=a(n,["createTime"]);c!=null&&r(e,["createTime"],c);const f=a(n,["modelVersion"]);f!=null&&r(e,["modelVersion"],f);const m=a(n,["promptFeedback"]);m!=null&&r(e,["promptFeedback"],m);const g=a(n,["responseId"]);g!=null&&r(e,["responseId"],g);const y=a(n,["usageMetadata"]);return y!=null&&r(e,["usageMetadata"],y),e}function FA(n,e){const i={};if(a(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const l=a(n,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const c=a(n,["aspectRatio"]);e!==void 0&&c!=null&&r(e,["parameters","aspectRatio"],c);const f=a(n,["guidanceScale"]);if(e!==void 0&&f!=null&&r(e,["parameters","guidanceScale"],f),a(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const m=a(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&r(e,["parameters","safetySetting"],m);const g=a(n,["personGeneration"]);e!==void 0&&g!=null&&r(e,["parameters","personGeneration"],g);const y=a(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&r(e,["parameters","includeSafetyAttributes"],y);const h=a(n,["includeRaiReason"]);e!==void 0&&h!=null&&r(e,["parameters","includeRaiReason"],h);const v=a(n,["language"]);e!==void 0&&v!=null&&r(e,["parameters","language"],v);const C=a(n,["outputMimeType"]);e!==void 0&&C!=null&&r(e,["parameters","outputOptions","mimeType"],C);const E=a(n,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&r(e,["parameters","outputOptions","compressionQuality"],E),a(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const x=a(n,["imageSize"]);if(e!==void 0&&x!=null&&r(e,["parameters","sampleImageSize"],x),a(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function JA(n,e){const i={},l=a(n,["outputGcsUri"]);e!==void 0&&l!=null&&r(e,["parameters","storageUri"],l);const c=a(n,["negativePrompt"]);e!==void 0&&c!=null&&r(e,["parameters","negativePrompt"],c);const f=a(n,["numberOfImages"]);e!==void 0&&f!=null&&r(e,["parameters","sampleCount"],f);const m=a(n,["aspectRatio"]);e!==void 0&&m!=null&&r(e,["parameters","aspectRatio"],m);const g=a(n,["guidanceScale"]);e!==void 0&&g!=null&&r(e,["parameters","guidanceScale"],g);const y=a(n,["seed"]);e!==void 0&&y!=null&&r(e,["parameters","seed"],y);const h=a(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&r(e,["parameters","safetySetting"],h);const v=a(n,["personGeneration"]);e!==void 0&&v!=null&&r(e,["parameters","personGeneration"],v);const C=a(n,["includeSafetyAttributes"]);e!==void 0&&C!=null&&r(e,["parameters","includeSafetyAttributes"],C);const E=a(n,["includeRaiReason"]);e!==void 0&&E!=null&&r(e,["parameters","includeRaiReason"],E);const x=a(n,["language"]);e!==void 0&&x!=null&&r(e,["parameters","language"],x);const U=a(n,["outputMimeType"]);e!==void 0&&U!=null&&r(e,["parameters","outputOptions","mimeType"],U);const O=a(n,["outputCompressionQuality"]);e!==void 0&&O!=null&&r(e,["parameters","outputOptions","compressionQuality"],O);const q=a(n,["addWatermark"]);e!==void 0&&q!=null&&r(e,["parameters","addWatermark"],q);const z=a(n,["imageSize"]);e!==void 0&&z!=null&&r(e,["parameters","sampleImageSize"],z);const F=a(n,["enhancePrompt"]);return e!==void 0&&F!=null&&r(e,["parameters","enhancePrompt"],F),i}function YA(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["prompt"]);c!=null&&r(i,["instances[0]","prompt"],c);const f=a(e,["config"]);return f!=null&&FA(f,i),i}function $A(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["prompt"]);c!=null&&r(i,["instances[0]","prompt"],c);const f=a(e,["config"]);return f!=null&&JA(f,i),i}function KA(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["predictions"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>s_(m))),r(e,["generatedImages"],f)}const c=a(n,["positivePromptSafetyAttributes"]);return c!=null&&r(e,["positivePromptSafetyAttributes"],jh(c)),e}function XA(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["predictions"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(m=>_a(m))),r(e,["generatedImages"],f)}const c=a(n,["positivePromptSafetyAttributes"]);return c!=null&&r(e,["positivePromptSafetyAttributes"],eg(c)),e}function QA(n,e){const i={},l=a(n,["numberOfVideos"]);if(e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l),a(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(a(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const c=a(n,["durationSeconds"]);if(e!==void 0&&c!=null&&r(e,["parameters","durationSeconds"],c),a(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const f=a(n,["aspectRatio"]);e!==void 0&&f!=null&&r(e,["parameters","aspectRatio"],f);const m=a(n,["resolution"]);e!==void 0&&m!=null&&r(e,["parameters","resolution"],m);const g=a(n,["personGeneration"]);if(e!==void 0&&g!=null&&r(e,["parameters","personGeneration"],g),a(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=a(n,["negativePrompt"]);e!==void 0&&y!=null&&r(e,["parameters","negativePrompt"],y);const h=a(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&r(e,["parameters","enhancePrompt"],h),a(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(a(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(a(n,["referenceImages"])!==void 0)throw new Error("referenceImages parameter is not supported in Gemini API.");if(a(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(a(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function ZA(n,e){const i={},l=a(n,["numberOfVideos"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const c=a(n,["outputGcsUri"]);e!==void 0&&c!=null&&r(e,["parameters","storageUri"],c);const f=a(n,["fps"]);e!==void 0&&f!=null&&r(e,["parameters","fps"],f);const m=a(n,["durationSeconds"]);e!==void 0&&m!=null&&r(e,["parameters","durationSeconds"],m);const g=a(n,["seed"]);e!==void 0&&g!=null&&r(e,["parameters","seed"],g);const y=a(n,["aspectRatio"]);e!==void 0&&y!=null&&r(e,["parameters","aspectRatio"],y);const h=a(n,["resolution"]);e!==void 0&&h!=null&&r(e,["parameters","resolution"],h);const v=a(n,["personGeneration"]);e!==void 0&&v!=null&&r(e,["parameters","personGeneration"],v);const C=a(n,["pubsubTopic"]);e!==void 0&&C!=null&&r(e,["parameters","pubsubTopic"],C);const E=a(n,["negativePrompt"]);e!==void 0&&E!=null&&r(e,["parameters","negativePrompt"],E);const x=a(n,["enhancePrompt"]);e!==void 0&&x!=null&&r(e,["parameters","enhancePrompt"],x);const U=a(n,["generateAudio"]);e!==void 0&&U!=null&&r(e,["parameters","generateAudio"],U);const O=a(n,["lastFrame"]);e!==void 0&&O!=null&&r(e,["instances[0]","lastFrame"],Jn(O));const q=a(n,["referenceImages"]);if(e!==void 0&&q!=null){let Z=q;Array.isArray(Z)&&(Z=Z.map(ee=>wx(ee))),r(e,["instances[0]","referenceImages"],Z)}const z=a(n,["mask"]);e!==void 0&&z!=null&&r(e,["instances[0]","mask"],Ix(z));const F=a(n,["compressionQuality"]);return e!==void 0&&F!=null&&r(e,["parameters","compressionQuality"],F),i}function WA(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["metadata"]);l!=null&&r(e,["metadata"],l);const c=a(n,["done"]);c!=null&&r(e,["done"],c);const f=a(n,["error"]);f!=null&&r(e,["error"],f);const m=a(n,["response","generateVideoResponse"]);return m!=null&&r(e,["response"],n_(m)),e}function jA(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["metadata"]);l!=null&&r(e,["metadata"],l);const c=a(n,["done"]);c!=null&&r(e,["done"],c);const f=a(n,["error"]);f!=null&&r(e,["error"],f);const m=a(n,["response"]);return m!=null&&r(e,["response"],o_(m)),e}function e_(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["prompt"]);c!=null&&r(i,["instances[0]","prompt"],c);const f=a(e,["image"]);if(f!=null&&r(i,["instances[0]","image"],Wh(f)),a(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const m=a(e,["source"]);m!=null&&i_(m,i);const g=a(e,["config"]);return g!=null&&QA(g,i),i}function t_(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["prompt"]);c!=null&&r(i,["instances[0]","prompt"],c);const f=a(e,["image"]);f!=null&&r(i,["instances[0]","image"],Jn(f));const m=a(e,["video"]);m!=null&&r(i,["instances[0]","video"],ng(m));const g=a(e,["source"]);g!=null&&l_(g,i);const y=a(e,["config"]);return y!=null&&ZA(y,i),i}function n_(n){const e={},i=a(n,["generatedSamples"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>r_(m))),r(e,["generatedVideos"],f)}const l=a(n,["raiMediaFilteredCount"]);l!=null&&r(e,["raiMediaFilteredCount"],l);const c=a(n,["raiMediaFilteredReasons"]);return c!=null&&r(e,["raiMediaFilteredReasons"],c),e}function o_(n){const e={},i=a(n,["videos"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(m=>u_(m))),r(e,["generatedVideos"],f)}const l=a(n,["raiMediaFilteredCount"]);l!=null&&r(e,["raiMediaFilteredCount"],l);const c=a(n,["raiMediaFilteredReasons"]);return c!=null&&r(e,["raiMediaFilteredReasons"],c),e}function i_(n,e){const i={},l=a(n,["prompt"]);e!==void 0&&l!=null&&r(e,["instances[0]","prompt"],l);const c=a(n,["image"]);if(e!==void 0&&c!=null&&r(e,["instances[0]","image"],Wh(c)),a(n,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");return i}function l_(n,e){const i={},l=a(n,["prompt"]);e!==void 0&&l!=null&&r(e,["instances[0]","prompt"],l);const c=a(n,["image"]);e!==void 0&&c!=null&&r(e,["instances[0]","image"],Jn(c));const f=a(n,["video"]);return e!==void 0&&f!=null&&r(e,["instances[0]","video"],ng(f)),i}function s_(n){const e={},i=a(n,["_self"]);i!=null&&r(e,["image"],T_(i));const l=a(n,["raiFilteredReason"]);l!=null&&r(e,["raiFilteredReason"],l);const c=a(n,["_self"]);return c!=null&&r(e,["safetyAttributes"],jh(c)),e}function _a(n){const e={},i=a(n,["_self"]);i!=null&&r(e,["image"],Zh(i));const l=a(n,["raiFilteredReason"]);l!=null&&r(e,["raiFilteredReason"],l);const c=a(n,["_self"]);c!=null&&r(e,["safetyAttributes"],eg(c));const f=a(n,["prompt"]);return f!=null&&r(e,["enhancedPrompt"],f),e}function a_(n){const e={},i=a(n,["_self"]);i!=null&&r(e,["mask"],Zh(i));const l=a(n,["labels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>IA(f))),r(e,["labels"],c)}return e}function r_(n){const e={},i=a(n,["_self"]);return i!=null&&r(e,["video"],Nx(i)),e}function u_(n){const e={},i=a(n,["_self"]);return i!=null&&r(e,["video"],Rx(i)),e}function c_(n,e){const i={},l=a(e,["model"]);return l!=null&&r(i,["_url","name"],gt(n,l)),i}function f_(n,e){const i={},l=a(e,["model"]);return l!=null&&r(i,["_url","name"],gt(n,l)),i}function d_(n){const e={},i=a(n,["authConfig"]);return i!=null&&r(e,["authConfig"],qE(i)),e}function p_(n){const e={},i=a(n,["dynamicRetrievalConfig"]);return i!=null&&r(e,["dynamicRetrievalConfig"],mA(i)),e}function m_(n){const e={},i=a(n,["dynamicRetrievalConfig"]);return i!=null&&r(e,["dynamicRetrievalConfig"],hA(i)),e}function h_(n){const e={},i=a(n,["timeRangeFilter"]);if(i!=null&&r(e,["timeRangeFilter"],C_(i)),a(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function g_(n){const e={},i=a(n,["timeRangeFilter"]);i!=null&&r(e,["timeRangeFilter"],S_(i));const l=a(n,["excludeDomains"]);return l!=null&&r(e,["excludeDomains"],l),e}function y_(n){const e={},i=a(n,["aspectRatio"]);return i!=null&&r(e,["aspectRatio"],i),e}function v_(n){const e={},i=a(n,["aspectRatio"]);return i!=null&&r(e,["aspectRatio"],i),e}function T_(n){const e={},i=a(n,["bytesBase64Encoded"]);i!=null&&r(e,["imageBytes"],pi(i));const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function Zh(n){const e={},i=a(n,["gcsUri"]);i!=null&&r(e,["gcsUri"],i);const l=a(n,["bytesBase64Encoded"]);l!=null&&r(e,["imageBytes"],pi(l));const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function Wh(n){const e={};if(a(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=a(n,["imageBytes"]);i!=null&&r(e,["bytesBase64Encoded"],pi(i));const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function Jn(n){const e={},i=a(n,["gcsUri"]);i!=null&&r(e,["gcsUri"],i);const l=a(n,["imageBytes"]);l!=null&&r(e,["bytesBase64Encoded"],pi(l));const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function C_(n){const e={},i=a(n,["startTime"]);i!=null&&r(e,["startTime"],i);const l=a(n,["endTime"]);return l!=null&&r(e,["endTime"],l),e}function S_(n){const e={},i=a(n,["startTime"]);i!=null&&r(e,["startTime"],i);const l=a(n,["endTime"]);return l!=null&&r(e,["endTime"],l),e}function E_(n){const e={},i=a(n,["latitude"]);i!=null&&r(e,["latitude"],i);const l=a(n,["longitude"]);return l!=null&&r(e,["longitude"],l),e}function A_(n){const e={},i=a(n,["latitude"]);i!=null&&r(e,["latitude"],i);const l=a(n,["longitude"]);return l!=null&&r(e,["longitude"],l),e}function __(n,e,i){const l={},c=a(e,["pageSize"]);i!==void 0&&c!=null&&r(i,["_query","pageSize"],c);const f=a(e,["pageToken"]);i!==void 0&&f!=null&&r(i,["_query","pageToken"],f);const m=a(e,["filter"]);i!==void 0&&m!=null&&r(i,["_query","filter"],m);const g=a(e,["queryBase"]);return i!==void 0&&g!=null&&r(i,["_url","models_url"],Lh(n,g)),l}function x_(n,e,i){const l={},c=a(e,["pageSize"]);i!==void 0&&c!=null&&r(i,["_query","pageSize"],c);const f=a(e,["pageToken"]);i!==void 0&&f!=null&&r(i,["_query","pageToken"],f);const m=a(e,["filter"]);i!==void 0&&m!=null&&r(i,["_query","filter"],m);const g=a(e,["queryBase"]);return i!==void 0&&g!=null&&r(i,["_url","models_url"],Lh(n,g)),l}function M_(n,e){const i={},l=a(e,["config"]);return l!=null&&__(n,l,i),i}function N_(n,e){const i={},l=a(e,["config"]);return l!=null&&x_(n,l,i),i}function R_(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["nextPageToken"]);l!=null&&r(e,["nextPageToken"],l);const c=a(n,["_self"]);if(c!=null){let f=Vh(c);Array.isArray(f)&&(f=f.map(m=>Ku(m))),r(e,["models"],f)}return e}function I_(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["nextPageToken"]);l!=null&&r(e,["nextPageToken"],l);const c=a(n,["_self"]);if(c!=null){let f=Vh(c);Array.isArray(f)&&(f=f.map(m=>Xu(m))),r(e,["models"],f)}return e}function w_(n){const e={},i=a(n,["maskMode"]);i!=null&&r(e,["maskMode"],i);const l=a(n,["segmentationClasses"]);l!=null&&r(e,["maskClasses"],l);const c=a(n,["maskDilation"]);return c!=null&&r(e,["dilation"],c),e}function Ku(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["displayName"]);l!=null&&r(e,["displayName"],l);const c=a(n,["description"]);c!=null&&r(e,["description"],c);const f=a(n,["version"]);f!=null&&r(e,["version"],f);const m=a(n,["_self"]);m!=null&&r(e,["tunedModelInfo"],dx(m));const g=a(n,["inputTokenLimit"]);g!=null&&r(e,["inputTokenLimit"],g);const y=a(n,["outputTokenLimit"]);y!=null&&r(e,["outputTokenLimit"],y);const h=a(n,["supportedGenerationMethods"]);return h!=null&&r(e,["supportedActions"],h),e}function Xu(n){const e={},i=a(n,["name"]);i!=null&&r(e,["name"],i);const l=a(n,["displayName"]);l!=null&&r(e,["displayName"],l);const c=a(n,["description"]);c!=null&&r(e,["description"],c);const f=a(n,["versionId"]);f!=null&&r(e,["version"],f);const m=a(n,["deployedModels"]);if(m!=null){let C=m;Array.isArray(C)&&(C=C.map(E=>NA(E))),r(e,["endpoints"],C)}const g=a(n,["labels"]);g!=null&&r(e,["labels"],g);const y=a(n,["_self"]);y!=null&&r(e,["tunedModelInfo"],px(y));const h=a(n,["defaultCheckpointId"]);h!=null&&r(e,["defaultCheckpointId"],h);const v=a(n,["checkpoints"]);if(v!=null){let C=v;Array.isArray(C)&&(C=C.map(E=>JE(E))),r(e,["checkpoints"],C)}return e}function D_(n){const e={},i=a(n,["featureSelectionPreference"]);return i!=null&&r(e,["featureSelectionPreference"],i),e}function b_(n){const e={},i=a(n,["speakerVoiceConfigs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>nx(c))),r(e,["speakerVoiceConfigs"],l)}return e}function k_(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],Dx(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],PE(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],wA(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],UA(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function U_(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],bx(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],GE(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],DA(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],LA(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function L_(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],kx(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],HE(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],bA(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],VA(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function V_(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],Ux(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],zE(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],kA(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],BA(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function B_(n){const e={},i=a(n,["voiceName"]);return i!=null&&r(e,["voiceName"],i),e}function q_(n){const e={},i=a(n,["voiceName"]);return i!=null&&r(e,["voiceName"],i),e}function P_(n){const e={},i=a(n,["productImage"]);return i!=null&&r(e,["image"],Jn(i)),e}function G_(n,e){const i={},l=a(n,["numberOfImages"]);e!==void 0&&l!=null&&r(e,["parameters","sampleCount"],l);const c=a(n,["baseSteps"]);e!==void 0&&c!=null&&r(e,["parameters","editConfig","baseSteps"],c);const f=a(n,["outputGcsUri"]);e!==void 0&&f!=null&&r(e,["parameters","storageUri"],f);const m=a(n,["seed"]);e!==void 0&&m!=null&&r(e,["parameters","seed"],m);const g=a(n,["safetyFilterLevel"]);e!==void 0&&g!=null&&r(e,["parameters","safetySetting"],g);const y=a(n,["personGeneration"]);e!==void 0&&y!=null&&r(e,["parameters","personGeneration"],y);const h=a(n,["addWatermark"]);e!==void 0&&h!=null&&r(e,["parameters","addWatermark"],h);const v=a(n,["outputMimeType"]);e!==void 0&&v!=null&&r(e,["parameters","outputOptions","mimeType"],v);const C=a(n,["outputCompressionQuality"]);e!==void 0&&C!=null&&r(e,["parameters","outputOptions","compressionQuality"],C);const E=a(n,["enhancePrompt"]);return e!==void 0&&E!=null&&r(e,["parameters","enhancePrompt"],E),i}function H_(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["source"]);c!=null&&O_(c,i);const f=a(e,["config"]);return f!=null&&G_(f,i),i}function z_(n){const e={},i=a(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>_a(c))),r(e,["generatedImages"],l)}return e}function O_(n,e){const i={},l=a(n,["prompt"]);e!==void 0&&l!=null&&r(e,["instances[0]","prompt"],l);const c=a(n,["personImage"]);e!==void 0&&c!=null&&r(e,["instances[0]","personImage","image"],Jn(c));const f=a(n,["productImages"]);if(e!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>P_(g))),r(e,["instances[0]","productImages"],m)}return i}function F_(n){const e={},i=a(n,["referenceImage"]);i!=null&&r(e,["referenceImage"],Jn(i));const l=a(n,["referenceId"]);l!=null&&r(e,["referenceId"],l);const c=a(n,["referenceType"]);c!=null&&r(e,["referenceType"],c);const f=a(n,["maskImageConfig"]);f!=null&&r(e,["maskImageConfig"],w_(f));const m=a(n,["controlImageConfig"]);m!=null&&r(e,["controlImageConfig"],oA(m));const g=a(n,["styleImageConfig"]);g!=null&&r(e,["styleImageConfig"],lx(g));const y=a(n,["subjectImageConfig"]);return y!=null&&r(e,["subjectImageConfig"],sx(y)),e}function J_(n){const e={},i=a(n,["latLng"]);i!=null&&r(e,["latLng"],E_(i));const l=a(n,["languageCode"]);return l!=null&&r(e,["languageCode"],l),e}function Y_(n){const e={},i=a(n,["latLng"]);i!=null&&r(e,["latLng"],A_(i));const l=a(n,["languageCode"]);return l!=null&&r(e,["languageCode"],l),e}function jh(n){const e={},i=a(n,["safetyAttributes","categories"]);i!=null&&r(e,["categories"],i);const l=a(n,["safetyAttributes","scores"]);l!=null&&r(e,["scores"],l);const c=a(n,["contentType"]);return c!=null&&r(e,["contentType"],c),e}function eg(n){const e={},i=a(n,["safetyAttributes","categories"]);i!=null&&r(e,["categories"],i);const l=a(n,["safetyAttributes","scores"]);l!=null&&r(e,["scores"],l);const c=a(n,["contentType"]);return c!=null&&r(e,["contentType"],c),e}function $_(n){const e={};if(a(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=a(n,["category"]);i!=null&&r(e,["category"],i);const l=a(n,["threshold"]);return l!=null&&r(e,["threshold"],l),e}function K_(n){const e={},i=a(n,["method"]);i!=null&&r(e,["method"],i);const l=a(n,["category"]);l!=null&&r(e,["category"],l);const c=a(n,["threshold"]);return c!=null&&r(e,["threshold"],c),e}function X_(n){const e={},i=a(n,["anyOf"]);i!=null&&r(e,["anyOf"],i);const l=a(n,["default"]);l!=null&&r(e,["default"],l);const c=a(n,["description"]);c!=null&&r(e,["description"],c);const f=a(n,["enum"]);f!=null&&r(e,["enum"],f);const m=a(n,["example"]);m!=null&&r(e,["example"],m);const g=a(n,["format"]);g!=null&&r(e,["format"],g);const y=a(n,["items"]);y!=null&&r(e,["items"],y);const h=a(n,["maxItems"]);h!=null&&r(e,["maxItems"],h);const v=a(n,["maxLength"]);v!=null&&r(e,["maxLength"],v);const C=a(n,["maxProperties"]);C!=null&&r(e,["maxProperties"],C);const E=a(n,["maximum"]);E!=null&&r(e,["maximum"],E);const x=a(n,["minItems"]);x!=null&&r(e,["minItems"],x);const U=a(n,["minLength"]);U!=null&&r(e,["minLength"],U);const O=a(n,["minProperties"]);O!=null&&r(e,["minProperties"],O);const q=a(n,["minimum"]);q!=null&&r(e,["minimum"],q);const z=a(n,["nullable"]);z!=null&&r(e,["nullable"],z);const F=a(n,["pattern"]);F!=null&&r(e,["pattern"],F);const Z=a(n,["properties"]);Z!=null&&r(e,["properties"],Z);const ee=a(n,["propertyOrdering"]);ee!=null&&r(e,["propertyOrdering"],ee);const ce=a(n,["required"]);ce!=null&&r(e,["required"],ce);const fe=a(n,["title"]);fe!=null&&r(e,["title"],fe);const oe=a(n,["type"]);return oe!=null&&r(e,["type"],oe),e}function Q_(n){const e={},i=a(n,["anyOf"]);i!=null&&r(e,["anyOf"],i);const l=a(n,["default"]);l!=null&&r(e,["default"],l);const c=a(n,["description"]);c!=null&&r(e,["description"],c);const f=a(n,["enum"]);f!=null&&r(e,["enum"],f);const m=a(n,["example"]);m!=null&&r(e,["example"],m);const g=a(n,["format"]);g!=null&&r(e,["format"],g);const y=a(n,["items"]);y!=null&&r(e,["items"],y);const h=a(n,["maxItems"]);h!=null&&r(e,["maxItems"],h);const v=a(n,["maxLength"]);v!=null&&r(e,["maxLength"],v);const C=a(n,["maxProperties"]);C!=null&&r(e,["maxProperties"],C);const E=a(n,["maximum"]);E!=null&&r(e,["maximum"],E);const x=a(n,["minItems"]);x!=null&&r(e,["minItems"],x);const U=a(n,["minLength"]);U!=null&&r(e,["minLength"],U);const O=a(n,["minProperties"]);O!=null&&r(e,["minProperties"],O);const q=a(n,["minimum"]);q!=null&&r(e,["minimum"],q);const z=a(n,["nullable"]);z!=null&&r(e,["nullable"],z);const F=a(n,["pattern"]);F!=null&&r(e,["pattern"],F);const Z=a(n,["properties"]);Z!=null&&r(e,["properties"],Z);const ee=a(n,["propertyOrdering"]);ee!=null&&r(e,["propertyOrdering"],ee);const ce=a(n,["required"]);ce!=null&&r(e,["required"],ce);const fe=a(n,["title"]);fe!=null&&r(e,["title"],fe);const oe=a(n,["type"]);return oe!=null&&r(e,["type"],oe),e}function Z_(n){const e={},i=a(n,["image"]);return i!=null&&r(e,["image"],Jn(i)),e}function W_(n,e){const i={},l=a(n,["mode"]);e!==void 0&&l!=null&&r(e,["parameters","mode"],l);const c=a(n,["maxPredictions"]);e!==void 0&&c!=null&&r(e,["parameters","maxPredictions"],c);const f=a(n,["confidenceThreshold"]);e!==void 0&&f!=null&&r(e,["parameters","confidenceThreshold"],f);const m=a(n,["maskDilation"]);e!==void 0&&m!=null&&r(e,["parameters","maskDilation"],m);const g=a(n,["binaryColorThreshold"]);return e!==void 0&&g!=null&&r(e,["parameters","binaryColorThreshold"],g),i}function j_(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["source"]);c!=null&&tx(c,i);const f=a(e,["config"]);return f!=null&&W_(f,i),i}function ex(n){const e={},i=a(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>a_(c))),r(e,["generatedMasks"],l)}return e}function tx(n,e){const i={},l=a(n,["prompt"]);e!==void 0&&l!=null&&r(e,["instances[0]","prompt"],l);const c=a(n,["image"]);e!==void 0&&c!=null&&r(e,["instances[0]","image"],Jn(c));const f=a(n,["scribbleImage"]);return e!==void 0&&f!=null&&r(e,["instances[0]","scribble"],Z_(f)),i}function nx(n){const e={},i=a(n,["speaker"]);i!=null&&r(e,["speaker"],i);const l=a(n,["voiceConfig"]);return l!=null&&r(e,["voiceConfig"],og(l)),e}function ox(n){const e={},i=a(n,["voiceConfig"]);i!=null&&r(e,["voiceConfig"],og(i));const l=a(n,["multiSpeakerVoiceConfig"]);l!=null&&r(e,["multiSpeakerVoiceConfig"],b_(l));const c=a(n,["languageCode"]);return c!=null&&r(e,["languageCode"],c),e}function ix(n){const e={},i=a(n,["voiceConfig"]);if(i!=null&&r(e,["voiceConfig"],Lx(i)),a(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const l=a(n,["languageCode"]);return l!=null&&r(e,["languageCode"],l),e}function lx(n){const e={},i=a(n,["styleDescription"]);return i!=null&&r(e,["styleDescription"],i),e}function sx(n){const e={},i=a(n,["subjectType"]);i!=null&&r(e,["subjectType"],i);const l=a(n,["subjectDescription"]);return l!=null&&r(e,["subjectDescription"],l),e}function ax(n){const e={},i=a(n,["includeThoughts"]);i!=null&&r(e,["includeThoughts"],i);const l=a(n,["thinkingBudget"]);return l!=null&&r(e,["thinkingBudget"],l),e}function rx(n){const e={},i=a(n,["includeThoughts"]);i!=null&&r(e,["includeThoughts"],i);const l=a(n,["thinkingBudget"]);return l!=null&&r(e,["thinkingBudget"],l),e}function ux(n){const e={},i=a(n,["functionCallingConfig"]);i!=null&&r(e,["functionCallingConfig"],qA(i));const l=a(n,["retrievalConfig"]);return l!=null&&r(e,["retrievalConfig"],J_(l)),e}function cx(n){const e={},i=a(n,["functionCallingConfig"]);i!=null&&r(e,["functionCallingConfig"],PA(i));const l=a(n,["retrievalConfig"]);return l!=null&&r(e,["retrievalConfig"],Y_(l)),e}function fx(n){const e={},i=a(n,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>GA(h))),r(e,["functionDeclarations"],y)}if(a(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=a(n,["googleSearch"]);l!=null&&r(e,["googleSearch"],h_(l));const c=a(n,["googleSearchRetrieval"]);if(c!=null&&r(e,["googleSearchRetrieval"],p_(c)),a(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(n,["urlContext"])!=null&&r(e,["urlContext"],Ax());const m=a(n,["computerUse"]);m!=null&&r(e,["computerUse"],QE(m));const g=a(n,["codeExecution"]);return g!=null&&r(e,["codeExecution"],g),e}function tg(n){const e={},i=a(n,["functionDeclarations"]);if(i!=null){let C=i;Array.isArray(C)&&(C=C.map(E=>HA(E))),r(e,["functionDeclarations"],C)}const l=a(n,["retrieval"]);l!=null&&r(e,["retrieval"],l);const c=a(n,["googleSearch"]);c!=null&&r(e,["googleSearch"],g_(c));const f=a(n,["googleSearchRetrieval"]);f!=null&&r(e,["googleSearchRetrieval"],m_(f));const m=a(n,["enterpriseWebSearch"]);m!=null&&r(e,["enterpriseWebSearch"],RA(m));const g=a(n,["googleMaps"]);g!=null&&r(e,["googleMaps"],d_(g)),a(n,["urlContext"])!=null&&r(e,["urlContext"],_x());const h=a(n,["computerUse"]);h!=null&&r(e,["computerUse"],ZE(h));const v=a(n,["codeExecution"]);return v!=null&&r(e,["codeExecution"],v),e}function dx(n){const e={},i=a(n,["baseModel"]);i!=null&&r(e,["baseModel"],i);const l=a(n,["createTime"]);l!=null&&r(e,["createTime"],l);const c=a(n,["updateTime"]);return c!=null&&r(e,["updateTime"],c),e}function px(n){const e={},i=a(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&r(e,["baseModel"],i);const l=a(n,["createTime"]);l!=null&&r(e,["createTime"],l);const c=a(n,["updateTime"]);return c!=null&&r(e,["updateTime"],c),e}function mx(n,e){const i={},l=a(n,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const c=a(n,["description"]);e!==void 0&&c!=null&&r(e,["description"],c);const f=a(n,["defaultCheckpointId"]);return e!==void 0&&f!=null&&r(e,["defaultCheckpointId"],f),i}function hx(n,e){const i={},l=a(n,["displayName"]);e!==void 0&&l!=null&&r(e,["displayName"],l);const c=a(n,["description"]);e!==void 0&&c!=null&&r(e,["description"],c);const f=a(n,["defaultCheckpointId"]);return e!==void 0&&f!=null&&r(e,["defaultCheckpointId"],f),i}function gx(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","name"],gt(n,l));const c=a(e,["config"]);return c!=null&&mx(c,i),i}function yx(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["config"]);return c!=null&&hx(c,i),i}function vx(n,e){const i={},l=a(n,["outputGcsUri"]);e!==void 0&&l!=null&&r(e,["parameters","storageUri"],l);const c=a(n,["includeRaiReason"]);e!==void 0&&c!=null&&r(e,["parameters","includeRaiReason"],c);const f=a(n,["outputMimeType"]);e!==void 0&&f!=null&&r(e,["parameters","outputOptions","mimeType"],f);const m=a(n,["outputCompressionQuality"]);e!==void 0&&m!=null&&r(e,["parameters","outputOptions","compressionQuality"],m);const g=a(n,["enhanceInputImage"]);e!==void 0&&g!=null&&r(e,["parameters","upscaleConfig","enhanceInputImage"],g);const y=a(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&r(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const h=a(n,["numberOfImages"]);e!==void 0&&h!=null&&r(e,["parameters","sampleCount"],h);const v=a(n,["mode"]);return e!==void 0&&v!=null&&r(e,["parameters","mode"],v),i}function Tx(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["_url","model"],gt(n,l));const c=a(e,["image"]);c!=null&&r(i,["instances[0]","image"],Jn(c));const f=a(e,["upscaleFactor"]);f!=null&&r(i,["parameters","upscaleConfig","upscaleFactor"],f);const m=a(e,["config"]);return m!=null&&vx(m,i),i}function Cx(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["predictions"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(f=>_a(f))),r(e,["generatedImages"],c)}return e}function Sx(n){const e={},i=a(n,["urlMetadata"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>xx(c))),r(e,["urlMetadata"],l)}return e}function Ex(n){const e={},i=a(n,["urlMetadata"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>Mx(c))),r(e,["urlMetadata"],l)}return e}function Ax(){return{}}function _x(){return{}}function xx(n){const e={},i=a(n,["retrievedUrl"]);i!=null&&r(e,["retrievedUrl"],i);const l=a(n,["urlRetrievalStatus"]);return l!=null&&r(e,["urlRetrievalStatus"],l),e}function Mx(n){const e={},i=a(n,["retrievedUrl"]);i!=null&&r(e,["retrievedUrl"],i);const l=a(n,["urlRetrievalStatus"]);return l!=null&&r(e,["urlRetrievalStatus"],l),e}function Nx(n){const e={},i=a(n,["video","uri"]);i!=null&&r(e,["uri"],i);const l=a(n,["video","encodedVideo"]);l!=null&&r(e,["videoBytes"],pi(l));const c=a(n,["encoding"]);return c!=null&&r(e,["mimeType"],c),e}function Rx(n){const e={},i=a(n,["gcsUri"]);i!=null&&r(e,["uri"],i);const l=a(n,["bytesBase64Encoded"]);l!=null&&r(e,["videoBytes"],pi(l));const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function Ix(n){const e={},i=a(n,["image"]);i!=null&&r(e,["_self"],Jn(i));const l=a(n,["maskMode"]);return l!=null&&r(e,["maskMode"],l),e}function wx(n){const e={},i=a(n,["image"]);i!=null&&r(e,["image"],Jn(i));const l=a(n,["referenceType"]);return l!=null&&r(e,["referenceType"],l),e}function Dx(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function bx(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function kx(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function Ux(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function ng(n){const e={},i=a(n,["uri"]);i!=null&&r(e,["gcsUri"],i);const l=a(n,["videoBytes"]);l!=null&&r(e,["bytesBase64Encoded"],pi(l));const c=a(n,["mimeType"]);return c!=null&&r(e,["mimeType"],c),e}function og(n){const e={},i=a(n,["prebuiltVoiceConfig"]);return i!=null&&r(e,["prebuiltVoiceConfig"],B_(i)),e}function Lx(n){const e={},i=a(n,["prebuiltVoiceConfig"]);return i!=null&&r(e,["prebuiltVoiceConfig"],q_(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Vx="Content-Type",Bx="X-Server-Timeout",qx="User-Agent",Qu="x-goog-api-client",Px="1.22.0",Gx=`google-genai-sdk/${Px}`,Hx="v1beta1",zx="v1beta",fh=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Ox{constructor(e){var i,l;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const c={};this.clientOptions.vertexai?(c.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Hx,c.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(c.apiVersion=(l=this.clientOptions.apiVersion)!==null&&l!==void 0?l:zx,c.baseUrl="https://generativelanguage.googleapis.com/"),c.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=c,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(c,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const l=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&l.push(e.apiVersion),l.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),i=new URL(e);return i.protocol=i.protocol=="http:"?"ws":"wss",i.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,i,l){const c=[this.getRequestUrlInternal(i)];return l&&c.push(this.getBaseResourcePath()),e!==""&&c.push(e),new URL(`${c.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const l=this.shouldPrependVertexProjectPath(e),c=this.constructUrl(e.path,i,l);if(e.queryParams)for(const[m,g]of Object.entries(e.queryParams))c.searchParams.append(m,String(g));let f={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else f.body=e.body;return f=await this.includeExtraHttpOptionsToRequestInit(f,i,e.abortSignal),this.unaryApiCall(c,f,e.httpMethod)}patchHttpOptions(e,i){const l=JSON.parse(JSON.stringify(e));for(const[c,f]of Object.entries(i))typeof f=="object"?l[c]=Object.assign(Object.assign({},l[c]),f):f!==void 0&&(l[c]=f);return l}async requestStream(e){let i=this.clientOptions.httpOptions;e.httpOptions&&(i=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const l=this.shouldPrependVertexProjectPath(e),c=this.constructUrl(e.path,i,l);(!c.searchParams.has("alt")||c.searchParams.get("alt")!=="sse")&&c.searchParams.set("alt","sse");let f={};return f.body=e.body,f=await this.includeExtraHttpOptionsToRequestInit(f,i,e.abortSignal),this.streamApiCall(c,f,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,i,l){if(i&&i.timeout||l){const c=new AbortController,f=c.signal;if(i.timeout&&(i==null?void 0:i.timeout)>0){const m=setTimeout(()=>c.abort(),i.timeout);m&&typeof m.unref=="function"&&m.unref()}l&&l.addEventListener("abort",()=>{c.abort()}),e.signal=f}return i&&i.extraBody!==null&&Fx(e,i.extraBody),e.headers=await this.getHeadersInternal(i),e}async unaryApiCall(e,i,l){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:l})).then(async c=>(await dh(c),new Ou(c))).catch(c=>{throw c instanceof Error?c:new Error(JSON.stringify(c))})}async streamApiCall(e,i,l){return this.apiCall(e.toString(),Object.assign(Object.assign({},i),{method:l})).then(async c=>(await dh(c),this.processStreamResponse(c))).catch(c=>{throw c instanceof Error?c:new Error(JSON.stringify(c))})}processStreamResponse(e){var i;return Wi(this,arguments,function*(){const c=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),f=new TextDecoder("utf-8");if(!c)throw new Error("Response body is empty");try{let m="";for(;;){const{done:g,value:y}=yield Ut(c.read());if(g){if(m.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=f.decode(y,{stream:!0});try{const C=JSON.parse(h);if("error"in C){const E=JSON.parse(JSON.stringify(C.error)),x=E.status,U=E.code,O=`got status: ${x}. ${JSON.stringify(C)}`;if(U>=400&&U<600)throw new Ea({message:O,status:U})}}catch(C){if(C.name==="ApiError")throw C}m+=h;let v=m.match(fh);for(;v;){const C=v[1];try{const E=new Response(C,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ut(new Ou(E)),m=m.slice(v[0].length),v=m.match(fh)}catch(E){throw new Error(`exception parsing stream chunk ${C}. ${E}`)}}}}finally{c.releaseLock()}})}async apiCall(e,i){return fetch(e,i).catch(l=>{throw new Error(`exception ${l} sending request`)})}getDefaultHeaders(){const e={},i=Gx+" "+this.clientOptions.userAgentExtra;return e[qx]=i,e[Qu]=i,e[Vx]="application/json",e}async getHeadersInternal(e){const i=new Headers;if(e&&e.headers){for(const[l,c]of Object.entries(e.headers))i.append(l,c);e.timeout&&e.timeout>0&&i.append(Bx,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i),i}async uploadFile(e,i){var l;const c={};i!=null&&(c.mimeType=i.mimeType,c.name=i.name,c.displayName=i.displayName),c.name&&!c.name.startsWith("files/")&&(c.name=`files/${c.name}`);const f=this.clientOptions.uploader,m=await f.stat(e);c.sizeBytes=String(m.size);const g=(l=i==null?void 0:i.mimeType)!==null&&l!==void 0?l:m.type;if(g===void 0||g==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");c.mimeType=g;const y=await this.fetchUploadUrl(c,i);return f.upload(e,y,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,i){var l;let c={};i!=null&&i.httpOptions?c=i.httpOptions:c={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const f={file:e},m=await this.request({path:ye("upload/v1beta/files",f._url),body:JSON.stringify(f),httpMethod:"POST",httpOptions:c});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const g=(l=m==null?void 0:m.headers)===null||l===void 0?void 0:l["x-goog-upload-url"];if(g===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return g}}async function dh(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const i=n.status;let l;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?l=await n.json():l={error:{message:await n.text(),code:n.status,status:n.statusText}};const c=JSON.stringify(l);throw i>=400&&i<600?new Ea({message:c,status:i}):new Error(c)}}function Fx(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let i={};if(typeof n.body=="string"&&n.body.length>0)try{const f=JSON.parse(n.body);if(typeof f=="object"&&f!==null&&!Array.isArray(f))i=f;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function l(f,m){const g=Object.assign({},f);for(const y in m)if(Object.prototype.hasOwnProperty.call(m,y)){const h=m[y],v=g[y];h&&typeof h=="object"&&!Array.isArray(h)&&v&&typeof v=="object"&&!Array.isArray(v)?g[y]=l(v,h):(v&&h&&typeof v!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof h}. Overwriting.`),g[y]=h)}return g}const c=l(i,e);n.body=JSON.stringify(c)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jx="mcp_used/unknown";let Yx=!1;function ig(n){for(const e of n)if($x(e)||typeof e=="object"&&"inputSchema"in e)return!0;return Yx}function lg(n){var e;const i=(e=n[Qu])!==null&&e!==void 0?e:"";n[Qu]=(i+` ${Jx}`).trimStart()}function $x(n){return n!==null&&typeof n=="object"&&n instanceof lc}function Kx(n,e=100){return Wi(this,arguments,function*(){let l,c=0;for(;c<e;){const f=yield Ut(n.listTools({cursor:l}));for(const m of f.tools)yield yield Ut(m),c++;if(!f.nextCursor)break;l=f.nextCursor}})}class lc{constructor(e=[],i){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=i}static create(e,i){return new lc(e,i)}async initialize(){var e,i,l,c;if(this.mcpTools.length>0)return;const f={},m=[];for(const v of this.mcpClients)try{for(var g=!0,y=(i=void 0,jl(Kx(v))),h;h=await y.next(),e=h.done,!e;g=!0){c=h.value,g=!1;const C=c;m.push(C);const E=C.name;if(f[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);f[E]=v}}catch(C){i={error:C}}finally{try{!g&&!e&&(l=y.return)&&await l.call(y)}finally{if(i)throw i.error}}this.mcpTools=m,this.functionNameToMcpClient=f}async tool(){return await this.initialize(),iT(this.mcpTools,this.config)}async callTool(e){await this.initialize();const i=[];for(const l of e)if(l.name in this.functionNameToMcpClient){const c=this.functionNameToMcpClient[l.name];let f;this.config.timeout&&(f={timeout:this.config.timeout});const m=await c.callTool({name:l.name,arguments:l.args},void 0,f);i.push({functionResponse:{name:l.name,response:m.isError?{error:m}:m}})}return i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Xx(n,e,i){const l=new Qv;let c;i.data instanceof Blob?c=JSON.parse(await i.data.text()):c=JSON.parse(i.data);const f=V0(c);Object.assign(l,f),e(l)}class Qx{constructor(e,i,l){this.apiClient=e,this.auth=i,this.webSocketFactory=l}async connect(e){var i,l;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const c=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion(),m=jx(this.apiClient.getDefaultHeaders()),g=this.apiClient.getApiKey(),y=`${c}/ws/google.ai.generativelanguage.${f}.GenerativeService.BidiGenerateMusic?key=${g}`;let h=()=>{};const v=new Promise(Z=>{h=Z}),C=e.callbacks,E=function(){h({})},x=this.apiClient,U={onopen:E,onmessage:Z=>{Xx(x,C.onmessage,Z)},onerror:(i=C==null?void 0:C.onerror)!==null&&i!==void 0?i:function(Z){},onclose:(l=C==null?void 0:C.onclose)!==null&&l!==void 0?l:function(Z){}},O=this.webSocketFactory.create(y,Wx(m),U);O.connect(),await v;const q=gt(this.apiClient,e.model),z=$h({model:q}),F=$u({setup:z});return O.send(JSON.stringify(F)),new Zx(O,this.apiClient)}}class Zx{constructor(e,i){this.conn=e,this.apiClient=i}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const i=P0(e),l=Yh(i);this.conn.send(JSON.stringify({clientContent:l}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const i=q0(e),l=$u(i);this.conn.send(JSON.stringify(l))}sendPlaybackControl(e){const i=$u({playbackControl:e});this.conn.send(JSON.stringify(i))}play(){this.sendPlaybackControl(Qi.PLAY)}pause(){this.sendPlaybackControl(Qi.PAUSE)}stop(){this.sendPlaybackControl(Qi.STOP)}resetContext(){this.sendPlaybackControl(Qi.RESET_CONTEXT)}close(){this.conn.close()}}function Wx(n){const e={};return n.forEach((i,l)=>{e[l]=i}),e}function jx(n){const e=new Headers;for(const[i,l]of Object.entries(n))e.append(i,l);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const eM="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function tM(n,e,i){const l=new Xv;let c;i.data instanceof Blob?c=await i.data.text():i.data instanceof ArrayBuffer?c=new TextDecoder().decode(i.data):c=i.data;const f=JSON.parse(c);if(n.isVertexAI()){const m=K0(f);Object.assign(l,m)}else{const m=$0(f);Object.assign(l,m)}e(l)}class nM{constructor(e,i,l){this.apiClient=e,this.auth=i,this.webSocketFactory=l,this.music=new Qx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var i,l,c,f,m,g;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let v;const C=this.apiClient.getHeaders();e.config&&e.config.tools&&ig(e.config.tools)&&lg(C);const E=sM(C);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E);else{const j=this.apiClient.getApiKey();let me="BidiGenerateContent",re="key";j!=null&&j.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),me="BidiGenerateContentConstrained",re="access_token"),v=`${y}/ws/google.ai.generativelanguage.${h}.GenerativeService.${me}?${re}=${j}`}let x=()=>{};const U=new Promise(j=>{x=j}),O=e.callbacks,q=function(){var j;(j=O==null?void 0:O.onopen)===null||j===void 0||j.call(O),x({})},z=this.apiClient,F={onopen:q,onmessage:j=>{tM(z,O.onmessage,j)},onerror:(i=O==null?void 0:O.onerror)!==null&&i!==void 0?i:function(j){},onclose:(l=O==null?void 0:O.onclose)!==null&&l!==void 0?l:function(j){}},Z=this.webSocketFactory.create(v,lM(E),F);Z.connect(),await U;let ee=gt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ee.startsWith("publishers/")){const j=this.apiClient.getProject(),me=this.apiClient.getLocation();ee=`projects/${j}/locations/${me}/`+ee}let ce={};this.apiClient.isVertexAI()&&((c=e.config)===null||c===void 0?void 0:c.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Ta.AUDIO]}:e.config.responseModalities=[Ta.AUDIO]),!((f=e.config)===null||f===void 0)&&f.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const fe=(g=(m=e.config)===null||m===void 0?void 0:m.tools)!==null&&g!==void 0?g:[],oe=[];for(const j of fe)if(this.isCallableTool(j)){const me=j;oe.push(await me.tool())}else oe.push(j);oe.length>0&&(e.config.tools=oe);const pe={model:ee,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ce=D0(this.apiClient,pe):ce=w0(this.apiClient,pe),delete ce.config,Z.send(JSON.stringify(ce)),new iM(Z,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const oM={turnComplete:!0};class iM{constructor(e,i){this.conn=e,this.apiClient=i}tLiveClientContent(e,i){if(i.turns!==null&&i.turns!==void 0){let l=[];try{l=Hn(i.turns),e.isVertexAI()?l=l.map(c=>ol(c)):l=l.map(c=>Aa(c))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof i.turns}'`)}return{clientContent:{turns:l,turnComplete:i.turnComplete}}}return{clientContent:{turnComplete:i.turnComplete}}}tLiveClienttToolResponse(e,i){let l=[];if(i.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(i.functionResponses)?l=i.functionResponses:l=[i.functionResponses],l.length===0)throw new Error("functionResponses is required.");for(const f of l){if(typeof f!="object"||f===null||!("name"in f)||!("response"in f))throw new Error(`Could not parse function response, type '${typeof f}'.`);if(!e.isVertexAI()&&!("id"in f))throw new Error(eM)}return{toolResponse:{functionResponses:l}}}sendClientContent(e){e=Object.assign(Object.assign({},oM),e);const i=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(i))}sendRealtimeInput(e){let i={};this.apiClient.isVertexAI()?i={realtimeInput:z0(e)}:i={realtimeInput:H0(e)},this.conn.send(JSON.stringify(i))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const i=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(i))}close(){this.conn.close()}}function lM(n){const e={};return n.forEach((i,l)=>{e[l]=i}),e}function sM(n){const e=new Headers;for(const[i,l]of Object.entries(n))e.append(i,l);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ph=10;function mh(n){var e,i,l;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let c=!1;for(const m of(i=n==null?void 0:n.tools)!==null&&i!==void 0?i:[])if(ji(m)){c=!0;break}if(!c)return!0;const f=(l=n==null?void 0:n.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls;return f&&(f<0||!Number.isInteger(f))||f==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",f),!0):!1}function ji(n){return"callTool"in n&&typeof n.callTool=="function"}function aM(n){var e,i,l;return(l=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(c=>ji(c)))!==null&&l!==void 0?l:!1}function rM(n){var e,i,l;return(l=(i=(e=n.config)===null||e===void 0?void 0:e.tools)===null||i===void 0?void 0:i.some(c=>!ji(c)))!==null&&l!==void 0?l:!1}function hh(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uM extends di{constructor(e){super(),this.apiClient=e,this.generateContent=async i=>{var l,c,f,m,g;const y=await this.processParamsMaybeAddMcpUsage(i);if(this.maybeMoveToResponseJsonSchem(i),!aM(i)||mh(i.config))return await this.generateContentInternal(y);if(rM(i))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let h,v;const C=Hn(y.contents),E=(f=(c=(l=y.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.maximumRemoteCalls)!==null&&f!==void 0?f:ph;let x=0;for(;x<E&&(h=await this.generateContentInternal(y),!(!h.functionCalls||h.functionCalls.length===0));){const U=h.candidates[0].content,O=[];for(const q of(g=(m=i.config)===null||m===void 0?void 0:m.tools)!==null&&g!==void 0?g:[])if(ji(q)){const F=await q.callTool(h.functionCalls);O.push(...F)}x++,v={role:"user",parts:O},y.contents=Hn(y.contents),y.contents.push(U),y.contents.push(v),hh(y.config)&&(C.push(U),C.push(v))}return hh(y.config)&&(h.automaticFunctionCallingHistory=C),h},this.generateContentStream=async i=>{if(this.maybeMoveToResponseJsonSchem(i),mh(i.config)){const l=await this.processParamsMaybeAddMcpUsage(i);return await this.generateContentStreamInternal(l)}else return await this.processAfcStream(i)},this.generateImages=async i=>await this.generateImagesInternal(i).then(l=>{var c;let f;const m=[];if(l!=null&&l.generatedImages)for(const y of l.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((c=y==null?void 0:y.safetyAttributes)===null||c===void 0?void 0:c.contentType)==="Positive Prompt"?f=y==null?void 0:y.safetyAttributes:m.push(y);let g;return f?g={generatedImages:m,positivePromptSafetyAttributes:f,sdkHttpResponse:l.sdkHttpResponse}:g={generatedImages:m,sdkHttpResponse:l.sdkHttpResponse},g}),this.list=async i=>{var l;const m={config:Object.assign(Object.assign({},{queryBase:!0}),i==null?void 0:i.config)};if(this.apiClient.isVertexAI()&&!m.config.queryBase){if(!((l=m.config)===null||l===void 0)&&l.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");m.config.filter="labels.tune-type:*"}return new es(fi.PAGED_ITEM_MODELS,g=>this.listInternal(g),await this.listInternal(m),m)},this.editImage=async i=>{const l={model:i.model,prompt:i.prompt,referenceImages:[],config:i.config};return i.referenceImages&&i.referenceImages&&(l.referenceImages=i.referenceImages.map(c=>c.toReferenceImageAPI())),await this.editImageInternal(l)},this.upscaleImage=async i=>{let l={numberOfImages:1,mode:"upscale"};i.config&&(l=Object.assign(Object.assign({},l),i.config));const c={model:i.model,image:i.image,upscaleFactor:i.upscaleFactor,config:l};return await this.upscaleImageInternal(c)},this.generateVideos=async i=>{if((i.prompt||i.image||i.video)&&i.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return await this.generateVideosInternal(i)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var i,l,c;const f=(i=e.config)===null||i===void 0?void 0:i.tools;if(!f)return e;const m=await Promise.all(f.map(async y=>ji(y)?await y.tool():y)),g={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:m})};if(g.config.tools=m,e.config&&e.config.tools&&ig(e.config.tools)){const y=(c=(l=e.config.httpOptions)===null||l===void 0?void 0:l.headers)!==null&&c!==void 0?c:{};let h=Object.assign({},y);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),lg(h),g.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return g}async initAfcToolsMap(e){var i,l,c;const f=new Map;for(const m of(l=(i=e.config)===null||i===void 0?void 0:i.tools)!==null&&l!==void 0?l:[])if(ji(m)){const g=m,y=await g.tool();for(const h of(c=y.functionDeclarations)!==null&&c!==void 0?c:[]){if(!h.name)throw new Error("Function declaration name is required.");if(f.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);f.set(h.name,g)}}return f}async processAfcStream(e){var i,l,c;const f=(c=(l=(i=e.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||l===void 0?void 0:l.maximumRemoteCalls)!==null&&c!==void 0?c:ph;let m=!1,g=0;const y=await this.initAfcToolsMap(e);return(function(h,v,C){var E,x;return Wi(this,arguments,function*(){for(var U,O,q,z;g<f;){m&&(g++,m=!1);const ce=yield Ut(h.processParamsMaybeAddMcpUsage(C)),fe=yield Ut(h.generateContentStreamInternal(ce)),oe=[],pe=[];try{for(var F=!0,Z=(O=void 0,jl(fe)),ee;ee=yield Ut(Z.next()),U=ee.done,!U;F=!0){z=ee.value,F=!1;const j=z;if(yield yield Ut(j),j.candidates&&(!((E=j.candidates[0])===null||E===void 0)&&E.content)){pe.push(j.candidates[0].content);for(const me of(x=j.candidates[0].content.parts)!==null&&x!==void 0?x:[])if(g<f&&me.functionCall){if(!me.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(me.functionCall.name)){const re=yield Ut(v.get(me.functionCall.name).callTool([me.functionCall]));oe.push(...re)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${me.functionCall.name}`)}}}}catch(j){O={error:j}}finally{try{!F&&!U&&(q=Z.return)&&(yield Ut(q.call(Z)))}finally{if(O)throw O.error}}if(oe.length>0){m=!0;const j=new Wl;j.candidates=[{content:{role:"user",parts:oe}}],yield yield Ut(j);const me=[];me.push(...pe),me.push({role:"user",parts:oe});const re=Hn(C.contents).concat(me);C.contents=re}else break}})})(this,y,e)}async generateContentInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=rh(this.apiClient,e);return g=ye("{model}:generateContent",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=ch(v),E=new Wl;return Object.assign(E,C),E})}else{const h=ah(this.apiClient,e);return g=ye("{model}:generateContent",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=uh(v),E=new Wl;return Object.assign(E,C),E})}}async generateContentStreamInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=rh(this.apiClient,e);return g=ye("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.requestStream({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),m.then(function(C){return Wi(this,arguments,function*(){var E,x,U,O;try{for(var q=!0,z=jl(C),F;F=yield Ut(z.next()),E=F.done,!E;q=!0){O=F.value,q=!1;const Z=O,ee=ch(yield Ut(Z.json()));ee.sdkHttpResponse={headers:Z.headers};const ce=new Wl;Object.assign(ce,ee),yield yield Ut(ce)}}catch(Z){x={error:Z}}finally{try{!q&&!E&&(U=z.return)&&(yield Ut(U.call(z)))}finally{if(x)throw x.error}}})})}else{const h=ah(this.apiClient,e);return g=ye("{model}:streamGenerateContent?alt=sse",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.requestStream({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}),m.then(function(C){return Wi(this,arguments,function*(){var E,x,U,O;try{for(var q=!0,z=jl(C),F;F=yield Ut(z.next()),E=F.done,!E;q=!0){O=F.value,q=!1;const Z=O,ee=uh(yield Ut(Z.json()));ee.sdkHttpResponse={headers:Z.headers};const ce=new Wl;Object.assign(ce,ee),yield yield Ut(ce)}}catch(Z){x={error:Z}}finally{try{!q&&!E&&(U=z.return)&&(yield Ut(U.call(z)))}finally{if(x)throw x.error}}})})}}async embedContent(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=_A(this.apiClient,e);return g=ye("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=MA(v),E=new Hm;return Object.assign(E,C),E})}else{const h=AA(this.apiClient,e);return g=ye("{model}:batchEmbedContents",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=xA(v),E=new Hm;return Object.assign(E,C),E})}}async generateImagesInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=$A(this.apiClient,e);return g=ye("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=XA(v),E=new zm;return Object.assign(E,C),E})}else{const h=YA(this.apiClient,e);return g=ye("{model}:predict",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=KA(v),E=new zm;return Object.assign(E,C),E})}}async editImageInternal(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const g=yA(this.apiClient,e);return f=ye("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const h=vA(y),v=new Hv;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const g=Tx(this.apiClient,e);return f=ye("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const h=Cx(y),v=new zv;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const g=H_(this.apiClient,e);return f=ye("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const h=z_(y),v=new Ov;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const g=j_(this.apiClient,e);return f=ye("{model}:predict",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c.then(y=>{const h=ex(y),v=new Fv;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=f_(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>Xu(v))}else{const h=c_(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Ku(v))}}async listInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=N_(this.apiClient,e);return g=ye("{models_url}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=I_(v),E=new Om;return Object.assign(E,C),E})}else{const h=M_(this.apiClient,e);return g=ye("{models_url}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=R_(v),E=new Om;return Object.assign(E,C),E})}}async update(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=yx(this.apiClient,e);return g=ye("{model}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>Xu(v))}else{const h=gx(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>Ku(v))}}async delete(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=fA(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=pA(v),E=new Fm;return Object.assign(E,C),E})}else{const h=cA(this.apiClient,e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=dA(v),E=new Fm;return Object.assign(E,C),E})}}async countTokens(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=aA(this.apiClient,e);return g=ye("{model}:countTokens",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=uA(v),E=new Jm;return Object.assign(E,C),E})}else{const h=sA(this.apiClient,e);return g=ye("{model}:countTokens",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=rA(v),E=new Jm;return Object.assign(E,C),E})}}async computeTokens(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const g=KE(this.apiClient,e);return f=ye("{model}:computeTokens",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>{const h=XE(y),v=new Jv;return Object.assign(v,h),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=t_(this.apiClient,e);return g=ye("{model}:predictLongRunning",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m.then(v=>{const C=jA(v),E=new Ca;return Object.assign(E,C),E})}else{const h=e_(this.apiClient,e);return g=ye("{model}:predictLongRunning",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m.then(v=>{const C=WA(v),E=new Ca;return Object.assign(E,C),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class cM extends di{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const i=e.operation,l=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const c=i.name.split("/operations/")[0];let f;l&&"httpOptions"in l&&(f=l.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:c,config:{httpOptions:f}});return i._fromAPIResponse({apiResponse:m,isVertexAI:!0})}else{const c=await this.getVideosOperationInternal({operationName:i.name,config:l});return i._fromAPIResponse({apiResponse:c,isVertexAI:!1})}}async get(e){const i=e.operation,l=e.config;if(i.name===void 0||i.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const c=i.name.split("/operations/")[0];let f;l&&"httpOptions"in l&&(f=l.httpOptions);const m=await this.fetchPredictVideosOperationInternal({operationName:i.name,resourceName:c,config:{httpOptions:f}});return i._fromAPIResponse({apiResponse:m,isVertexAI:!0})}else{const c=await this.getVideosOperationInternal({operationName:i.name,config:l});return i._fromAPIResponse({apiResponse:c,isVertexAI:!1})}}async getVideosOperationInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=qv(e);return g=ye("{operationName}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),m}else{const h=Bv(e);return g=ye("{operationName}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json()),m}}async fetchPredictVideosOperationInternal(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const g=wv(e);return f=ye("{resourceName}:fetchPredictOperation",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json()),c}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gh(){return{}}function fM(n){const e={},i=a(n,["name"]);return i!=null&&r(e,["name"],i),e}function dM(n){const e={},i=a(n,["disabled"]);i!=null&&r(e,["disabled"],i);const l=a(n,["startOfSpeechSensitivity"]);l!=null&&r(e,["startOfSpeechSensitivity"],l);const c=a(n,["endOfSpeechSensitivity"]);c!=null&&r(e,["endOfSpeechSensitivity"],c);const f=a(n,["prefixPaddingMs"]);f!=null&&r(e,["prefixPaddingMs"],f);const m=a(n,["silenceDurationMs"]);return m!=null&&r(e,["silenceDurationMs"],m),e}function pM(n){const e={};if(a(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(n,["data"]);i!=null&&r(e,["data"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function mM(n){const e={},i=a(n,["environment"]);i!=null&&r(e,["environment"],i);const l=a(n,["excludedPredefinedFunctions"]);return l!=null&&r(e,["excludedPredefinedFunctions"],l),e}function hM(n){const e={},i=a(n,["parts"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(f=>IM(f))),r(e,["parts"],c)}const l=a(n,["role"]);return l!=null&&r(e,["role"],l),e}function gM(n){const e={},i=a(n,["triggerTokens"]);i!=null&&r(e,["triggerTokens"],i);const l=a(n,["slidingWindow"]);return l!=null&&r(e,["slidingWindow"],UM(l)),e}function yM(n,e,i){const l={},c=a(e,["expireTime"]);i!==void 0&&c!=null&&r(i,["expireTime"],c);const f=a(e,["newSessionExpireTime"]);i!==void 0&&f!=null&&r(i,["newSessionExpireTime"],f);const m=a(e,["uses"]);i!==void 0&&m!=null&&r(i,["uses"],m);const g=a(e,["liveConnectConstraints"]);i!==void 0&&g!=null&&r(i,["bidiGenerateContentSetup"],NM(n,g));const y=a(e,["lockAdditionalFields"]);return i!==void 0&&y!=null&&r(i,["fieldMask"],y),l}function vM(n,e){const i={},l=a(e,["config"]);return l!=null&&r(i,["config"],yM(n,l,i)),i}function TM(n){const e={},i=a(n,["mode"]);i!=null&&r(e,["mode"],i);const l=a(n,["dynamicThreshold"]);return l!=null&&r(e,["dynamicThreshold"],l),e}function CM(n){const e={};if(a(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=a(n,["fileUri"]);i!=null&&r(e,["fileUri"],i);const l=a(n,["mimeType"]);return l!=null&&r(e,["mimeType"],l),e}function SM(n){const e={},i=a(n,["id"]);i!=null&&r(e,["id"],i);const l=a(n,["args"]);l!=null&&r(e,["args"],l);const c=a(n,["name"]);return c!=null&&r(e,["name"],c),e}function EM(n){const e={},i=a(n,["behavior"]);i!=null&&r(e,["behavior"],i);const l=a(n,["description"]);l!=null&&r(e,["description"],l);const c=a(n,["name"]);c!=null&&r(e,["name"],c);const f=a(n,["parameters"]);f!=null&&r(e,["parameters"],f);const m=a(n,["parametersJsonSchema"]);m!=null&&r(e,["parametersJsonSchema"],m);const g=a(n,["response"]);g!=null&&r(e,["response"],g);const y=a(n,["responseJsonSchema"]);return y!=null&&r(e,["responseJsonSchema"],y),e}function AM(n){const e={},i=a(n,["dynamicRetrievalConfig"]);return i!=null&&r(e,["dynamicRetrievalConfig"],TM(i)),e}function _M(n){const e={},i=a(n,["timeRangeFilter"]);if(i!=null&&r(e,["timeRangeFilter"],xM(i)),a(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function xM(n){const e={},i=a(n,["startTime"]);i!=null&&r(e,["startTime"],i);const l=a(n,["endTime"]);return l!=null&&r(e,["endTime"],l),e}function MM(n,e){const i={},l=a(n,["generationConfig"]);e!==void 0&&l!=null&&r(e,["setup","generationConfig"],l);const c=a(n,["responseModalities"]);e!==void 0&&c!=null&&r(e,["setup","generationConfig","responseModalities"],c);const f=a(n,["temperature"]);e!==void 0&&f!=null&&r(e,["setup","generationConfig","temperature"],f);const m=a(n,["topP"]);e!==void 0&&m!=null&&r(e,["setup","generationConfig","topP"],m);const g=a(n,["topK"]);e!==void 0&&g!=null&&r(e,["setup","generationConfig","topK"],g);const y=a(n,["maxOutputTokens"]);e!==void 0&&y!=null&&r(e,["setup","generationConfig","maxOutputTokens"],y);const h=a(n,["mediaResolution"]);e!==void 0&&h!=null&&r(e,["setup","generationConfig","mediaResolution"],h);const v=a(n,["seed"]);e!==void 0&&v!=null&&r(e,["setup","generationConfig","seed"],v);const C=a(n,["speechConfig"]);e!==void 0&&C!=null&&r(e,["setup","generationConfig","speechConfig"],VM(oc(C)));const E=a(n,["thinkingConfig"]);e!==void 0&&E!=null&&r(e,["setup","generationConfig","thinkingConfig"],BM(E));const x=a(n,["enableAffectiveDialog"]);e!==void 0&&x!=null&&r(e,["setup","generationConfig","enableAffectiveDialog"],x);const U=a(n,["systemInstruction"]);e!==void 0&&U!=null&&r(e,["setup","systemInstruction"],hM(dn(U)));const O=a(n,["tools"]);if(e!==void 0&&O!=null){let fe=tl(O);Array.isArray(fe)&&(fe=fe.map(oe=>qM(el(oe)))),r(e,["setup","tools"],fe)}const q=a(n,["sessionResumption"]);e!==void 0&&q!=null&&r(e,["setup","sessionResumption"],kM(q));const z=a(n,["inputAudioTranscription"]);e!==void 0&&z!=null&&r(e,["setup","inputAudioTranscription"],gh());const F=a(n,["outputAudioTranscription"]);e!==void 0&&F!=null&&r(e,["setup","outputAudioTranscription"],gh());const Z=a(n,["realtimeInputConfig"]);e!==void 0&&Z!=null&&r(e,["setup","realtimeInputConfig"],bM(Z));const ee=a(n,["contextWindowCompression"]);e!==void 0&&ee!=null&&r(e,["setup","contextWindowCompression"],gM(ee));const ce=a(n,["proactivity"]);return e!==void 0&&ce!=null&&r(e,["setup","proactivity"],DM(ce)),i}function NM(n,e){const i={},l=a(e,["model"]);l!=null&&r(i,["setup","model"],gt(n,l));const c=a(e,["config"]);return c!=null&&r(i,["config"],MM(c,i)),i}function RM(n){const e={},i=a(n,["speakerVoiceConfigs"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>LM(c))),r(e,["speakerVoiceConfigs"],l)}return e}function IM(n){const e={},i=a(n,["videoMetadata"]);i!=null&&r(e,["videoMetadata"],GM(i));const l=a(n,["thought"]);l!=null&&r(e,["thought"],l);const c=a(n,["inlineData"]);c!=null&&r(e,["inlineData"],pM(c));const f=a(n,["fileData"]);f!=null&&r(e,["fileData"],CM(f));const m=a(n,["thoughtSignature"]);m!=null&&r(e,["thoughtSignature"],m);const g=a(n,["functionCall"]);g!=null&&r(e,["functionCall"],SM(g));const y=a(n,["codeExecutionResult"]);y!=null&&r(e,["codeExecutionResult"],y);const h=a(n,["executableCode"]);h!=null&&r(e,["executableCode"],h);const v=a(n,["functionResponse"]);v!=null&&r(e,["functionResponse"],v);const C=a(n,["text"]);return C!=null&&r(e,["text"],C),e}function wM(n){const e={},i=a(n,["voiceName"]);return i!=null&&r(e,["voiceName"],i),e}function DM(n){const e={},i=a(n,["proactiveAudio"]);return i!=null&&r(e,["proactiveAudio"],i),e}function bM(n){const e={},i=a(n,["automaticActivityDetection"]);i!=null&&r(e,["automaticActivityDetection"],dM(i));const l=a(n,["activityHandling"]);l!=null&&r(e,["activityHandling"],l);const c=a(n,["turnCoverage"]);return c!=null&&r(e,["turnCoverage"],c),e}function kM(n){const e={},i=a(n,["handle"]);if(i!=null&&r(e,["handle"],i),a(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function UM(n){const e={},i=a(n,["targetTokens"]);return i!=null&&r(e,["targetTokens"],i),e}function LM(n){const e={},i=a(n,["speaker"]);i!=null&&r(e,["speaker"],i);const l=a(n,["voiceConfig"]);return l!=null&&r(e,["voiceConfig"],sg(l)),e}function VM(n){const e={},i=a(n,["voiceConfig"]);i!=null&&r(e,["voiceConfig"],sg(i));const l=a(n,["multiSpeakerVoiceConfig"]);l!=null&&r(e,["multiSpeakerVoiceConfig"],RM(l));const c=a(n,["languageCode"]);return c!=null&&r(e,["languageCode"],c),e}function BM(n){const e={},i=a(n,["includeThoughts"]);i!=null&&r(e,["includeThoughts"],i);const l=a(n,["thinkingBudget"]);return l!=null&&r(e,["thinkingBudget"],l),e}function qM(n){const e={},i=a(n,["functionDeclarations"]);if(i!=null){let y=i;Array.isArray(y)&&(y=y.map(h=>EM(h))),r(e,["functionDeclarations"],y)}if(a(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const l=a(n,["googleSearch"]);l!=null&&r(e,["googleSearch"],_M(l));const c=a(n,["googleSearchRetrieval"]);if(c!=null&&r(e,["googleSearchRetrieval"],AM(c)),a(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(a(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");a(n,["urlContext"])!=null&&r(e,["urlContext"],PM());const m=a(n,["computerUse"]);m!=null&&r(e,["computerUse"],mM(m));const g=a(n,["codeExecution"]);return g!=null&&r(e,["codeExecution"],g),e}function PM(){return{}}function GM(n){const e={},i=a(n,["fps"]);i!=null&&r(e,["fps"],i);const l=a(n,["endOffset"]);l!=null&&r(e,["endOffset"],l);const c=a(n,["startOffset"]);return c!=null&&r(e,["startOffset"],c),e}function sg(n){const e={},i=a(n,["prebuiltVoiceConfig"]);return i!=null&&r(e,["prebuiltVoiceConfig"],wM(i)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function HM(n){const e=[];for(const i in n)if(Object.prototype.hasOwnProperty.call(n,i)){const l=n[i];if(typeof l=="object"&&l!=null&&Object.keys(l).length>0){const c=Object.keys(l).map(f=>`${i}.${f}`);e.push(...c)}else e.push(i)}return e.join(",")}function zM(n,e){let i=null;const l=n.bidiGenerateContentSetup;if(typeof l=="object"&&l!==null&&"setup"in l){const f=l.setup;typeof f=="object"&&f!==null?(n.bidiGenerateContentSetup=f,i=f):delete n.bidiGenerateContentSetup}else l!==void 0&&delete n.bidiGenerateContentSetup;const c=n.fieldMask;if(i){const f=HM(i);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)f?n.fieldMask=f:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&c!==null&&Array.isArray(c)&&c.length>0){const m=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let g=[];c.length>0&&(g=c.map(h=>m.includes(h)?`generationConfig.${h}`:h));const y=[];f&&y.push(f),g.length>0&&y.push(...g),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else c!==null&&Array.isArray(c)&&c.length>0?n.fieldMask=c.join(","):delete n.fieldMask;return n}class OM extends di{constructor(e){super(),this.apiClient=e}async create(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const g=vM(this.apiClient,e);f=ye("auth_tokens",g._url),m=g._query,delete g.config,delete g._url,delete g._query;const y=zM(g,e.config);return c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(h=>h.json()),c.then(h=>fM(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FM(n){const e={},i=a(n,["name"]);return i!=null&&r(e,["_url","name"],i),e}function JM(n){const e={},i=a(n,["name"]);return i!=null&&r(e,["_url","name"],i),e}function YM(n,e){const i={};if(a(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const l=a(n,["tunedModelDisplayName"]);if(e!==void 0&&l!=null&&r(e,["displayName"],l),a(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const c=a(n,["epochCount"]);e!==void 0&&c!=null&&r(e,["tuningTask","hyperparameters","epochCount"],c);const f=a(n,["learningRateMultiplier"]);if(f!=null&&r(i,["tuningTask","hyperparameters","learningRateMultiplier"],f),a(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(a(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(a(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const m=a(n,["batchSize"]);e!==void 0&&m!=null&&r(e,["tuningTask","hyperparameters","batchSize"],m);const g=a(n,["learningRate"]);if(e!==void 0&&g!=null&&r(e,["tuningTask","hyperparameters","learningRate"],g),a(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return i}function $M(n,e){const i={},l=a(n,["validationDataset"]);e!==void 0&&l!=null&&r(e,["supervisedTuningSpec"],fN(l,i));const c=a(n,["tunedModelDisplayName"]);e!==void 0&&c!=null&&r(e,["tunedModelDisplayName"],c);const f=a(n,["description"]);e!==void 0&&f!=null&&r(e,["description"],f);const m=a(n,["epochCount"]);e!==void 0&&m!=null&&r(e,["supervisedTuningSpec","hyperParameters","epochCount"],m);const g=a(n,["learningRateMultiplier"]);e!==void 0&&g!=null&&r(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],g);const y=a(n,["exportLastCheckpointOnly"]);e!==void 0&&y!=null&&r(e,["supervisedTuningSpec","exportLastCheckpointOnly"],y);const h=a(n,["adapterSize"]);if(e!==void 0&&h!=null&&r(e,["supervisedTuningSpec","hyperParameters","adapterSize"],h),a(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(a(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const v=a(n,["labels"]);return e!==void 0&&v!=null&&r(e,["labels"],v),i}function KM(n){const e={},i=a(n,["baseModel"]);i!=null&&r(e,["baseModel"],i);const l=a(n,["preTunedModel"]);l!=null&&r(e,["preTunedModel"],l);const c=a(n,["trainingDataset"]);c!=null&&r(e,["tuningTask","trainingData"],aN(c));const f=a(n,["config"]);return f!=null&&YM(f,e),e}function XM(n){const e={},i=a(n,["baseModel"]);i!=null&&r(e,["baseModel"],i);const l=a(n,["preTunedModel"]);l!=null&&r(e,["preTunedModel"],l);const c=a(n,["trainingDataset"]);c!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],rN(c,e));const f=a(n,["config"]);return f!=null&&$M(f,e),e}function QM(n){const e={},i=a(n,["name"]);return i!=null&&r(e,["_url","name"],i),e}function ZM(n){const e={},i=a(n,["name"]);return i!=null&&r(e,["_url","name"],i),e}function WM(n,e){const i={},l=a(n,["pageSize"]);e!==void 0&&l!=null&&r(e,["_query","pageSize"],l);const c=a(n,["pageToken"]);e!==void 0&&c!=null&&r(e,["_query","pageToken"],c);const f=a(n,["filter"]);return e!==void 0&&f!=null&&r(e,["_query","filter"],f),i}function jM(n,e){const i={},l=a(n,["pageSize"]);e!==void 0&&l!=null&&r(e,["_query","pageSize"],l);const c=a(n,["pageToken"]);e!==void 0&&c!=null&&r(e,["_query","pageToken"],c);const f=a(n,["filter"]);return e!==void 0&&f!=null&&r(e,["_query","filter"],f),i}function eN(n){const e={},i=a(n,["config"]);return i!=null&&WM(i,e),e}function tN(n){const e={},i=a(n,["config"]);return i!=null&&jM(i,e),e}function nN(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["nextPageToken"]);l!=null&&r(e,["nextPageToken"],l);const c=a(n,["tunedModels"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>ag(m))),r(e,["tuningJobs"],f)}return e}function oN(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["nextPageToken"]);l!=null&&r(e,["nextPageToken"],l);const c=a(n,["tuningJobs"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>Zu(m))),r(e,["tuningJobs"],f)}return e}function iN(n){const e={},i=a(n,["checkpointId"]);i!=null&&r(e,["checkpointId"],i);const l=a(n,["epoch"]);l!=null&&r(e,["epoch"],l);const c=a(n,["step"]);c!=null&&r(e,["step"],c);const f=a(n,["endpoint"]);return f!=null&&r(e,["endpoint"],f),e}function lN(n){const e={},i=a(n,["name"]);i!=null&&r(e,["model"],i);const l=a(n,["name"]);return l!=null&&r(e,["endpoint"],l),e}function sN(n){const e={},i=a(n,["model"]);i!=null&&r(e,["model"],i);const l=a(n,["endpoint"]);l!=null&&r(e,["endpoint"],l);const c=a(n,["checkpoints"]);if(c!=null){let f=c;Array.isArray(f)&&(f=f.map(m=>iN(m))),r(e,["checkpoints"],f)}return e}function aN(n){const e={};if(a(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(a(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=a(n,["examples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>uN(c))),r(e,["examples","examples"],l)}return e}function rN(n,e){const i={},l=a(n,["gcsUri"]);e!==void 0&&l!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],l);const c=a(n,["vertexDatasetResource"]);if(e!==void 0&&c!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],c),a(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function uN(n){const e={},i=a(n,["textInput"]);i!=null&&r(e,["textInput"],i);const l=a(n,["output"]);return l!=null&&r(e,["output"],l),e}function ag(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["name"]);l!=null&&r(e,["name"],l);const c=a(n,["state"]);c!=null&&r(e,["state"],kh(c));const f=a(n,["createTime"]);f!=null&&r(e,["createTime"],f);const m=a(n,["tuningTask","startTime"]);m!=null&&r(e,["startTime"],m);const g=a(n,["tuningTask","completeTime"]);g!=null&&r(e,["endTime"],g);const y=a(n,["updateTime"]);y!=null&&r(e,["updateTime"],y);const h=a(n,["description"]);h!=null&&r(e,["description"],h);const v=a(n,["baseModel"]);v!=null&&r(e,["baseModel"],v);const C=a(n,["_self"]);C!=null&&r(e,["tunedModel"],lN(C));const E=a(n,["customBaseModel"]);E!=null&&r(e,["customBaseModel"],E);const x=a(n,["experiment"]);x!=null&&r(e,["experiment"],x);const U=a(n,["labels"]);U!=null&&r(e,["labels"],U);const O=a(n,["outputUri"]);O!=null&&r(e,["outputUri"],O);const q=a(n,["pipelineJob"]);q!=null&&r(e,["pipelineJob"],q);const z=a(n,["serviceAccount"]);z!=null&&r(e,["serviceAccount"],z);const F=a(n,["tunedModelDisplayName"]);F!=null&&r(e,["tunedModelDisplayName"],F);const Z=a(n,["veoTuningSpec"]);return Z!=null&&r(e,["veoTuningSpec"],Z),e}function Zu(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["name"]);l!=null&&r(e,["name"],l);const c=a(n,["state"]);c!=null&&r(e,["state"],kh(c));const f=a(n,["createTime"]);f!=null&&r(e,["createTime"],f);const m=a(n,["startTime"]);m!=null&&r(e,["startTime"],m);const g=a(n,["endTime"]);g!=null&&r(e,["endTime"],g);const y=a(n,["updateTime"]);y!=null&&r(e,["updateTime"],y);const h=a(n,["error"]);h!=null&&r(e,["error"],h);const v=a(n,["description"]);v!=null&&r(e,["description"],v);const C=a(n,["baseModel"]);C!=null&&r(e,["baseModel"],C);const E=a(n,["tunedModel"]);E!=null&&r(e,["tunedModel"],sN(E));const x=a(n,["preTunedModel"]);x!=null&&r(e,["preTunedModel"],x);const U=a(n,["supervisedTuningSpec"]);U!=null&&r(e,["supervisedTuningSpec"],U);const O=a(n,["tuningDataStats"]);O!=null&&r(e,["tuningDataStats"],O);const q=a(n,["encryptionSpec"]);q!=null&&r(e,["encryptionSpec"],q);const z=a(n,["partnerModelTuningSpec"]);z!=null&&r(e,["partnerModelTuningSpec"],z);const F=a(n,["customBaseModel"]);F!=null&&r(e,["customBaseModel"],F);const Z=a(n,["experiment"]);Z!=null&&r(e,["experiment"],Z);const ee=a(n,["labels"]);ee!=null&&r(e,["labels"],ee);const ce=a(n,["outputUri"]);ce!=null&&r(e,["outputUri"],ce);const fe=a(n,["pipelineJob"]);fe!=null&&r(e,["pipelineJob"],fe);const oe=a(n,["serviceAccount"]);oe!=null&&r(e,["serviceAccount"],oe);const pe=a(n,["tunedModelDisplayName"]);pe!=null&&r(e,["tunedModelDisplayName"],pe);const j=a(n,["veoTuningSpec"]);return j!=null&&r(e,["veoTuningSpec"],j),e}function cN(n){const e={},i=a(n,["sdkHttpResponse"]);i!=null&&r(e,["sdkHttpResponse"],i);const l=a(n,["name"]);l!=null&&r(e,["name"],l);const c=a(n,["metadata"]);c!=null&&r(e,["metadata"],c);const f=a(n,["done"]);f!=null&&r(e,["done"],f);const m=a(n,["error"]);return m!=null&&r(e,["error"],m),e}function fN(n,e){const i={},l=a(n,["gcsUri"]);l!=null&&r(i,["validationDatasetUri"],l);const c=a(n,["vertexDatasetResource"]);return e!==void 0&&c!=null&&r(e,["supervisedTuningSpec","trainingDatasetUri"],c),i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dN extends di{constructor(e){super(),this.apiClient=e,this.get=async i=>await this.getInternal(i),this.list=async(i={})=>new es(fi.PAGED_ITEM_TUNING_JOBS,l=>this.listInternal(l),await this.listInternal(i),i),this.tune=async i=>{var l;if(this.apiClient.isVertexAI())if(i.baseModel.startsWith("projects/")){const c={tunedModelName:i.baseModel};!((l=i.config)===null||l===void 0)&&l.preTunedModelCheckpointId&&(c.checkpointId=i.config.preTunedModelCheckpointId);const f=Object.assign(Object.assign({},i),{preTunedModel:c});return f.baseModel=void 0,await this.tuneInternal(f)}else{const c=Object.assign({},i);return await this.tuneInternal(c)}else{const c=Object.assign({},i),f=await this.tuneMldevInternal(c);let m="";return f.metadata!==void 0&&f.metadata.tunedModel!==void 0?m=f.metadata.tunedModel:f.name!==void 0&&f.name.includes("/operations/")&&(m=f.name.split("/operations/")[0]),{name:m,state:zu.JOB_STATE_QUEUED}}}}async getInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=ZM(e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>Zu(v))}else{const h=QM(e);return g=ye("{name}",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>ag(v))}}async listInternal(e){var i,l,c,f;let m,g="",y={};if(this.apiClient.isVertexAI()){const h=tN(e);return g=ye("tuningJobs",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=oN(v),E=new Ym;return Object.assign(E,C),E})}else{const h=eN(e);return g=ye("tunedModels",h._url),y=h._query,delete h._url,delete h._query,m=this.apiClient.request({path:g,queryParams:y,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal}).then(v=>v.json().then(C=>{const E=C;return E.sdkHttpResponse={headers:v.headers},E})),m.then(v=>{const C=nN(v),E=new Ym;return Object.assign(E,C),E})}}async cancel(e){var i,l,c,f;let m="",g={};if(this.apiClient.isVertexAI()){const y=JM(e);m=ye("{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}else{const y=FM(e);m=ye("{name}:cancel",y._url),g=y._query,delete y._url,delete y._query,await this.apiClient.request({path:m,queryParams:g,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(c=e.config)===null||c===void 0?void 0:c.httpOptions,abortSignal:(f=e.config)===null||f===void 0?void 0:f.abortSignal})}}async tuneInternal(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI()){const g=XM(e);return f=ye("tuningJobs",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>Zu(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var i,l;let c,f="",m={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const g=KM(e);return f=ye("tunedModels",g._url),m=g._query,delete g._url,delete g._query,c=this.apiClient.request({path:f,queryParams:m,body:JSON.stringify(g),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(y=>y.json().then(h=>{const v=h;return v.sdkHttpResponse={headers:y.headers},v})),c.then(y=>cN(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pN{async download(e,i){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const mN=1024*1024*8,hN=3,gN=1e3,yN=2,Pu="x-goog-upload-status";async function vN(n,e,i){var l,c,f;let m=0,g=0,y=new Ou(new Response),h="upload";for(m=n.size;g<m;){const C=Math.min(mN,m-g),E=n.slice(g,g+C);g+C>=m&&(h+=", finalize");let x=0,U=gN;for(;x<hN&&(y=await i.request({path:"",body:E,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(g),"Content-Length":String(C)}}}),!(!((l=y==null?void 0:y.headers)===null||l===void 0)&&l[Pu]));)x++,await CN(U),U=U*yN;if(g+=C,((c=y==null?void 0:y.headers)===null||c===void 0?void 0:c[Pu])!=="active")break;if(m<=g)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const v=await(y==null?void 0:y.json());if(((f=y==null?void 0:y.headers)===null||f===void 0?void 0:f[Pu])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return v.file}async function TN(n){return{size:n.size,type:n.type}}function CN(n){return new Promise(e=>setTimeout(e,n))}class SN{async upload(e,i,l){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await vN(e,i,l)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await TN(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class EN{create(e,i,l){return new AN(e,i,l)}}class AN{constructor(e,i,l){this.url=e,this.headers=i,this.callbacks=l}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const yh="x-goog-api-key";class _N{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(yh)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(yh,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xN="gl-node/";class vh{constructor(e){var i;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(i=e.vertexai)!==null&&i!==void 0?i:!1,this.apiKey=e.apiKey;const l=Iv(e.httpOptions,e.vertexai,void 0,void 0);l&&(e.httpOptions?e.httpOptions.baseUrl=l:e.httpOptions={baseUrl:l}),this.apiVersion=e.apiVersion;const c=new _N(this.apiKey);this.apiClient=new Ox({auth:c,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:xN+"web",uploader:new SN,downloader:new pN}),this.models=new uM(this.apiClient),this.live=new nM(this.apiClient,c,new EN),this.batches=new SC(this.apiClient),this.chats=new IS(this.models,this.apiClient),this.caches=new MS(this.apiClient),this.files=new zS(this.apiClient),this.operations=new cM(this.apiClient),this.authTokens=new OM(this.apiClient),this.tunings=new dN(this.apiClient)}}/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * The main header component for the 'Author' application.
 *
 * This component is responsible for rendering the top navigation bar, which includes
 * back buttons, editable titles for the current context (book, POV, or entry),
 * action buttons (e.g., 'Add New', 'Save Version'), and the synchronization status indicator.
 * It receives all its data and callbacks as props from the main App component.
 */const MN=n=>{var xe;const{view:e,books:i,selectedBookId:l,selectedPovId:c,selectedEntry:f,tokenClient:m,accessToken:g,isSynced:y,bookTitleInputRef:h,povTitleInputRef:v,entryTitleInputRef:C,onBack:E,onNavigateToGraph:x,onNavigateToPovList:U,onNavigateToGlobalGraph:O,onNavigateToList:q,onEntryTitleChange:z,onEntryTypeChange:F,onBookTitleChange:Z,onPovTitleChange:ee,onAddNewBook:ce,onAddNewPov:fe,onAddNewEntry:oe,onOpenSaveVersionModal:pe,onOpenVersionSelector:j,onOpenSettings:me,onOpenRelationshipModal:re,onSignIn:ve,onSignOut:nt,onManualSync:Bt}=n,yt=()=>{g?y?nt():Bt():ve()},L=f?((xe=f.versions[f.activeVersionId])==null?void 0:xe.title)??"":"",ie=()=>{var qe,Qe,M,$,ue,se;return e==="editor"&&f?S.jsxs("div",{className:"header-title-wrapper",children:[f.dirty&&S.jsx("span",{className:"dirty-indicator",title:"This entry's inputs have changed and it may need updates."}),S.jsxs("select",{className:"header-type-selector",value:f.type||"prose",onChange:Q=>F(Q.target.value),"aria-label":"Entry Type",children:[S.jsx("option",{value:"prose",children:"Prose"}),S.jsx("option",{value:"js",children:"JS"}),S.jsx("option",{value:"nl",children:"NL"})]}),S.jsx("input",{id:"entryTitleInput",ref:C,type:"text",className:"header-title-input",value:L,onChange:Q=>z(Q.target.value),placeholder:"Untitled Entry","aria-label":"Entry Title"})]}):["povList","graph"].includes(e)&&l&&(i!=null&&i[l])?S.jsxs("div",{className:"header-title-wrapper",children:[S.jsx("label",{className:"header-title-label",htmlFor:"bookTitleInput",children:"Book:"}),S.jsx("input",{id:"bookTitleInput",ref:h,type:"text",className:"header-title-input",value:i[l].title,onChange:Q=>Z(Q.target.value),placeholder:"Untitled Book","aria-label":"Book Title"})]}):e==="entryList"&&l&&c&&((Qe=(qe=i==null?void 0:i[l])==null?void 0:qe.povs)!=null&&Qe[c])?S.jsxs("div",{className:"header-title-wrapper",children:[S.jsx("label",{className:"header-title-label",htmlFor:"povTitleInput",children:"PoV:"}),S.jsx("input",{id:"povTitleInput",ref:v,type:"text",className:"header-title-input",value:i[l].povs[c].title,onChange:Q=>ee(Q.target.value),placeholder:"Untitled POV","aria-label":"Point of View Title"})]}):S.jsx("h1",{children:e==="list"?"Author 0.0.1":e==="globalGraph"?"All Books":e==="povList"||e==="graph"?((M=i==null?void 0:i[l])==null?void 0:M.title)||"Book":e==="entryList"?((se=(ue=($=i==null?void 0:i[l])==null?void 0:$.povs)==null?void 0:ue[c])==null?void 0:se.title)||"Point of View":"Author 0.0.1"})};return S.jsxs("header",{className:"app-header",children:[S.jsx("div",{className:"header-left",children:!["list","globalGraph"].includes(e)&&S.jsx("button",{onClick:E,className:"header-back-button","aria-label":"Back",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),S.jsx("polyline",{points:"12 19 5 12 12 5"})]})})}),S.jsx("div",{className:"header-center",children:ie()}),S.jsxs("div",{className:"header-right",children:[e==="list"&&i!==null&&S.jsxs("button",{onClick:ce,className:"header-button","aria-label":"Add New Book",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),S.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),S.jsx("span",{children:"+ Book"})]}),e==="povList"&&S.jsxs("button",{onClick:fe,className:"header-button","aria-label":"Add New Point of View",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),S.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),S.jsx("span",{children:"+ POV"})]}),e==="entryList"&&S.jsxs("button",{onClick:oe,className:"header-button","aria-label":"Add New Entry",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),S.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),S.jsx("span",{children:"+ Entry"})]}),["list","globalGraph"].includes(e)&&S.jsxs("div",{className:"view-toggle-group",children:[S.jsxs("button",{onClick:q,className:`view-toggle-button ${e==="list"?"active":""}`,title:"List View",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),S.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),S.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),S.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),S.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),S.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),S.jsx("span",{children:"List"})]}),S.jsxs("button",{onClick:O,className:`view-toggle-button ${e==="globalGraph"?"active":""}`,title:"Graph View",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("circle",{cx:"18",cy:"5",r:"3"}),S.jsx("circle",{cx:"6",cy:"12",r:"3"}),S.jsx("circle",{cx:"18",cy:"19",r:"3"}),S.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),S.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),S.jsx("span",{children:"Graph"})]})]}),["povList","graph"].includes(e)&&S.jsxs("div",{className:"view-toggle-group",children:[S.jsxs("button",{onClick:U,className:`view-toggle-button ${e==="povList"?"active":""}`,title:"List View",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),S.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),S.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),S.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),S.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),S.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),S.jsx("span",{children:"List"})]}),S.jsxs("button",{onClick:x,className:`view-toggle-button ${e==="graph"?"active":""}`,title:"Graph View",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("circle",{cx:"18",cy:"5",r:"3"}),S.jsx("circle",{cx:"6",cy:"12",r:"3"}),S.jsx("circle",{cx:"18",cy:"19",r:"3"}),S.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),S.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]}),S.jsx("span",{children:"Graph"})]})]}),(e==="graph"||e==="globalGraph")&&S.jsxs("button",{onClick:re,className:"header-button","aria-label":"Add New Relationship",disabled:e==="globalGraph",children:[S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),S.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),S.jsx("span",{children:"+ Link"})]}),e==="editor"&&S.jsxs("div",{className:"header-actions",children:[S.jsx("button",{onClick:x,className:"header-button icon-button",title:"Graph View",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("circle",{cx:"18",cy:"5",r:"3"}),S.jsx("circle",{cx:"6",cy:"12",r:"3"}),S.jsx("circle",{cx:"18",cy:"19",r:"3"}),S.jsx("line",{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}),S.jsx("line",{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"})]})}),S.jsx("button",{onClick:pe,className:"header-button icon-button",title:"Save Version",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),S.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),S.jsx("polyline",{points:"7 3 7 8 15 8"})]})}),S.jsx("button",{onClick:j,className:"header-button icon-button",title:"Versions",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M1 4v6h6"}),S.jsx("path",{d:"M3.51 15a9 9 0 1 0 2.13-9.36L1 10"})]})})]}),e==="list"&&g&&S.jsx("button",{onClick:me,className:"header-button icon-button","aria-label":"Settings",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("circle",{cx:"12",cy:"12",r:"3"}),S.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]})}),S.jsx("button",{onClick:yt,className:"header-button icon-button",disabled:!g&&!m,"aria-label":g?y?"Status: Synced. Click to sign out.":"Status: Unsynced. Click to sync now.":`Status: Offline${y?"":" with unsaved changes"}. Click to sign in.`,title:g?y?"Sign Out":"Sync Now":"Sign In",children:S.jsx("div",{className:`sync-status-wrapper ${y?"":"has-unsynced-ring"}`,title:g?`Status: ${y?"Synced":"Unsynced Changes"}`:`Status: Offline${y?"":" with unsaved local changes"}`,children:S.jsx("span",{className:`status-indicator-dot ${g?"online":"offline"}`})})})]})]})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A view component that renders the list of books. Each book is displayed as a card
 * with its title and a count of its Points of View.
 */const NN=({books:n,onSelectBook:e,onDeleteBook:i})=>n?S.jsx("div",{className:"book-list-container",children:Object.entries(n).map(([l,c])=>{const f=Object.keys(c.povs||{}).length;return S.jsxs("div",{className:"book-card",children:[S.jsxs("div",{className:"card-main-content",onClick:()=>e(l),tabIndex:0,children:[S.jsx("h2",{className:"book-card-title",children:c.title||"Untitled Book"}),S.jsxs("p",{className:"book-card-preview",children:[f," ",f===1?"Point of View":"Points of View"]})]}),S.jsx("button",{onClick:m=>{m.stopPropagation(),i(l,c.title||"Untitled Book")},className:"delete-book-button","aria-label":`Delete book: ${c.title||"Untitled Book"}`,children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("polyline",{points:"3 6 5 6 21 6"}),S.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),S.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),S.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]},l)})}):null;/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A view component that renders the list of Points of View (POVs) for a given book.
 * Each POV is displayed as a card showing its title and a count of its entries.
 */const RN=({povs:n,onSelectPov:e,onDeletePov:i})=>S.jsx("div",{className:"book-list-container",children:Object.entries(n).map(([l,c])=>{const f=Object.keys(c.entries||{}).length;return S.jsxs("div",{className:"book-card",children:[S.jsxs("div",{className:"card-main-content",onClick:()=>e(l),tabIndex:0,children:[S.jsx("h2",{className:"book-card-title",children:c.title||"Untitled POV"}),S.jsxs("p",{className:"book-card-preview",children:[f," ",f===1?"Entry":"Entries"]})]}),S.jsx("button",{onClick:m=>{m.stopPropagation(),i(l,c.title||"Untitled POV")},className:"delete-book-button","aria-label":`Delete Point of View: ${c.title||"Untitled POV"}`,children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("polyline",{points:"3 6 5 6 21 6"}),S.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),S.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),S.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]},l)})});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A view component that renders the list of entries for a given Point of View (POV).
 * Each entry is displayed as a card with its title and a short preview of its content.
 */const IN=n=>{if(!n||!n.versions||!n.activeVersionId)return"";const e=n.versions[n.activeVersionId];return e?e.content:""},wN=n=>{if(!n||!n.versions||!n.activeVersionId)return"";const e=n.versions[n.activeVersionId];return e?e.title:""},DN=({entries:n,onSelectEntry:e,onDeleteEntry:i})=>S.jsx("div",{className:"book-list-container",children:Object.entries(n).map(([l,c])=>{const f=wN(c)||"Untitled Entry",m=IN(c).substring(0,100)||"Empty";return S.jsxs("div",{className:"book-card",children:[S.jsxs("div",{className:"card-main-content",onClick:()=>e(l),tabIndex:0,children:[S.jsxs("h2",{className:"book-card-title",children:[c.dirty&&S.jsx("span",{className:"dirty-indicator",title:"This entry's inputs have changed and it may need updates."}),f]}),S.jsx("p",{className:"book-card-preview",children:m})]}),S.jsx("button",{onClick:g=>{g.stopPropagation(),i(l,f)},className:"delete-book-button","aria-label":`Delete Entry: ${f}`,children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("polyline",{points:"3 6 5 6 21 6"}),S.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),S.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),S.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})})]},l)})});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A component for editing 'narrative' type entries. It provides a simple,
 * full-height textarea optimized for writing prose.
 */const bN=({content:n,onTextChange:e,disabled:i})=>S.jsx("div",{className:"narrative-entry-container",children:S.jsx("textarea",{className:"narrative-entry-textarea",value:n,onChange:l=>e(l.target.value),disabled:i,placeholder:"Start writing...","aria-label":"Narrative Content"})});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A component for editing 'code' type entries. It provides a three-panel layout
 * for managing inputs, outputs, and the main code content.
 */const kN=({content:n,onTextChange:e,disabled:i})=>S.jsx("div",{className:"code-entry-container",children:S.jsx("textarea",{className:"code-entry-textarea",value:n,onChange:l=>e(l.target.value),disabled:i,placeholder:"Enter code here...","aria-label":"Code Content"})});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A component for editing 'input' type entries.
 */const UN=({content:n,onTextChange:e,disabled:i})=>S.jsxs("div",{className:"input-entry-container",children:[S.jsx("h2",{children:"Input Value"}),S.jsx("input",{type:"text",className:"input-entry-value-input",value:n,onChange:l=>e(l.target.value),disabled:i,"aria-label":"Input Value"})]});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A component for viewing 'output' type entries.
 */const LN=({content:n})=>S.jsxs("div",{className:"output-entry-container",children:[S.jsx("h2",{children:"Output Value"}),S.jsx("div",{className:"output-entry-value-display",children:n||"(Not computed)"})]}),VN=n=>{const e=n.entry.versions[n.entry.activeVersionId],i=(e==null?void 0:e.content)??"";switch(n.entry.type){case"input":return S.jsx(UN,{content:i,onTextChange:n.onTextChange,disabled:n.disabled});case"output":return S.jsx(LN,{content:i});case"js":case"nl":return S.jsx(kN,{content:i,onTextChange:n.onTextChange,disabled:n.disabled});case"prose":default:return S.jsx(bN,{content:i,onTextChange:n.onTextChange,disabled:n.disabled})}},Th=n=>{const{type:e,icon:i,sockets:l,bookId:c,onSelectEntry:f,onSocketAdd:m,onSocketChange:g,onSocketDelete:y,isEditingDisabled:h}=n,[v,C]=ae.useState(""),[E,x]=ae.useState(null),U=z=>{z.preventDefault(),v.trim()&&(m(e,v.trim()),C(""))},O=()=>{E&&(g(e,E.oldLabel,E.newLabel),x(null))},q=z=>{z.key==="Enter"?O():z.key==="Escape"&&x(null)};return S.jsxs("div",{className:"sidebar-section",children:[S.jsx("h4",{children:e==="input"?"Inputs":"Outputs"}),S.jsxs("ul",{children:[l.length===0&&S.jsx("li",{className:"sidebar-no-sockets-placeholder",children:"None"}),l.map(z=>{const F=(E==null?void 0:E.oldLabel)===z.socketLabel,Z=e==="input"&&z.connectedEntry,ee=e==="output"?z.connectedEntries||[]:[],ce=ee.length===1,fe=ee.length>1,oe=()=>{if(F)return S.jsx("input",{type:"text",value:E.newLabel,onChange:j=>x({...E,newLabel:j.target.value}),onBlur:O,onKeyDown:q,className:"sidebar-socket-edit-input",autoFocus:!0});if(Z)return S.jsx("a",{href:`#/view=editor&bookId=${c}&povId=${z.connectedEntry.povId}&entryId=${z.connectedEntry.id}`,onClick:j=>{j.preventDefault(),f(c,z.connectedEntry.povId,z.connectedEntry.id)},className:"socket-label-sidebar link",title:`Connected from: ${z.connectedEntry.sourceSocketLabel||"Untitled Source"}`,children:z.socketLabel});if(ce){const j=ee[0];return S.jsx("a",{href:`#/view=editor&bookId=${c}&povId=${j.povId}&entryId=${j.id}`,onClick:me=>{me.preventDefault(),f(c,j.povId,j.id)},className:"socket-label-sidebar link",title:`Connected to: ${j.title} (${j.targetSocketLabel})`,children:z.socketLabel})}return S.jsx("span",{className:"socket-label-sidebar",onDoubleClick:()=>!h&&x({oldLabel:z.socketLabel,newLabel:z.socketLabel}),title:h?void 0:"Double-click to edit",children:z.socketLabel})},pe=j=>{const[me,re]=j.target.value.split("|");me&&re&&(f(c,me,re),j.target.value="")};return S.jsxs("li",{className:"sidebar-socket-item",children:[S.jsxs("div",{className:"sidebar-socket-info",children:[i,oe(),fe&&S.jsxs("select",{className:"sidebar-socket-jumplist",onChange:pe,defaultValue:"",children:[S.jsxs("option",{value:"",disabled:!0,children:[ee.length," links"]}),ee.map(j=>S.jsx("option",{value:`${j.povId}|${j.id}`,children:j.title},j.id))]})]}),!F&&!h&&S.jsx("button",{className:"sidebar-socket-delete-btn",onClick:()=>y(e,z.socketLabel),children:""})]},z.socketLabel)})]}),!h&&S.jsxs("form",{onSubmit:U,className:"sidebar-add-socket-form",children:[S.jsx("input",{type:"text",value:v,onChange:z=>C(z.target.value),placeholder:`New ${e}...`}),S.jsx("button",{type:"submit",children:"+"})]})]})},BN=({entry:n,book:e,bookId:i,selectedPovId:l,onSelectEntry:c,onSocketAdd:f,onSocketChange:m,onSocketDelete:g,onPovChange:y})=>{const h=ae.useMemo(()=>{const x=new Map;Object.entries(e.povs).forEach(([q,z])=>{Object.values(z.entries).forEach(F=>{x.set(F.id,{entry:F,povId:q})})});const U=(n.inputs||[]).map(q=>({socketLabel:q})),O=(n.outputs||[]).map(q=>({socketLabel:q,connectedEntries:[]}));return(e.relationships||[]).forEach(q=>{if(q.targetEntryId===n.id){const z=U.find(Z=>Z.socketLabel===q.targetLabel),F=x.get(q.sourceEntryId);z&&F&&(z.connectedEntry={id:F.entry.id,title:F.entry.versions[F.entry.activeVersionId].title||"Untitled",povId:F.povId,sourceSocketLabel:q.sourceLabel})}if(q.sourceEntryId===n.id){const z=O.find(Z=>Z.socketLabel===q.sourceLabel),F=x.get(q.targetEntryId);z&&F&&z.connectedEntries.push({id:F.entry.id,title:F.entry.versions[F.entry.activeVersionId].title||"Untitled",povId:F.povId,targetSocketLabel:q.targetLabel})}}),{inputs:U,outputs:O}},[n,e]),v=S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),S.jsx("polyline",{points:"10 17 15 12 10 7"}),S.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]}),C=S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),S.jsx("polyline",{points:"16 17 21 12 16 7"}),S.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]});if(!i)return null;const E=n.type==="input"||n.type==="output";return S.jsxs("div",{className:"sidebar-content",children:[S.jsxs("div",{className:"sidebar-section",children:[S.jsx("h4",{children:"Point of View"}),S.jsx("select",{className:"sidebar-pov-selector",value:l||"",onChange:x=>y(x.target.value),disabled:Object.keys(e.povs).length<=1,children:Object.entries(e.povs).map(([x,U])=>S.jsx("option",{value:x,children:U.title||"Untitled POV"},x))})]}),S.jsx(Th,{type:"input",icon:v,sockets:h.inputs,bookId:i,onSelectEntry:c,onSocketAdd:f,onSocketChange:m,onSocketDelete:g,isEditingDisabled:E}),S.jsx(Th,{type:"output",icon:C,sockets:h.outputs,bookId:i,onSelectEntry:c,onSocketAdd:f,onSocketChange:m,onSocketDelete:g,isEditingDisabled:E})]})},qN=n=>{const[e,i]=ae.useState(window.innerWidth>900),l=()=>i(!e);return S.jsxs("div",{className:`editor-view-layout ${e?"sidebar-open":"sidebar-closed"}`,children:[S.jsx("main",{className:"editor-main",onClick:()=>{window.innerWidth<=900&&e&&l()},children:S.jsx(VN,{entry:n.selectedEntry,onTextChange:n.onTextChange,disabled:n.disabled})}),S.jsx("div",{className:"editor-sidebar-divider",onClick:l,role:"button","aria-label":e?"Close sidebar":"Open sidebar",tabIndex:0,children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:S.jsx("polyline",{points:"15 18 9 12 15 6"})})}),S.jsx("aside",{className:"editor-sidebar",children:S.jsx(BN,{entry:n.selectedEntry,book:n.selectedBook,bookId:n.selectedBookId,selectedPovId:n.selectedPovId,onSelectEntry:n.onSelectEntry,onSocketAdd:n.onSocketAdd,onSocketChange:n.onSocketChange,onSocketDelete:n.onSocketDelete,onPovChange:n.onPovChange})})]})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A component that renders a single input or output socket on an EntryNode.
 * It handles displaying the socket's label, its puzzle-piece visual, and the
 * handle for creating connections. It also contains the logic for inline editing
 * of the socket's label.
 */const PN=30,GN=({node:n,label:e,type:i,position:l,side:c,isOccupied:f,isDropTarget:m,isEditing:g,currentValue:y,inlinedState:h,onValueChange:v,onKeyDown:C,onBlur:E,onLabelMouseDown:x,onUpdateInlinedValue:U,onToggleRelationshipInlined:O})=>{if(h){const q=h.value.length>PN,z=S.jsx("button",{className:"socket-eject-button",onClick:()=>O(h.relationshipId,h.bookId,n),onMouseDown:F=>F.stopPropagation(),title:"Eject to a separate node",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6"}),S.jsx("polyline",{points:"15 3 21 3 21 9"}),S.jsx("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})});return S.jsxs("div",{className:`socket ${i} inlined ${q?"large":""}`,"data-socket-id":`${n.id}::${i}::${e}`,"data-socket-type":i,"data-socket-position":l,"data-socket-side":c,"data-node-id":n.id,"data-socket-label":e,children:[q?S.jsxs("div",{className:"socket-inlined-node",children:[S.jsx("div",{className:"socket-inlined-node-title",title:h.title,children:h.title}),S.jsx("div",{className:"socket-inlined-node-content",title:h.value,children:h.value}),z]}):S.jsxs("div",{className:"socket-inlined-content",children:[i==="input"?S.jsx("input",{type:"text",className:"socket-inlined-input",value:h.value,onChange:F=>U(h.relationshipId,F.target.value,h.bookId),onKeyDown:F=>F.stopPropagation(),onClick:F=>F.stopPropagation(),onMouseDown:F=>F.stopPropagation(),"aria-label":`Inlined value for ${e}`}):S.jsx("div",{className:"socket-inlined-display",title:h.value,children:h.value||"..."}),z]}),S.jsx("div",{className:"socket-handle occupied"})]})}return S.jsxs("div",{className:`socket ${i} ${f?"occupied":""}`,"data-socket-id":`${n.id}::${i}::${e}`,"data-socket-type":i,"data-socket-position":l,"data-socket-side":c,"data-node-id":n.id,"data-socket-label":e,children:[g?S.jsx("div",{className:"socket-edit-form",children:S.jsx("input",{type:"text",className:"socket-edit-input",value:y,placeholder:"Socket name...",onChange:q=>v(q.target.value),onKeyDown:C,onBlur:E,autoFocus:!0})}):S.jsx("span",{className:"socket-label",onMouseDown:x,children:e}),S.jsx("div",{className:`socket-handle ${f?"occupied":""} ${m?"drop-target":""}`})]})},HN=({node:n,povColor:e,povTitle:i,renderableSocketsForNode:l,socketPositionLayoutForNode:c,occupiedInputSockets:f,newConnection:m,inlineEditingSocket:g,inlinedInputValues:y,inlinedOutputValues:h,onDeleteEntry:v,onGenerateIdeas:C,onRecomputeCode:E,onRecomputeNL:x,onNodeContentChange:U,onAddSocket:O,setInlineEditingSocket:q,handleKeyDownOnSocketInput:z,handleSocketInputBlur:F,ignoreNextBlur:Z,onUpdateInlinedValue:ee,onToggleRelationshipInlined:ce})=>{if(n.type==="input")return S.jsx("div",{"data-id":n.id,className:"entry-node entry-node--input",style:{top:`${n.y}px`,left:`${n.x}px`},children:S.jsxs("div",{className:"entry-node--input-raw",children:[S.jsxs("div",{className:"raw-input-wrapper",children:[S.jsx("span",{className:"raw-input-sizer","aria-hidden":"true",children:n.content}),S.jsx("input",{type:"text",className:"raw-input-field",value:n.content||"",onChange:pe=>U(n,pe.target.value),"aria-label":"Input value",placeholder:"..."})]}),S.jsx("div",{className:"raw-socket-wrapper","data-socket-id":`${n.id}::output::value`,"data-socket-type":"output","data-socket-position":"right","data-socket-side":"right","data-node-id":n.id,"data-socket-label":"value",children:S.jsx("div",{className:"socket-handle"})}),S.jsx("button",{className:"delete-entry-node-button",onMouseDown:pe=>{pe.stopPropagation(),v(n)},"aria-label":`Delete entry: ${n.title||"value node"}`,children:""})]})},n.id);if(n.type==="output")return S.jsx("div",{"data-id":n.id,className:"entry-node entry-node--output",style:{top:`${n.y}px`,left:`${n.x}px`},children:S.jsxs("div",{className:"entry-node--output-raw",children:[S.jsx("button",{className:"delete-entry-node-button",onMouseDown:pe=>{pe.stopPropagation(),v(n)},"aria-label":`Delete entry: ${n.title||"output node"}`,children:""}),S.jsx("div",{className:"raw-socket-wrapper--input","data-socket-id":`${n.id}::input::value`,"data-socket-type":"input","data-socket-position":"left","data-socket-side":"left","data-node-id":n.id,"data-socket-label":"value",children:S.jsx("div",{className:"socket-handle"})}),S.jsxs("div",{className:"raw-output-wrapper",children:[S.jsx("span",{className:"raw-output-sizer","aria-hidden":"true",children:n.content||"..."}),S.jsx("div",{className:"raw-output-display",title:n.content||"",children:n.content||"..."})]})]})},n.id);const fe=`entry-node--${n.type||"prose"}`,oe={borderTop:e?`4px solid ${e}`:void 0};return S.jsx("div",{"data-id":n.id,className:"entry-node",style:{top:`${n.y}px`,left:`${n.x}px`},title:i,children:S.jsxs("div",{className:`entry-node-visuals ${fe} ${n.dirty?"dirty":""}`,style:oe,children:[["top","right","bottom","left"].map(pe=>S.jsx("div",{className:`socket-container ${pe}`,children:l[pe].map(j=>{const{label:me,type:re}=j,ve=c[`${re}s`].get(me),nt=re==="input"&&f.has(`${n.id}::${me}`),Bt=!!m&&(m.dragFrom==="output"&&re==="input"&&!nt||m.dragFrom==="input"&&re==="output"),yt=!!g&&g.nodeId===n.id&&g.type===re&&g.label===me,L=y.get(`${n.id}::${me}`),ie=h.get(`${n.id}::${me}`);let xe=null;return re==="input"&&L?xe={value:L.value,title:L.title,relationshipId:L.relationshipId,bookId:L.bookId}:re==="output"&&ie&&(xe={value:ie.value,title:ie.title,relationshipId:ie.relationshipId,bookId:ie.bookId}),S.jsx(GN,{node:n,label:me,type:re,position:ve,side:pe,isOccupied:nt,isDropTarget:Bt,isEditing:yt,currentValue:yt?g.currentValue:"",inlinedState:xe,onValueChange:qe=>q(Qe=>Qe?{...Qe,currentValue:qe}:null),onKeyDown:z,onBlur:F,onLabelMouseDown:qe=>{qe.stopPropagation(),Z.current=!0,q({nodeId:n.id,type:re,label:me,currentValue:me})},onUpdateInlinedValue:ee,onToggleRelationshipInlined:ce},`${n.id}-${re}-${me}`)})},pe)),S.jsx("div",{className:"entry-node-body",children:S.jsx("p",{className:"entry-node-title",children:n.title})}),(n.type==="prose"||!n.type)&&S.jsx("button",{className:"generate-ideas-button",onMouseDown:pe=>{pe.stopPropagation(),C(n)},"aria-label":`Generate ideas from: ${n.title}`,children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M10 3L8 8l-5 2 5 2 2 5 2-5 5-2-5-2-2-5Z"}),S.jsx("path",{d:"M18 13l-2-2 2-2 2 2-2 2Z"})]})}),n.type==="js"&&S.jsx("button",{className:"refresh-button",onMouseDown:pe=>{pe.stopPropagation(),E(n)},"aria-label":`Recompute outputs for: ${n.title}`,children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M3 2v6h6"}),S.jsx("path",{d:"M3 13a9 9 0 1 0 3-7.7L3 8"})]})}),n.type==="nl"&&S.jsx("button",{className:"refresh-button nl-refresh-button",onMouseDown:pe=>{pe.stopPropagation(),x(n)},"aria-label":`Recompute outputs for: ${n.title}`,children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M3 2v6h6"}),S.jsx("path",{d:"M3 13a9 9 0 1 0 3-7.7L3 8"})]})}),S.jsx("button",{className:"delete-entry-node-button",onMouseDown:pe=>{pe.stopPropagation(),v(n)},"aria-label":`Delete entry: ${n.title||"value node"}`,children:""}),S.jsxs(S.Fragment,{children:[S.jsx("button",{className:"add-input-socket-button",onMouseDown:pe=>{pe.stopPropagation(),Z.current=!0;const j=`__editing_${Date.now()}`;O(n,"input",j),q({nodeId:n.id,type:"input",label:j,currentValue:""})},"aria-label":"Add input socket",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}),S.jsx("polyline",{points:"10 17 15 12 10 7"}),S.jsx("line",{x1:"15",y1:"12",x2:"3",y2:"12"})]})}),S.jsx("button",{className:"add-output-socket-button",onMouseDown:pe=>{pe.stopPropagation(),Z.current=!0;const j=`__editing_${Date.now()}`;O(n,"output",j),q({nodeId:n.id,type:"output",label:j,currentValue:""})},"aria-label":"Add output socket",children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}),S.jsx("polyline",{points:"16 17 21 12 16 7"}),S.jsx("line",{x1:"21",y1:"12",x2:"9",y2:"12"})]})})]})]})},n.id)},Ch=250,Sh=80,Gu=n=>n?["top","right","bottom","left","top-right","top-left","bottom-right","bottom-left"].includes(n):!1,Hu=n=>n?["top","right","bottom","left"].includes(n):!1,Eh=(n,e,i,l,c)=>{const f=1-c,m=f*f*f*n.x+3*f*f*c*e.x+3*f*c*c*i.x+c*c*c*l.x,g=f*f*f*n.y+3*f*f*c*e.y+3*f*c*c*i.y+c*c*c*l.y,y=3*f*f*(e.x-n.x)+6*f*c*(i.x-e.x)+3*c*c*(l.x-i.x),h=3*f*f*(e.y-n.y)+6*f*c*(i.y-e.y)+3*c*c*(l.y-i.y),v=Math.atan2(h,y)*(180/Math.PI);return{x:m,y:g,angle:v}},Ah=(n,e,i,l,c)=>{const f=1-c,m=f*f*f*n.x+3*f*f*c*e.x+3*f*c*c*i.x+c*c*c*l.x,g=f*f*f*n.y+3*f*f*c*e.y+3*f*c*c*i.y+c*c*c*l.y;return{x:m,y:g}},zN=(n,e)=>Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),ON=(n,e,i,l,c=100)=>{let f=0;const m=[0];let g=Ah(n,e,i,l,0);for(let y=1;y<=c;y++){const h=y/c,v=Ah(n,e,i,l,h);f+=zN(g,v),m.push(f),g=v}return{lengths:m,totalLength:f}},_h=(n,e)=>{const{lengths:i,totalLength:l}=n,c=i.length-1;if(e<=0)return 0;if(e>=l)return 1;let f=0;for(;f<i.length&&i[f]<e;)f++;if(f===0)return 0;const m=i[f-1],y=i[f]-m;if(y===0)return(f-1)/c;const h=(e-m)/y,v=(f-1)/c,C=1/c;return v+h*C},FN=(n,e,i,l,c,f,m,g)=>{const y=(me,re)=>({x:(me-m.left-g.x)/g.k,y:(re-m.top-g.y)/g.k}),h=me=>{const re=me.left+me.width/2,ve=me.top+me.height/2;return y(re,ve)},v=h(n),C=h(l),E=60;let x=v.x,U=v.y,O=C.x,q=C.y;switch(i){case"top":U-=E;break;case"bottom":U+=E;break;case"left":x-=E;break;case"right":x+=E;break}switch(f){case"top":q=C.y-E;break;case"bottom":q=C.y+E;break;case"left":O=C.x-E;break;case"right":O=C.x+E;break}const z=`M${v.x},${v.y} C${x},${U} ${O},${q} ${C.x},${C.y}`,F=v,Z={x,y:U},ee={x:O,y:q},ce=C,fe=ON(F,Z,ee,ce),oe=_h(fe,fe.totalLength*.33),pe=_h(fe,fe.totalLength*.66),j=[Eh(F,Z,ee,ce,oe),Eh(F,Z,ee,ce,pe)];return{pathD:z,arrows:j}},xh=["#3366CC","#DC3912","#FF9900","#109618","#990099","#0099C6","#DD4477","#66AA00","#B82E2E","#316395","#994499","#22AA99","#AAAA11","#6633CC","#E67300","#8B0707","#651067","#329262"],Mh=({nodes:n,links:e,onSelectEntry:i,onEditRelationship:l,onDeleteEntry:c,onBackgroundClick:f,onGenerateIdeas:m,onRecomputeCode:g,onRecomputeNL:y,onNodePositionChange:h,onNodeContentChange:v,onAddRelationshipDirectly:C,onAddSocket:E,onUpdateSocketLabel:x,onAddSocketAndConnect:U,onUpdateInlinedValue:O,onToggleRelationshipInlined:q})=>{const z=ae.useRef(null),[F,Z]=ae.useState({x:0,y:0,k:1}),ee=ae.useRef(!1),[ce,fe]=ae.useState(null),[oe,pe]=ae.useState(null),[j,me]=ae.useState(null),re=ae.useCallback(P=>typeof P=="string"?P:typeof P=="object"&&P!==null&&typeof P.id=="string"?P.id:null,[]),ve=ae.useMemo(()=>{const P=new Set(n.map(le=>le.id));return e.filter(le=>{if(!le)return!1;const W=re(le.source),be=re(le.target);return W&&be&&P.has(W)&&P.has(be)})},[n,e,re]),nt=ae.useMemo(()=>{const P=new Set;return ve.forEach(le=>{const W=re(le.target);W&&le.targetLabel&&P.add(`${W}::${le.targetLabel}`)}),P},[ve,re]),Bt=ae.useMemo(()=>{const P=z.current?{x:z.current.clientWidth/2,y:z.current.clientHeight/2}:{x:0,y:0};return n.map(le=>({...le,x:le.id===(ce==null?void 0:ce.id)?ce.x:le.x??P.x,y:le.id===(ce==null?void 0:ce.id)?ce.y:le.y??P.y}))},[n,ce]),yt=ae.useMemo(()=>{const P=new Set,le=new Map(n.map(W=>[W.id,W]));return ve.forEach(W=>{if(W.isInlined){const be=re(W.source),Ve=re(W.target),Me=le.get(be),ft=le.get(Ve);Me&&Me.type==="input"&&P.add(be),ft&&ft.type==="output"&&P.add(Ve)}}),P},[ve,re,n]),L=ae.useMemo(()=>Bt.filter(P=>!yt.has(P.id)),[Bt,yt]),ie=ae.useMemo(()=>{const P=new Map,le=new Map(n.map(W=>[W.id,W]));return ve.forEach(W=>{if(W.isInlined){const be=re(W.source),Ve=re(W.target),Me=le.get(be);if(be&&Ve&&W.targetLabel&&Me&&Me.type==="input"){const ft=`${Ve}::${W.targetLabel}`;P.set(ft,{value:Me.content||"",title:Me.title||"Untitled Input",sourceEntryId:be,relationshipId:W.id,bookId:Me.bookId})}}}),P},[ve,n,re]),xe=ae.useMemo(()=>{const P=new Map,le=new Map(n.map(W=>[W.id,W]));return ve.forEach(W=>{if(W.isInlined){const be=re(W.source),Ve=re(W.target),Me=le.get(Ve);if(be&&Ve&&W.sourceLabel&&Me&&Me.type==="output"){const ft=`${be}::${W.sourceLabel}`;P.set(ft,{value:Me.content||"",title:Me.title||"Untitled Output",targetEntryId:Ve,relationshipId:W.id,bookId:Me.bookId})}}}),P},[ve,n,re]),qe=ae.useMemo(()=>{const P=new Map;return L.forEach(le=>P.set(le.id,{x:le.x??0,y:le.y??0})),P},[L]),Qe=ae.useMemo(()=>{const P=[...new Set(n.map(W=>W.povId))],le=new Map;return P.forEach((W,be)=>{le.set(W,xh[be%xh.length])}),le},[n]),{socketPositionLayout:M,renderableSockets:$}=ae.useMemo(()=>{const P=n.map(Ce=>{const Ae=qe.get(Ce.id);return{...Ce,x:(Ae==null?void 0:Ae.x)??Ce.x,y:(Ae==null?void 0:Ae.y)??Ce.y}}),le=["top","right","bottom","left"],W=7,be=3,Ve=new Map(P.map(Ce=>[Ce.id,Ce])),Me=(Ce,Ae,Pe)=>`${Ce}::${Ae}::${Pe}`,ft=new Map;P.forEach(Ce=>{const Ae=[...(Ce.inputs||[]).map(Pe=>({label:Pe,type:"input"})),...(Ce.outputs||[]).map(Pe=>({label:Pe,type:"output"}))];ft.set(Ce.id,Ae)});const Se=new Map;ve.forEach(Ce=>{const Ae=re(Ce.source),Pe=re(Ce.target);!Ae||!Pe||[{id:Ae,type:"output",label:Ce.sourceLabel},{id:Pe,type:"input",label:Ce.targetLabel}].forEach(dt=>{const rt=Me(dt.id,dt.type,dt.label);Se.has(rt)||Se.set(rt,[]),Se.get(rt).push(Ce)})});const ke=(Ce,Ae,Pe,dt)=>{const rt={x:Ce.x??0,y:Ce.y??0},pt=Ch/2,It=Sh/2,Ze=Ch*.8,we=Sh*.8,Oe=We=>-We/2,Xe=(We,vt)=>vt>1?We/(vt-1):0;let Te;switch(Ae){case"top":case"bottom":return Te=dt>0?Oe(Ze)+Pe*Xe(Ze,dt):0,{x:rt.x+Te,y:rt.y+(Ae==="top"?-It:It)};case"left":case"right":return Te=dt>0?Oe(we)+Pe*Xe(we,dt):0,{x:rt.x+(Ae==="left"?-pt:pt),y:rt.y+Te}}},st=(Ce,Ae)=>Math.pow(Ce.x-Ae.x,2)+Math.pow(Ce.y-Ae.y,2);let Ue=new Map;P.forEach(Ce=>{(Ce.inputs||[]).forEach(Ae=>Ue.set(Me(Ce.id,"input",Ae),"left")),(Ce.outputs||[]).forEach(Ae=>Ue.set(Me(Ce.id,"output",Ae),"right"))});for(let Ce=0;Ce<be;Ce++)P.forEach(Ae=>{const Pe=ft.get(Ae.id)||[];if(Pe.length===0||Pe.length>W)return;const dt=new Map;Pe.forEach(Ze=>{(Se.get(Me(Ae.id,Ze.type,Ze.label))||[]).forEach(Oe=>{const Xe=re(Oe.source)===Ae.id,Te={nodeId:re(Xe?Oe.target:Oe.source),socketLabel:Xe?Oe.targetLabel:Oe.sourceLabel,socketType:Xe?"input":"output"};if(!Te.nodeId||!Te.socketLabel)return;const We=Ve.get(Te.nodeId);if(!We)return;const vt=Me(Te.nodeId,Te.socketType,Te.socketLabel),Tt=Ue.get(vt),Ct=(ft.get(Te.nodeId)||[]).filter(Dt=>Ue.get(Me(Te.nodeId,Dt.type,Dt.label))===Tt),ut=Ct.findIndex(Dt=>Dt.label===Te.socketLabel&&Dt.type===Te.socketType);ut!==-1&&dt.set(vt,ke(We,Tt,ut,Ct.length))})});let rt=1/0,pt=null;const It=Math.pow(4,Pe.length);for(let Ze=0;Ze<It;Ze++){let we=Ze,Oe=0;const Xe=[];for(let Tt=0;Tt<Pe.length;Tt++)Xe.push(le[we%4]),we=Math.floor(we/4);const Te={top:[],right:[],bottom:[],left:[]};Pe.forEach((Tt,Ct)=>Te[Xe[Ct]].push(Tt));const We=qe.get(Ae.id);We&&le.forEach(Tt=>{Te[Tt].sort((Ct,ut)=>{const Dt=At=>{let $t=0,Ft=0,pn=0;return(Se.get(Me(Ae.id,At.type,At.label))||[]).forEach(en=>{const St=re(en.source)===Ae.id,hn=re(St?en.target:en.source),un=qe.get(hn);un&&($t+=un.x,Ft+=un.y,pn++)}),pn===0?At.type==="input"?Math.PI:0:Math.atan2(Ft/pn-We.y,$t/pn-We.x)};return Dt(Ct)-Dt(ut)})});const vt=new Map;le.forEach(Tt=>{const Ct=Te[Tt];Ct.forEach((ut,Dt)=>{const At=ke(Ae,Tt,Dt,Ct.length);vt.set(Me(Ae.id,ut.type,ut.label),At)})}),Pe.forEach(Tt=>{const Ct=Me(Ae.id,Tt.type,Tt.label),ut=Se.get(Ct)||[],Dt=vt.get(Ct);ut.forEach(At=>{const $t=re(At.source)===Ae.id,Ft={nodeId:re($t?At.target:At.source),label:$t?At.targetLabel:At.sourceLabel,type:$t?"input":"output"};if(!Ft.nodeId||!Ft.label)return;const pn=Me(Ft.nodeId,Ft.type,Ft.label),mn=dt.get(pn);Dt&&mn&&(Oe+=st(Dt,mn))})}),Oe<rt&&(rt=Oe,pt=Xe)}pt&&Pe.forEach((Ze,we)=>Ue.set(Me(Ae.id,Ze.type,Ze.label),pt[we]))});const Ke=new Map,Le=new Map;return P.forEach(Ce=>{const Ae={top:[],right:[],bottom:[],left:[]};(ft.get(Ce.id)||[]).forEach(rt=>{const pt=Me(Ce.id,rt.type,rt.label),It=Ue.get(pt)||(rt.type==="input"?"left":"right");Ae[It].push(rt)});const Pe=qe.get(Ce.id);Pe&&le.forEach(rt=>{Ae[rt].sort((pt,It)=>{const Ze=we=>{let Oe=0,Xe=0,Te=0;return(Se.get(Me(Ce.id,we.type,we.label))||[]).forEach(vt=>{const Tt=re(vt.source)===Ce.id,Ct=re(Tt?vt.target:vt.source),ut=qe.get(Ct);ut&&(Oe+=ut.x,Xe+=ut.y,Te++)}),Te===0?we.type==="input"?Math.PI:0:Math.atan2(Xe/Te-Pe.y,Oe/Te-Pe.x)};return Ze(pt)-Ze(It)})}),Ke.set(Ce.id,Ae);const dt={inputs:new Map,outputs:new Map};le.forEach(rt=>{const pt=Ae[rt],It=pt.length;if(It===0)return;const we={top:["top-left","top","top-right"],right:["top-right","right","bottom-right"],bottom:["bottom-left","bottom","bottom-right"],left:["top-left","left","bottom-left"]}[rt];pt.forEach((Oe,Xe)=>{let Te=we[1];It>1&&(Xe===0?Te=we[0]:Xe===It-1&&(Te=we[2])),dt[`${Oe.type}s`].set(Oe.label,Te)})}),Le.set(Ce.id,dt)}),{socketPositionLayout:Le,renderableSockets:Ke}},[n,ve,qe,re]),ue=ae.useCallback(P=>{P.preventDefault();const{clientX:le,clientY:W,deltaY:be}=P,Ve=Math.pow(.995,be);Z(Me=>{const ft=Math.max(.2,Math.min(4,Me.k*Ve));if(!z.current)return Me;const Se=z.current.getBoundingClientRect(),ke=le-Se.left,st=W-Se.top;return{x:ke-(ke-Me.x)*(ft/Me.k),y:st-(st-Me.y)*(ft/Me.k),k:ft}})},[]),se=ae.useRef({nodes:n,links:e,onSelectEntry:i,onNodePositionChange:h,onNodeContentChange:v,onBackgroundClick:f,onAddRelationshipDirectly:C,onAddSocketAndConnect:U,onToggleRelationshipInlined:q,occupiedInputSockets:nt,viewTransform:F,draggedNode:ce,newConnection:oe,inlineEditingSocket:j,setDraggedNode:fe,setNewConnection:pe,setViewTransform:Z});ae.useLayoutEffect(()=>{se.current={nodes:n,links:e,onSelectEntry:i,onNodePositionChange:h,onNodeContentChange:v,onBackgroundClick:f,onAddRelationshipDirectly:C,onAddSocketAndConnect:U,onToggleRelationshipInlined:q,occupiedInputSockets:nt,viewTransform:F,draggedNode:ce,newConnection:oe,inlineEditingSocket:j,setDraggedNode:fe,setNewConnection:pe,setViewTransform:Z}});const Q=ae.useRef({mode:"idle",hasDragged:!1,startX:0,startY:0,initialTransformX:0,initialTransformY:0,draggedNodeOriginalPosition:{x:0,y:0}});ae.useEffect(()=>{const P=z.current;if(!P)return;const le=Se=>"touches"in Se?Se.touches.length>0?{clientX:Se.touches[0].clientX,clientY:Se.touches[0].clientY}:Se.changedTouches.length>0?{clientX:Se.changedTouches[0].clientX,clientY:Se.changedTouches[0].clientY}:{clientX:0,clientY:0}:{clientX:Se.clientX,clientY:Se.clientY},W=(Se,ke)=>{if(!z.current)return{x:0,y:0};const st=z.current.getBoundingClientRect(),{x:Ue,y:Ke,k:Le}=se.current.viewTransform;return{x:(Se-st.left-Ue)/Le,y:(ke-st.top-Ke)/Le}},be=Se=>{"touches"in Se&&Se.preventDefault();const ke=Q.current;if(ke.mode==="idle")return;const{clientX:st,clientY:Ue}=le(Se);if(!ke.hasDragged){const Ke=st-ke.startX,Le=Ue-ke.startY;Math.sqrt(Ke*Ke+Le*Le)>5&&(ke.hasDragged=!0)}if(ke.mode==="draggingNode"){const{draggedNode:Ke,setDraggedNode:Le}=se.current;if(!Ke)return;const{x:Ce,y:Ae}=W(st,Ue);Le({...Ke,x:Ce-Ke.offsetX,y:Ae-Ke.offsetY})}if(ke.mode==="connecting"){const{setNewConnection:Ke}=se.current,Le=W(st,Ue);Ke(Ce=>Ce?{...Ce,endX:Le.x,endY:Le.y}:null)}if(ke.mode==="panning"&&ke.hasDragged){const{setViewTransform:Ke}=se.current,Le=st-ke.startX,Ce=Ue-ke.startY;Ke(Ae=>({...Ae,x:ke.initialTransformX+Le,y:ke.initialTransformY+Ce}))}},Ve=Se=>{const ke=Q.current,{draggedNode:st,newConnection:Ue,setDraggedNode:Ke,setNewConnection:Le}=se.current,{onSelectEntry:Ce,onNodePositionChange:Ae,onAddRelationshipDirectly:Pe,onAddSocketAndConnect:dt,onBackgroundClick:rt,onToggleRelationshipInlined:pt,links:It,occupiedInputSockets:Ze,nodes:we}=se.current,{clientX:Oe,clientY:Xe}=le(Se);if(ke.mode==="draggingNode"&&st){const Te=we.find(We=>We.id===st.id);if(Te)if(ke.hasDragged)Ae(Te,{x:st.x,y:st.y});else{const We="target"in Se?Se.target:document.elementFromPoint(Oe,Xe);We!=null&&We.closest(".raw-input-field")?We.focus():We!=null&&We.closest(".entry-node--output-raw")||Ce(Te.bookId,Te.povId,Te.id)}}if(ke.mode==="connecting"&&Ue){const Te=document.elementFromPoint(Oe,Xe),We=Te==null?void 0:Te.closest("[data-socket-type]");if(We){const vt=We.getAttribute("data-socket-type"),Tt=We.getAttribute("data-node-id"),Ct=We.getAttribute("data-socket-label");if(Tt&&Ct&&Ue.sourceNodeId!==Tt){const ut=Ue.dragFrom==="output"&&vt==="input",Dt=Ue.dragFrom==="input"&&vt==="output",At=ut?Ue.sourceNodeId:Tt,$t=ut?Tt:Ue.sourceNodeId,Ft=ut?Ue.sourceSocketLabel:Ct,pn=ut?Ct:Ue.sourceSocketLabel,mn=St=>typeof St=="string"?St:typeof St=="object"&&St!==null&&typeof St.id=="string"?St.id:null,en=It.find(St=>mn(St.source)===At&&mn(St.target)===$t&&St.sourceLabel===Ft&&St.targetLabel===pn);if(en){const St=we.find(un=>un.id===At),hn=we.find(un=>un.id===$t);St&&hn&&(St.type==="input"&&!en.isInlined?pt(en.id,St.bookId,hn,!0):hn.type==="output"&&!en.isInlined&&pt(en.id,hn.bookId,St,!0))}else if(ut||Dt){if(ut&&Ze.has(`${Tt}::${Ct}`))return;const St=we.find(hn=>hn.id===At);St&&Pe({sourceEntryId:At,targetEntryId:$t,sourceLabel:Ft,targetLabel:pn,bookId:St.bookId})}}}else{const vt=Te==null?void 0:Te.closest(".entry-node-visuals");if(vt){const Tt=vt.closest(".entry-node"),Ct=Tt==null?void 0:Tt.getAttribute("data-id");if(Ct&&Ct!==Ue.sourceNodeId){const ut=we.find(Zn=>Zn.id===Ct);if(!ut)return;const Dt=Ue.dragFrom==="output"?"input":"output";let At,$t=1;const Ft=Dt==="input"?"Input":"Output",pn=(Dt==="input"?ut.inputs:ut.outputs)||[];do At=`${Ft} ${$t}`,$t++;while(pn.includes(At));const mn=At,en=Ue.dragFrom==="output"?Ue.sourceNodeId:Ct,St=Ue.dragFrom==="output"?Ue.sourceSocketLabel:mn,hn=Ue.dragFrom==="output"?mn:Ue.sourceSocketLabel,un=we.find(Zn=>Zn.id===en);un&&un.bookId!==ut.bookId?alert("Relationships can only be created between entries in the same book."):dt({targetNode:ut,newSocketType:Dt,newSocketLabel:mn,sourceEntryId:en,sourceSocketLabel:St,targetSocketLabel:hn})}}}}if(ke.mode==="panning"&&!ke.hasDragged){const{x:Te,y:We}=W(Oe,Xe);rt({x:Te,y:We})}ke.mode="idle",ke.hasDragged=!1,Ke(null),Le(null),window.removeEventListener("mousemove",be),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",be),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)},Me=Se=>{var Ae;if("touches"in Se&&Se.touches.length>1)return;const{clientX:ke,clientY:st}=le(Se),Ue="touches"in Se&&Se.touches.length>0?Se.touches[0].target:"target"in Se?Se.target:null;if(!Ue||Ue.closest(".socket-label")||Ue.closest(".node-content-input")||Ue.closest(".socket-inlined-input")||se.current.inlineEditingSocket)return;const Ke=Q.current;if(Ue.closest(".generate-ideas-button, .refresh-button, .delete-entry-node-button, .add-input-socket-button, .add-output-socket-button, .socket-eject-button"))return;const Le=Ue.closest("[data-socket-type]"),Ce=Ue.closest(".entry-node-visuals, .entry-node--input-raw, .entry-node--output-raw");if(Ke.startX=ke,Ke.startY=st,Le){"touches"in Se&&Se.preventDefault(),Se.stopPropagation(),Ke.mode="connecting";const Pe=Le.getAttribute("data-socket-type"),dt=Le.getAttribute("data-socket-position"),rt=Le.getAttribute("data-socket-side"),pt=Le.getAttribute("data-node-id"),It=Le.getAttribute("data-socket-label");if(!Pe||!pt||!It||!Gu(dt)||!Hu(rt)){console.warn("Socket element is missing required data attributes or has an invalid position.",{socketTarget:Le});return}const Ze=dt,we=rt;if(Pe==="input"&&se.current.occupiedInputSockets.has(`${pt}::${It}`)){const Xe=se.current.nodes.find(Te=>Te.id===pt);if(Xe&&Xe.type!=="output")return}const Oe=Le.querySelector(".socket-handle");if(Oe){const Xe=Oe.getBoundingClientRect(),Te=Xe.left+Xe.width/2,We=Xe.top+Xe.height/2,vt=W(Te,We);se.current.setNewConnection({sourceNodeId:pt,sourceSocketLabel:It,sourceX:vt.x,sourceY:vt.y,endX:vt.x,endY:vt.y,dragFrom:Pe,sourcePosition:Ze,sourceSide:we})}}else if(Ce){"touches"in Se||Se.preventDefault(),Se.stopPropagation(),Ke.mode="draggingNode";const Pe=(Ae=Ce.closest(".entry-node"))==null?void 0:Ae.getAttribute("data-id"),{nodes:dt,setDraggedNode:rt}=se.current,pt=dt.find(Oe=>Oe.id===Pe);if(!pt)return;const It=W(ke,st),Ze=pt.x??0,we=pt.y??0;rt({id:Pe,x:Ze,y:we,offsetX:It.x-Ze,offsetY:It.y-we}),Ke.draggedNodeOriginalPosition={x:Ze,y:we}}else{Ke.mode="panning";const{x:Pe,y:dt}=se.current.viewTransform;Ke.initialTransformX=Pe,Ke.initialTransformY=dt}window.addEventListener("mousemove",be),window.addEventListener("mouseup",Ve),window.addEventListener("touchmove",be,{passive:!1}),window.addEventListener("touchend",Ve),window.addEventListener("touchcancel",Ve)},ft=Se=>{const ke=Q.current;if(Se.key==="Escape"){const{setDraggedNode:st,setNewConnection:Ue,onNodePositionChange:Ke,nodes:Le}=se.current;if(ke.mode==="draggingNode"&&se.current.draggedNode){const Ce=Le.find(Ae=>{var Pe;return Ae.id===((Pe=se.current.draggedNode)==null?void 0:Pe.id)});Ce&&Ke(Ce,ke.draggedNodeOriginalPosition)}st(null),Ue(null),ke.mode="idle"}};return P.addEventListener("mousedown",Me),P.addEventListener("touchstart",Me,{passive:!1}),window.addEventListener("keydown",ft),()=>{P.removeEventListener("mousedown",Me),P.removeEventListener("touchstart",Me),window.removeEventListener("keydown",ft),window.removeEventListener("mousemove",be),window.removeEventListener("mouseup",Ve),window.removeEventListener("touchmove",be),window.removeEventListener("touchend",Ve),window.removeEventListener("touchcancel",Ve)}},[]);const[ze,ot]=ae.useState(new Map);ae.useLayoutEffect(()=>{if(!z.current)return;const P=new Map,le=z.current.getBoundingClientRect();ve.forEach(W=>{var Se,ke;if(W.isInlined)return;const be=re(W.source),Ve=re(W.target);if(!be||!Ve||!W.sourceLabel||!W.targetLabel)return;const Me=(Se=z.current)==null?void 0:Se.querySelector(`[data-socket-id="${be}::output::${W.sourceLabel}"]`),ft=(ke=z.current)==null?void 0:ke.querySelector(`[data-socket-id="${Ve}::input::${W.targetLabel}"]`);if(Me&&ft){const st=Me.querySelector(".socket-handle"),Ue=ft.querySelector(".socket-handle"),Ke=Me.getAttribute("data-socket-position"),Le=ft.getAttribute("data-socket-position"),Ce=Me.getAttribute("data-socket-side"),Ae=ft.getAttribute("data-socket-side");if(st&&Ue&&Gu(Ke)&&Gu(Le)&&Hu(Ce)&&Hu(Ae)){const Pe=st.getBoundingClientRect(),dt=Ue.getBoundingClientRect(),{pathD:rt,arrows:pt}=FN(Pe,Ke,Ce,dt,Le,Ae,le,F);P.set(W.id,{pathD:rt,arrows:pt})}}}),ot(P)},[ve,re,L,F,M]);const Pt=()=>{if(!j)return;const{nodeId:P,type:le,label:W,currentValue:be}=j,Ve=n.find(Me=>Me.id===P);Ve&&x(Ve,le,W,be),me(null)},he=()=>{if(!j)return;const{nodeId:P,type:le,label:W}=j,be=n.find(Ve=>Ve.id===P);be&&x(be,le,W,""),me(null)},qt=P=>{P.key==="Escape"&&(P.stopPropagation(),he()),P.key==="Enter"&&(P.preventDefault(),Pt())},rn=()=>{if(ee.current){ee.current=!1;return}Pt()};return n.length===0?S.jsx("div",{className:"graph-view-container graph-view-empty",ref:z,onClick:P=>{const le=P.currentTarget.getBoundingClientRect(),W=(P.clientX-le.left-F.x)/F.k,be=(P.clientY-le.top-F.y)/F.k;f({x:W,y:be})},children:S.jsx("p",{className:"graph-view-placeholder",children:"The graph is empty. Click anywhere on the background to add your first entry."})}):S.jsx("div",{className:"graph-view-container",ref:z,onWheel:ue,children:S.jsxs("div",{className:"graph-content-wrapper",style:{transform:`translate(${F.x}px, ${F.y}px) scale(${F.k})`,transformOrigin:"0 0"},children:[S.jsxs("svg",{className:"graph-svg-layer",children:[S.jsx("defs",{children:S.jsx("path",{id:"arrowhead-path",d:"M -10 -7 L 0 0 L -10 7",fill:"none",stroke:"#1877f2",strokeWidth:"2",strokeLinecap:"round"})}),S.jsx("g",{children:Array.from(ze.entries()).map(([P,le])=>{const W=ve.find(Me=>Me.id===P);if(!W||!le)return null;const{pathD:be,arrows:Ve}=le;return S.jsxs("g",{className:"relationship-group",onClick:()=>l(W),children:[S.jsx("path",{d:be,className:"relationship-hitbox"}),S.jsx("path",{d:be,className:"relationship-line"}),Ve.map((Me,ft)=>S.jsx("use",{href:"#arrowhead-path",transform:`translate(${Me.x}, ${Me.y}) rotate(${Me.angle})`},ft))]},W.id)})}),oe&&(()=>{const{sourceX:P,sourceY:le,endX:W,endY:be,sourceSide:Ve}=oe,Me=W-P,ft=be-le,Se=120;let ke=P,st=le;switch(Ve){case"top":st-=Se;break;case"bottom":st+=Se;break;case"left":ke-=Se;break;case"right":ke+=Se;break}const Ue=W-Me*.25,Ke=be-ft*.25,Le=`M${P},${le} C${ke},${st} ${Ue},${Ke} ${W},${be}`;return S.jsx("path",{className:"new-connection-line",d:Le})})()]}),S.jsx("div",{className:"graph-nodes-layer",children:L.map(P=>{const le=$.get(P.id);if(!le)return null;const W=M.get(P.id);return W?S.jsx(HN,{node:P,povColor:Qe.get(P.povId),povTitle:P.povTitle,renderableSocketsForNode:le,socketPositionLayoutForNode:W,occupiedInputSockets:nt,newConnection:oe,inlineEditingSocket:j,onDeleteEntry:c,onGenerateIdeas:m,onRecomputeCode:g,onRecomputeNL:y,onNodeContentChange:v,onAddSocket:E,setInlineEditingSocket:me,handleKeyDownOnSocketInput:qt,handleSocketInputBlur:rn,ignoreNextBlur:ee,inlinedInputValues:ie,inlinedOutputValues:xe,onUpdateInlinedValue:O,onToggleRelationshipInlined:q},P.id):null})})]})})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A reusable modal component for confirming a delete action. It displays a warning
 * and requires user confirmation before proceeding with the deletion.
 */const JN=({item:n,onClose:e,onConfirm:i})=>S.jsx("div",{className:"modal-overlay",onClick:e,children:S.jsxs("div",{className:"modal-content",onClick:l=>l.stopPropagation(),children:[S.jsx("h3",{className:"modal-title",children:"Confirm Deletion"}),S.jsxs("div",{className:"modal-body",children:[S.jsxs("p",{children:['Are you sure you want to permanently delete "',n.name,'"?']}),S.jsx("p",{className:"modal-warning",children:"This action cannot be undone."})]}),S.jsxs("div",{className:"modal-actions",children:[S.jsx("button",{type:"button",className:"button-cancel",onClick:e,children:"Cancel"}),S.jsx("button",{type:"button",className:"button-delete",onClick:i,children:"Delete"})]})]})});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A modal component for confirming a data import action. It warns the user that
 * importing will overwrite existing data and requires explicit confirmation.
 */const YN=({onClose:n,onConfirm:e})=>S.jsx("div",{className:"modal-overlay",onClick:n,children:S.jsxs("div",{className:"modal-content",onClick:i=>i.stopPropagation(),children:[S.jsx("h3",{className:"modal-title",children:"Confirm Import"}),S.jsxs("div",{className:"modal-body",children:[S.jsx("p",{children:"Are you sure you want to import this file? All of your current data will be permanently replaced."}),S.jsx("p",{className:"modal-warning",children:"We recommend exporting your current data first as a backup."})]}),S.jsxs("div",{className:"modal-actions",children:[S.jsx("button",{type:"button",className:"button-cancel",onClick:n,children:"Cancel"}),S.jsx("button",{type:"button",className:"button-delete",onClick:e,children:"Import and Overwrite"})]})]})});/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A modal-like view component for resolving data synchronization conflicts.
 * It presents the user with a choice between their local version and the version
 * from the cloud.
 */const $N=({conflict:n,onResolve:e})=>S.jsxs("div",{className:"conflict-container",children:[S.jsx("h2",{children:"Sync Conflict"}),S.jsx("p",{children:"The content was changed on another device. Please choose which version to keep."}),S.jsxs("div",{className:"conflict-actions",children:[S.jsx("button",{className:"button secondary",onClick:()=>e(n.local),children:"Keep My Version"}),S.jsx("button",{className:"button primary",onClick:()=>e(n.remote),children:"Use Cloud Version"})]})]}),KN=({onClose:n,onSave:e})=>{const[i,l]=ae.useState(`Version - ${new Date().toLocaleString()}`),c=f=>{f.preventDefault(),i.trim()&&e(i.trim())};return S.jsx("div",{className:"modal-overlay",onClick:n,children:S.jsx("div",{className:"modal-content",onClick:f=>f.stopPropagation(),children:S.jsxs("form",{onSubmit:c,children:[S.jsx("h3",{className:"modal-title",children:"Save New Version"}),S.jsxs("div",{className:"modal-body",children:[S.jsx("label",{htmlFor:"versionName",children:"Version Name"}),S.jsx("input",{id:"versionName",type:"text",value:i,onChange:f=>l(f.target.value),className:"modal-input",autoFocus:!0})]}),S.jsxs("div",{className:"modal-actions",children:[S.jsx("button",{type:"button",className:"button-cancel",onClick:n,children:"Cancel"}),S.jsx("button",{type:"submit",className:"button-create",disabled:!i.trim(),children:"Save"})]})]})})})};/**
 * @license
 * SPDX-License-Identifier: Apache-2.0
 *
 * @fileoverview
 * A modal component that displays application settings, specifically the options
 * for importing and exporting data to/from Google Drive.
 */const XN=({onClose:n,onExport:e,onImport:i,isPickerApiLoaded:l,isLoading:c})=>S.jsx("div",{className:"modal-overlay",onClick:n,children:S.jsxs("div",{className:"modal-content",onClick:f=>f.stopPropagation(),children:[S.jsx("h3",{className:"modal-title",children:"Settings"}),S.jsxs("div",{className:"settings-modal-body",children:[S.jsxs("div",{className:"settings-action",children:[S.jsx("h4",{children:"Export to Google Drive"}),S.jsx("p",{children:"Save a backup of all your data to a JSON file in your Google Drive."}),S.jsx("button",{className:"button secondary",onClick:e,disabled:!l||c,children:l?"Export Data":"Loading..."})]}),S.jsxs("div",{className:"settings-action",children:[S.jsx("h4",{children:"Import from Google Drive"}),S.jsx("p",{children:"Restore data from a backup file. This will overwrite all current data."}),S.jsx("button",{className:"button secondary",onClick:i,disabled:!l||c,children:l?"Import Data":"Loading..."})]})]}),S.jsx("div",{className:"modal-actions",children:S.jsx("button",{type:"button",className:"button-cancel",onClick:n,children:"Close"})})]})}),QN=({entry:n,activeVersionId:e,onClose:i,onSelectVersion:l,onDeleteVersion:c,onRenameVersion:f})=>{const[m,g]=ae.useState(null),[y,h]=ae.useState(""),v=Object.values(n.versions).sort((E,x)=>x.timestamp-E.timestamp),C=E=>{f(E,y),g(null),h("")};return S.jsx("div",{className:"modal-overlay",onClick:i,children:S.jsxs("div",{className:"modal-content large",onClick:E=>E.stopPropagation(),children:[S.jsx("h3",{className:"modal-title",children:"Version History"}),S.jsx("div",{className:"modal-body",children:S.jsx("ul",{className:"version-selector-list",children:v.map(E=>S.jsx("li",{className:`version-selector-item ${E.id===e?"active":""}`,children:m===E.id?S.jsxs("form",{className:"version-rename-form",onSubmit:x=>{x.preventDefault(),C(E.id)},children:[S.jsx("input",{type:"text",value:y,onChange:x=>h(x.target.value),className:"modal-input",autoFocus:!0,onBlur:()=>g(null)}),S.jsx("button",{type:"submit",className:"button-create small",children:"Save"})]}):S.jsxs(S.Fragment,{children:[S.jsxs("div",{className:"version-info",children:[S.jsx("span",{className:"version-name",children:E.name}),S.jsx("span",{className:"version-timestamp",children:new Date(E.timestamp).toLocaleString()})]}),S.jsxs("div",{className:"version-item-actions",children:[S.jsx("button",{className:"version-action-button",onClick:()=>l(E.id),disabled:E.id===e,children:"Select"}),S.jsx("button",{className:"version-action-button",onClick:()=>{g(E.id),h(E.name)},children:"Rename"}),S.jsx("button",{className:"version-action-button danger",onClick:x=>{x.stopPropagation(),c(E.id)},disabled:Object.keys(n.versions).length<=1,children:"Delete"})]})]})},E.id))})}),S.jsx("div",{className:"modal-actions",children:S.jsx("button",{type:"button",className:"button-cancel",onClick:i,children:"Close"})})]})})},ZN=({onClose:n,onConfirm:e})=>{const i=`author-backup-${new Date().toISOString().slice(0,10)}.json`,[l,c]=ae.useState(i),f=m=>{if(m.preventDefault(),l.trim()){const g=l.trim().endsWith(".json")?l.trim():`${l.trim()}.json`;e(g)}};return S.jsx("div",{className:"modal-overlay",onClick:n,children:S.jsx("div",{className:"modal-content",onClick:m=>m.stopPropagation(),children:S.jsxs("form",{onSubmit:f,children:[S.jsx("h3",{className:"modal-title",children:"Export Data"}),S.jsxs("div",{className:"modal-body",children:[S.jsx("label",{htmlFor:"fileName",children:"Filename"}),S.jsx("input",{id:"fileName",type:"text",value:l,onChange:m=>c(m.target.value),className:"modal-input",autoFocus:!0}),S.jsx("p",{className:"modal-info-text",children:"You will be asked to select a folder in Google Drive next."})]}),S.jsxs("div",{className:"modal-actions",children:[S.jsx("button",{type:"button",className:"button-cancel",onClick:n,children:"Cancel"}),S.jsx("button",{type:"submit",className:"button-create",disabled:!l.trim(),children:"Continue"})]})]})})})},WN=({relationship:n,allEntries:e,onClose:i,onSave:l,onDelete:c})=>{const f=typeof n=="object"&&n!==null&&"id"in n,[m,g]=ae.useState(""),[y,h]=ae.useState(""),[v,C]=ae.useState(""),[E,x]=ae.useState("");ae.useEffect(()=>{var q,z,F,Z;typeof n=="object"&&n!==null?(g(n.sourceEntryId||((q=e[0])==null?void 0:q.entryId)||""),h(n.targetEntryId||((z=e[0])==null?void 0:z.entryId)||""),C(n.sourceLabel||""),x(n.targetLabel||"")):(e.length>0&&(g(((F=e[0])==null?void 0:F.entryId)||""),h(((Z=e[0])==null?void 0:Z.entryId)||"")),C(""),x(""))},[n,e]);const U=q=>{if(q.preventDefault(),!m||!y||!E.trim()){alert("Please select a source, target, and provide a target label.");return}l({id:f?n.id:void 0,sourceEntryId:m,targetEntryId:y,sourceLabel:v,targetLabel:E})},O=()=>{f&&c(n.id)};return S.jsx("div",{className:"modal-overlay",onClick:i,children:S.jsx("div",{className:"modal-content",onClick:q=>q.stopPropagation(),children:S.jsxs("form",{onSubmit:U,children:[S.jsx("h3",{className:"modal-title",children:f?"Edit Relationship":"Add Relationship"}),S.jsxs("div",{className:"modal-body",children:[S.jsxs("div",{className:"form-group",children:[S.jsx("label",{htmlFor:"sourceEntry",children:"Source Entry"}),S.jsx("select",{id:"sourceEntry",value:m,onChange:q=>g(q.target.value),className:"modal-select",required:!0,children:e.map(q=>S.jsxs("option",{value:q.entryId,children:[q.povTitle,": ",q.entryTitle]},q.entryId))})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{htmlFor:"sourceLabel",children:"Source Label (Optional)"}),S.jsx("input",{id:"sourceLabel",type:"text",value:v,onChange:q=>C(q.target.value),className:"modal-input",placeholder:"e.g., Protagonist"})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{htmlFor:"targetEntry",children:"Target Entry"}),S.jsx("select",{id:"targetEntry",value:y,onChange:q=>h(q.target.value),className:"modal-select",required:!0,children:e.map(q=>S.jsxs("option",{value:q.entryId,children:[q.povTitle,": ",q.entryTitle]},q.entryId))})]}),S.jsxs("div",{className:"form-group",children:[S.jsx("label",{htmlFor:"targetLabel",children:"Target Label"}),S.jsx("input",{id:"targetLabel",type:"text",value:E,onChange:q=>x(q.target.value),className:"modal-input",placeholder:"e.g., Leads to, Becomes",required:!0})]})]}),S.jsxs("div",{className:"modal-actions",children:[f&&S.jsx("button",{type:"button",className:"button-delete",onClick:O,children:"Delete"}),S.jsx("div",{style:{flexGrow:1}}),S.jsx("button",{type:"button",className:"button-cancel",onClick:i,children:"Cancel"}),S.jsx("button",{type:"submit",className:"button-create",children:"Save"})]})]})})})};var Nh={};const jN=()=>{const n="book-hero-journey",e=Date.now(),i="pov-protagonist",l="pov-mentor",c="pov-antagonist",f="pov-utilities",m="entry-call",g="entry-refusal",y="entry-aid",h="entry-threshold",v="entry-ordeal",C="entry-reward",E="entry-road-back",x="entry-division",U="entry-input-a",O="entry-input-b",q="entry-output-q",z="entry-output-r",F="entry-nl-summary",Z="entry-output-summary",ee=(fe,oe,pe,j,me,re,ve,nt="prose")=>{const Bt=e+Math.random()*1e3,yt=`v-${fe}`;return{id:fe,activeVersionId:yt,type:nt,versions:{[yt]:{id:yt,timestamp:Bt,title:oe,content:pe,name:"Initial Version"}},x:j,y:me,inputs:re,outputs:ve,dirty:!1}};return{exampleData:{[n]:{title:"The Hero's Journey",povs:{[i]:{title:"Protagonist",entries:{[m]:ee(m,"The Call to Adventure","Our hero receives a mysterious message, urging them toward an unknown destiny.",100,300,[],["Refused the Call","Accepted the Call","Story Beat"]),[g]:ee(g,"Refusal of the Call","Filled with doubt and fear, the hero initially rejects the call.",400,150,["From the Call"],["To the Mentor"]),[h]:ee(h,"Crossing the Threshold","Committing to the journey, the hero enters the special world of the adventure.",1e3,300,["From Mentor's Aid"],["To the Ordeal"]),[C]:ee(C,"The Reward","Having survived death, the hero takes possession of the treasure they've been seeking.",1600,150,["From Victory"],["To the Road Back"]),[E]:ee(E,"The Road Back","The hero begins their journey back to their ordinary life, but the adventure is not yet over.",1900,300,["From the Reward"],["Journey's End"])}},[l]:{title:"Mentor",entries:{[y]:ee(y,"Supernatural Aid","A wise mentor appears, providing the hero with the training, equipment, or advice they'll need.",700,300,["Prompted by Refusal","Prompted by Acceptance"],["To the Threshold"])}},[c]:{title:"Antagonist",entries:{[v]:ee(v,"The Ordeal","The hero confronts their greatest fear in a direct confrontation with the story's primary obstacle.",1300,300,["Hero Arrives"],["Hero Victorious","Story Beat"])}},[f]:{title:"Utilities",entries:{[x]:ee(x,"Division and Remainder",`quotient = Math.floor(a / b);
remainder = a % b;`,700,600,["a","b"],["quotient","remainder"],"js"),[U]:ee(U,"Input A","10",400,500,[],["value"],"input"),[O]:ee(O,"Input B","3",400,700,[],["value"],"input"),[q]:ee(q,"Quotient","",1e3,500,["value"],[],"output"),[z]:ee(z,"Remainder","",1e3,700,["value"],[],"output"),[F]:ee(F,"Summarize Story","Summarize the story of the hero's journey so far, based on the provided inputs.",1300,600,["call","ordeal"],["summary"],"nl"),[Z]:ee(Z,"Summary Output","",1600,600,["value"],[],"output")}}},relationships:[{id:`rel-${e+1}`,sourceEntryId:m,targetEntryId:g,sourceLabel:"Refused the Call",targetLabel:"From the Call"},{id:`rel-${e+2}`,sourceEntryId:m,targetEntryId:y,sourceLabel:"Accepted the Call",targetLabel:"Prompted by Acceptance"},{id:`rel-${e+3}`,sourceEntryId:g,targetEntryId:y,sourceLabel:"To the Mentor",targetLabel:"Prompted by Refusal"},{id:`rel-${e+4}`,sourceEntryId:y,targetEntryId:h,sourceLabel:"To the Threshold",targetLabel:"From Mentor's Aid"},{id:`rel-${e+5}`,sourceEntryId:h,targetEntryId:v,sourceLabel:"To the Ordeal",targetLabel:"Hero Arrives"},{id:`rel-${e+6}`,sourceEntryId:v,targetEntryId:C,sourceLabel:"Hero Victorious",targetLabel:"From Victory"},{id:`rel-${e+7}`,sourceEntryId:C,targetEntryId:E,sourceLabel:"To the Road Back",targetLabel:"From the Reward"},{id:`rel-${e+8}`,sourceEntryId:U,targetEntryId:x,sourceLabel:"value",targetLabel:"a",isInlined:!0},{id:`rel-${e+9}`,sourceEntryId:O,targetEntryId:x,sourceLabel:"value",targetLabel:"b"},{id:`rel-${e+10}`,sourceEntryId:x,targetEntryId:q,sourceLabel:"quotient",targetLabel:"value"},{id:`rel-${e+11}`,sourceEntryId:x,targetEntryId:z,sourceLabel:"remainder",targetLabel:"value",isInlined:!0},{id:`rel-${e+12}`,sourceEntryId:m,targetEntryId:F,sourceLabel:"Story Beat",targetLabel:"call"},{id:`rel-${e+13}`,sourceEntryId:v,targetEntryId:F,sourceLabel:"Story Beat",targetLabel:"ordeal"},{id:`rel-${e+14}`,sourceEntryId:F,targetEntryId:Z,sourceLabel:"summary",targetLabel:"value"}]}},exampleBookId:n}},e1=()=>{const[n,e]=ae.useState(window.location.hash),[i,l]=ae.useState(null),[c,f]=ae.useState(!0),[m,g]=ae.useState(!1),[y,h]=ae.useState(null),[v,C]=ae.useState(null),[E,x]=ae.useState(null),[U,O]=ae.useState(null),[q,z]=ae.useState(null),[F,Z]=ae.useState(null),[ee,ce]=ae.useState(!1),[fe,oe]=ae.useState(!0),[pe,j]=ae.useState(!1),[me,re]=ae.useState(!1),[ve,nt]=ae.useState(null),[Bt,yt]=ae.useState(!1),[L,ie]=ae.useState(null),[xe,qe]=ae.useState(!1),[Qe,M]=ae.useState(null),[$,ue]=ae.useState(null),se=ae.useRef(null),Q=ae.useMemo(()=>new _v,[]),ze=ae.useRef(null),ot=ae.useRef(null),Pt=ae.useRef(null),he=ae.useMemo(()=>["app-data","books"],[]),qt=ae.useMemo(()=>["app-data","base"],[]);ae.useEffect(()=>{const R=()=>e(window.location.hash);return window.addEventListener("hashchange",R),()=>window.removeEventListener("hashchange",R)},[]);const{view:rn,selectedBookId:P,selectedPovId:le,selectedEntryId:W,fromView:be}=ae.useMemo(()=>{const R=n.startsWith("#/")?n.substring(2):n.substring(1),I=new URLSearchParams(R),w=I.get("view")||"globalGraph",G=I.get("bookId"),V=I.get("povId"),Y=I.get("entryId"),te=I.get("from");switch(w){case"editor":return{view:"editor",selectedBookId:G,selectedPovId:V,selectedEntryId:Y,fromView:te};case"entryList":return{view:"entryList",selectedBookId:G,selectedPovId:V,selectedEntryId:null,fromView:null};case"povList":return{view:"povList",selectedBookId:G,selectedPovId:null,selectedEntryId:null,fromView:null};case"graph":return{view:"graph",selectedBookId:G,selectedPovId:null,selectedEntryId:null,fromView:null};case"list":return{view:"list",selectedBookId:null,selectedPovId:null,selectedEntryId:null,fromView:null};case"globalGraph":return{view:"globalGraph",selectedBookId:null,selectedPovId:null,selectedEntryId:null,fromView:null};default:return{view:"globalGraph",selectedBookId:null,selectedPovId:null,selectedEntryId:null,fromView:null}}},[n]);ae.useEffect(()=>{(async()=>{f(!0);const I=await Q.get(he);if(I&&Object.keys(I).length>0){const{migratedBooks:w,wasMigrated:G}=ma(I);G&&await Q.set(he,w),l(w)}else{const{exampleData:w,exampleBookId:G}=jN();l(w),await Q.set(he,w),window.location.hash=`#/view=graph&bookId=${G}`}f(!1)})()},[Q,he]),ae.useEffect(()=>{const R=Xp.startsWith("YOUR_"),I=Vu.startsWith("YOUR_");if(R||I){let V="Configuration error:";R&&(V+=" Google Client ID is not set."),I&&(V+=" Google API Key is not set."),h(V);return}const w=document.createElement("script");w.src="https://accounts.google.com/gsi/client",w.async=!0,w.defer=!0,w.onload=()=>{try{const V=window.google.accounts.oauth2.initTokenClient({client_id:Xp,scope:"https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/drive.file",callback:Y=>{try{if(!Y||Object.keys(Y).length===0){h("Sign-in failed: An empty response was received."),f(!1);return}if(Y.error){["access_denied","cancelled"].includes(Y.error)?h(null):h(`Sign-in failed: ${Y.error_description||Y.error}`),f(!1);return}Y.access_token?(Z(Y.access_token),O(new xv(Y.access_token))):(h("Sign-in failed: An unexpected response was received."),f(!1))}catch(te){console.error("Error within the Google Sign-In callback:",te),h("Sign-in failed: An internal error occurred during authentication."),f(!1)}},error_callback:Y=>{console.warn("Google Sign-In infrastructural error:",Y),h(null),f(!1)}});z(V)}catch{h("Could not initialize Google Sign-In.")}},document.body.appendChild(w);const G=document.createElement("script");G.src="https://apis.google.com/js/api.js",G.async=!0,G.defer=!0,G.onload=()=>{window.gapi.load("client:picker",()=>{ce(!0)})},document.body.appendChild(G)},[]);const Ve=ae.useCallback(async()=>{Z(null),O(null),h(null),C(null)},[]);ae.useEffect(()=>{(async()=>{if(U){f(!0),h(null),C(null);try{const I=await U.getContentAndRevision("books",{}),{migratedBooks:w}=ma(I.value),G=await Q.get(he)??{},{migratedBooks:V}=ma(G),Y=await Q.get(qt);if(!Y)Object.keys(w).length>0?Object.keys(V).length>0&&JSON.stringify(V)!==JSON.stringify(w)?C({local:V,remote:w,remoteRevisionId:I.revisionId}):(l(w),await Q.set(he,w),await Q.set(qt,{books:w,revisionId:I.revisionId})):await Q.set(qt,{books:{},revisionId:I.revisionId});else{const te=I.revisionId!==Y.revisionId,ne=JSON.stringify(V)!==JSON.stringify(Y.books);te&&ne?JSON.stringify(V)===JSON.stringify(w)?await Q.set(qt,{books:V,revisionId:I.revisionId}):C({local:V,remote:w,remoteRevisionId:I.revisionId}):te&&(l(w),await Q.set(he,w),await Q.set(qt,{books:w,revisionId:I.revisionId}))}}catch(I){h(I.message),I.message.includes("sign in again")&&Ve()}finally{f(!1)}}})()},[U,Q,he,qt,Ve]),ae.useEffect(()=>{if(c||i===null)return;(async()=>{const I=await Q.get(qt),w=I==null?void 0:I.books;if(w===void 0){const V=Object.keys(i).length===0;oe(V);return}const G=JSON.stringify(i)!==JSON.stringify(w);oe(!G)})()},[i,c,Q,qt]),ae.useEffect(()=>{if(!(!U||c||v||i===null||fe))return se.current&&clearTimeout(se.current),se.current=window.setTimeout(async()=>{const R=await Q.get(qt);if(!(R&&JSON.stringify(i)===JSON.stringify(R.books))){g(!0),h(null);try{const I=await U.set("books",i);await Q.set(qt,{books:i,revisionId:I.headRevisionId}),oe(!0)}catch(I){h(I.message),I.message.includes("sign in again")&&Ve()}finally{g(!1)}}},6e4),()=>{se.current&&clearTimeout(se.current)}},[i,U,c,v,Q,qt,Ve,fe]),ae.useEffect(()=>{E==="book"&&ze.current?(ze.current.focus(),x(null)):E==="pov"&&ot.current?(ot.current.focus(),x(null)):E==="entry"&&Pt.current&&(Pt.current.focus(),x(null))},[E,rn]);const Me=R=>{if(!F||!ee||!i||!R)return;qe(!1);const I=Vu,w=new window.google.picker.DocsView().setIncludeFolders(!0).setMimeTypes("application/vnd.google-apps.folder").setSelectFolderEnabled(!0);new window.google.picker.PickerBuilder().addView(w).enableFeature(window.google.picker.Feature.SUPPORT_DRIVE).setTitle("Select a folder to export to").setOAuthToken(F).setDeveloperKey(I).setCallback(async V=>{if(V[window.google.picker.Response.ACTION]===window.google.picker.Action.PICKED){const te=V[window.google.picker.Response.DOCUMENTS][0][window.google.picker.Document.ID];f(!0),h(null);try{const ne="-------314159265358979323846",de=`\r
--${ne}\r
`,Ne=`\r
--${ne}--`,_e=JSON.stringify({books:i},null,2),Be={name:R,mimeType:"application/json",parents:[te]},Fe=de+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(Be)+de+`Content-Type: application/json\r
\r
`+_e+Ne,ct=await fetch("https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart",{method:"POST",headers:{Authorization:`Bearer ${F}`,"Content-Type":`multipart/related; boundary="${ne}"`},body:Fe});if(!ct.ok){const De=await ct.json();throw new Error(De.error.message||"Failed to create file.")}alert("Export successful!")}catch(ne){h(`Export failed: ${ne.message}`)}finally{f(!1),yt(!1)}}}).build().setVisible(!0)},ft=()=>{if(!F||!ee)return;const R=Vu,I=new window.google.picker.View(window.google.picker.ViewId.DOCS);I.setMimeTypes("application/json,text/plain"),new window.google.picker.PickerBuilder().addView(I).setTitle("Select a backup file to import").setOAuthToken(F).setDeveloperKey(R).setCallback(async G=>{if(G[window.google.picker.Response.ACTION]===window.google.picker.Action.PICKED){const Y=G[window.google.picker.Response.DOCUMENTS][0][window.google.picker.Document.ID];f(!0),h(null);try{const te=await fetch(`https://www.googleapis.com/drive/v3/files/${Y}?alt=media`,{headers:{Authorization:`Bearer ${F}`}});if(!te.ok)throw new Error("Could not read the selected file.");const ne=await te.json();if(ne&&typeof ne=="object"&&"books"in ne){const{migratedBooks:de}=ma(ne.books);ie(de)}else throw new Error("Invalid backup file format.")}catch(te){h(`Import failed: ${te.message}`)}finally{f(!1),yt(!1)}}}).build().setVisible(!0)},Se=async()=>{if(!(!L||!U)){f(!0),h(null);try{const R=await U.set("books",L);l(L),await Q.set(he,L),await Q.set(qt,{books:L,revisionId:R.headRevisionId})}catch(R){h(R.message)}finally{ie(null),f(!1)}}},ke=async R=>{f(!0),C(null);try{const I=await U.set("books",R);l(R),await Q.set(he,R),await Q.set(qt,{books:R,revisionId:I.headRevisionId})}catch(I){h(I.message)}finally{f(!1)}},st=()=>{if(q){f(!0),h(null);try{q.requestAccessToken()}catch{h("Sign-in failed: An unexpected error occurred."),f(!1)}}},Ue=ae.useCallback(async()=>{if(!(!U||i===null||m)){se.current&&clearTimeout(se.current),g(!0),h(null);try{const R=await U.set("books",i);await Q.set(qt,{books:i,revisionId:R.headRevisionId}),oe(!0)}catch(R){h(R.message),R.message.includes("sign in again")&&Ve()}finally{g(!1)}}},[U,i,Q,qt,Ve,m]),Ke=()=>{switch(console.log("Back button clicked at",new Date().toISOString(),"Current hash:",window.location.hash),rn){case"editor":be==="graph"&&P?window.location.hash=`#/view=graph&bookId=${P}`:P&&le?window.location.hash=`#/view=entryList&bookId=${P}&povId=${le}`:window.location.hash="#/view=list";break;case"entryList":P?window.location.hash=`#/view=povList&bookId=${P}`:window.location.hash="#/view=list";break;case"povList":case"graph":window.location.hash="#/view=list";break}},Le=()=>{P&&(window.location.hash=`#/view=graph&bookId=${P}`)},Ce=()=>{P&&(window.location.hash=`#/view=povList&bookId=${P}`)},Ae=()=>{window.location.hash="#/view=globalGraph"},Pe=()=>{window.location.hash="#/view=list"},dt=R=>{window.location.hash=`#/view=graph&bookId=${R}`},rt=R=>{P&&(window.location.hash=`#/view=entryList&bookId=${P}&povId=${R}`)},pt=R=>{P&&le&&(window.location.hash=`#/view=editor&bookId=${P}&povId=${le}&entryId=${R}&from=entryList`)},It=(R,I,w)=>{window.location.hash=`#/view=editor&bookId=${R}&povId=${I}&entryId=${w}&from=graph`},Ze=ae.useCallback((R,I,w)=>{const G=JSON.parse(JSON.stringify(R)),V=G[I];if(!V||!V.relationships)return G;const Y=new Set([w]),te=new Set;for(;Y.size>0;){const ne=Y.values().next().value;if(Y.delete(ne),!te.has(ne)){te.add(ne);for(const de of V.relationships)if(de.sourceEntryId===ne){const Ne=de.targetEntryId;for(const _e of Object.values(V.povs))if(_e.entries[Ne]){const Be=_e.entries[Ne];Be.dirty!==!0&&(Be.dirty=!0),Y.add(Ne);break}}}}return G},[]),we=ae.useCallback(async R=>{if(!P||!le||!W||!i)return;let I=JSON.parse(JSON.stringify(i));const w=I[P].povs[le].entries[W];R(w,I),w.dirty=!1,I=Ze(I,P,W),l(I),await Q.set(he,I)},[i,P,le,W,Ze,Q,he]),Oe=async()=>{if(!i)return;const R=`book-${Date.now()}`,I={title:"",povs:{},relationships:[]},w={...i,[R]:I};l(w),await Q.set(he,w),x("book"),window.location.hash=`#/view=graph&bookId=${R}`},Xe=async()=>{if(!i||!P)return;const R=`pov-${Date.now()}`,I={title:"",entries:{}},w=JSON.parse(JSON.stringify(i));w[P].povs[R]=I,l(w),await Q.set(he,w),x("pov"),window.location.hash=`#/view=entryList&bookId=${P}&povId=${R}`},Te=async R=>{const{povId:I,title:w,preventNavigation:G,position:V}=R||{},Y=I||le;if(!i||!P||!Y)return;const te=`entry-${Date.now()}`,ne=Date.now(),de=`v-${ne}`,Ne={id:te,type:"prose",versions:{[de]:{id:de,timestamp:ne,content:"",name:"Initial Version",title:w||""}},activeVersionId:de,x:V==null?void 0:V.x,y:V==null?void 0:V.y,inputs:[],outputs:[],dirty:!1},_e=JSON.parse(JSON.stringify(i));return _e[P].povs[Y].entries[te]=Ne,l(_e),await Q.set(he,_e),G||(x("entry"),window.location.hash=`#/view=editor&bookId=${P}&povId=${Y}&entryId=${te}`),te},We=async R=>{if(!i)return;const{type:I,id:w,context:G}=R,V=JSON.parse(JSON.stringify(i));if(I==="book")delete V[w],P===w&&Pe();else if(I==="pov"&&P)delete V[P].povs[w],le===w&&Ke();else if(I==="entry"){const Y=(G==null?void 0:G.bookId)||P;if(!Y||!V[Y])return;let te=null;for(const ne in V[Y].povs)if(V[Y].povs[ne].entries[w]){te=ne;break}te&&(delete V[Y].povs[te].entries[w],V[Y].relationships&&(V[Y].relationships=V[Y].relationships.filter(ne=>ne.sourceEntryId!==w&&ne.targetEntryId!==w))),W===w&&rn==="editor"&&Ke()}l(V),await Q.set(he,V)},vt=R=>{if(!i)return;const{type:I,id:w,context:G}=R;if(I==="book"){const V=i[w];V&&V.title.trim()===""&&Object.keys(V.povs).length===0?We(R):nt(R);return}if(I==="pov"&&P){const V=i[P].povs[w];V&&V.title.trim()===""&&Object.keys(V.entries).length===0?We(R):nt(R);return}if(I==="entry"){const V=(G==null?void 0:G.bookId)||P;if(!V)return;const Y=i[V];if(!Y)return;let te=null;for(const _e of Object.values(Y.povs))if(_e.entries[w]){te=_e.entries[w];break}if(!te)return;const ne=te.versions[te.activeVersionId],de=ne.title.trim()==="",Ne=!ne.content||ne.content.trim()==="";de&&Ne?We(R):nt(R);return}nt(R)},Tt=async()=>{ve&&(await We(ve),nt(null))},Ct=ae.useCallback(async R=>{await we(I=>{const w=I.activeVersionId;I.versions[w].content=R})},[we]),ut=async R=>{if(!P||!i)return;const I=JSON.parse(JSON.stringify(i));I[P].title=R,l(I),await Q.set(he,I)},Dt=async R=>{if(!P||!le||!i)return;const I=JSON.parse(JSON.stringify(i));I[P].povs[le].title=R,l(I),await Q.set(he,I)},At=ae.useCallback(async R=>{await we(I=>{const w=I.activeVersionId;I.versions[w].title=R})},[we]),$t=ae.useCallback(async R=>{await we(I=>{I.type=R})},[we]),Ft=ae.useCallback(async(R,I)=>{I.trim()&&await we(w=>{if(w.type==="input"||w.type==="output"){alert("Input and Output nodes have fixed sockets that cannot be modified.");return}const G=R==="input"?w.inputs||(w.inputs=[]):w.outputs||(w.outputs=[]);if(G.includes(I.trim())){alert(`A socket named "${I.trim()}" already exists.`);return}G.push(I.trim())})},[we]),pn=ae.useCallback(async(R,I,w)=>{await we(G=>{if(G.type==="input"||G.type==="output"){alert("Input and Output nodes have fixed sockets that cannot be modified.");return}const V=R==="input"?G.inputs:G.outputs;if(!V)return;const Y=V.indexOf(I);if(Y===-1)return;const te=w.trim();if(!te)V.splice(Y,1);else if(V.some((ne,de)=>ne===te&&de!==Y)){alert(`A socket named "${te}" already exists.`);return}else V[Y]=te})},[we]),mn=ae.useCallback(async(R,I)=>{await we(w=>{if(w.type==="input"||w.type==="output"){alert("Input and Output nodes have fixed sockets that cannot be modified.");return}const G=R==="input"?w.inputs:w.outputs;if(!G)return;const V=G.indexOf(I);V>-1&&G.splice(V,1)})},[we]),en=async R=>{if(!P||!i)return;const w=i[P].povs,G=Object.keys(w)[0];if(!G){alert("Please create a Point of View first before adding entries to the graph.");return}await Te({povId:G,preventNavigation:!0,position:R})},St=async R=>{if(!i)return;const I=Date.now(),w=`book-${I}`,G=`pov-${I}`,V=`entry-${I}`,Y=`v-${I}`,te={id:V,type:"prose",versions:{[Y]:{id:Y,timestamp:I,content:"",name:"Initial Version",title:""}},activeVersionId:Y,x:R.x,y:R.y,inputs:[],outputs:[],dirty:!1},ne={title:"",entries:{[V]:te}},de={title:"",povs:{[G]:ne},relationships:[]},Ne={...i,[w]:de};l(Ne),await Q.set(he,Ne)},hn=ae.useCallback((R,I)=>{const{id:w,bookId:G,povId:V}=R;l(Y=>{var de,Ne,_e,Be;if(!Y)return null;const te=(Be=(_e=(Ne=(de=Y[G])==null?void 0:de.povs)==null?void 0:Ne[V])==null?void 0:_e.entries)==null?void 0:Be[w];if(!te||te.x===I.x&&te.y===I.y)return Y;const ne=JSON.parse(JSON.stringify(Y));return ne[G].povs[V].entries[w].x=I.x,ne[G].povs[V].entries[w].y=I.y,Q.set(he,ne),ne})},[Q,he]),un=ae.useCallback(async(R,I)=>{var de,Ne,_e,Be;if(!i)return;const{bookId:w,povId:G,id:V}=R;let Y=JSON.parse(JSON.stringify(i));const te=(Be=(_e=(Ne=(de=Y[w])==null?void 0:de.povs)==null?void 0:Ne[G])==null?void 0:_e.entries)==null?void 0:Be[V];if(!te)return;const ne=te.versions[te.activeVersionId];ne.content!==I&&(ne.content=I,te.dirty=!1,Y=Ze(Y,w,V),l(Y),await Q.set(he,Y))},[i,Q,he,Ze]),Zn=ae.useCallback(async(R,I,w)=>{if(!i)return;let G=JSON.parse(JSON.stringify(i));const V=G[w];if(!V||!V.relationships)return;const Y=V.relationships.find(_e=>_e.id===R);if(!Y)return;const te=Y.sourceEntryId;let ne=null;for(const[_e,Be]of Object.entries(V.povs))if(Be.entries[te]){ne=_e;break}if(!ne)return;const de=V.povs[ne].entries[te],Ne=de.versions[de.activeVersionId];Ne.content!==I&&(Ne.content=I,de.dirty=!1,G=Ze(G,w,te),l(G),await Q.set(he,G))},[i,Q,he,Ze]),il=async(R,I,w)=>{var de,Ne,_e,Be;if(!i||!w||R.type==="input"||R.type==="output")return;const{bookId:G,povId:V,id:Y}=R,te=JSON.parse(JSON.stringify(i)),ne=(Be=(_e=(Ne=(de=te[G])==null?void 0:de.povs)==null?void 0:Ne[V])==null?void 0:_e.entries)==null?void 0:Be[Y];if(ne){if(I==="input"){if(ne.inputs||(ne.inputs=[]),!ne.inputs.includes(w))ne.inputs.push(w);else if(!w.startsWith("__editing_"))return}else if(ne.outputs||(ne.outputs=[]),!ne.outputs.includes(w))ne.outputs.push(w);else if(!w.startsWith("__editing_"))return;l(te),await Q.set(he,te)}},mi=async(R,I,w,G)=>{var Fe,ct,De,je;if(!i||R.type==="input"||R.type==="output")return;const{bookId:V,povId:Y,id:te}=R;let ne=JSON.parse(JSON.stringify(i));const de=(je=(De=(ct=(Fe=ne[V])==null?void 0:Fe.povs)==null?void 0:ct[Y])==null?void 0:De.entries)==null?void 0:je[te];if(!de)return;const Ne=I==="input"?de.inputs||(de.inputs=[]):de.outputs||(de.outputs=[]),_e=Ne.indexOf(w);if(_e===-1){console.warn(`Old socket label "${w}" not found for update.`);return}const Be=G.trim();if(Be){if(Ne.some((Ye,Ge)=>Ye===Be&&Ge!==_e)){alert(`A socket named "${Be}" already exists on this node.`),w.startsWith("__editing_")&&Ne.splice(_e,1),l(ne),await Q.set(he,ne);return}Ne[_e]=Be}else Ne.splice(_e,1);de.dirty=!1,ne=Ze(ne,V,te),l(ne),await Q.set(he,ne)},hi=async R=>{var I,w;if(i){f(!0),h(null);try{const G=(w=(I=i[R.bookId])==null?void 0:I.povs[R.povId])==null?void 0:w.entries[R.id];if(!G)throw new Error("Source entry not found.");const V=G.versions[G.activeVersionId],Y=`Based on the following entry titled "${V.title}" with the content "${V.content}", generate 4 related ideas. For each idea, provide a short title and a one-sentence summary. Return the response as a JSON array of objects, where each object has "title" and "summary" keys.`,te=new vh({apiKey:Nh.API_KEY}),ne={type:Gn.ARRAY,items:{type:Gn.OBJECT,properties:{title:{type:Gn.STRING},summary:{type:Gn.STRING}},required:["title","summary"]}},de=await te.models.generateContent({model:"gemini-2.5-flash",contents:Y,config:{responseMimeType:"application/json",responseSchema:ne}}),Ne=JSON.parse(de.text),_e=JSON.parse(JSON.stringify(i)),Be=300;Ne.forEach((Fe,ct)=>{const De=Date.now()+ct,je=`entry-${De}`,Ye=`v-${De}`,Ge=2*Math.PI/Ne.length*ct,Gt={id:je,type:"prose",versions:{[Ye]:{id:Ye,timestamp:De,content:Fe.summary,name:"Initial Version",title:Fe.title}},activeVersionId:Ye,x:(R.x??0)+Be*Math.cos(Ge),y:(R.y??0)+Be*Math.sin(Ge),inputs:[],outputs:[]};_e[R.bookId].povs[R.povId].entries[je]=Gt}),l(_e),await Q.set(he,_e)}catch(G){console.error("Error generating ideas:",G),h(`Failed to generate ideas: ${G.message}`)}finally{f(!1)}}},ll=async R=>{if(!i||!R.bookId)return;const I=i[R.bookId];if(!I)return;let w,G;for(const[De,je]of Object.entries(I.povs))if(je.entries[R.id]){w=je.entries[R.id],G=De;break}if(!w||w.type!=="js"||!G)return;const V=w.versions[w.activeVersionId];if(!V||!V.content)return;const Y=V.content,te={},ne=(I.relationships||[]).filter(De=>De.targetEntryId===R.id),de=new Map;Object.values(I.povs).forEach(De=>{Object.values(De.entries).forEach(je=>de.set(je.id,je))});let Ne=!1;for(const De of ne){const je=de.get(De.sourceEntryId);if(je){je.dirty&&(Ne=!0);const Ye=je.versions[je.activeVersionId].content;te[De.targetLabel]=Ye}}let _e={};try{const De=Object.keys(te),je=`
            ${De.map(Ge=>`let ${Ge} = ${JSON.stringify(te[Ge])};`).join(`
`)}
            ${De.map(Ge=>`if (!isNaN(parseFloat(${Ge}))) ${Ge} = parseFloat(${Ge});`).join(`
`)}
            ${(w.outputs||[]).map(Ge=>`let ${Ge};`).join(`
`)}
            ${Y}
            const __outputs = {};
            ${(w.outputs||[]).map(Ge=>`__outputs['${Ge}'] = typeof ${Ge} === 'undefined' ? null : ${Ge};`).join(`
`)}
            return __outputs;
        `;_e=new Function(je)()}catch(De){h(`Error executing code: ${De.message}`),console.error("Code execution error:",De);return}let Be=JSON.parse(JSON.stringify(i)),Fe=new Set;for(const De in _e)if(Object.prototype.hasOwnProperty.call(_e,De)){const je=_e[De],Ye=(Be[R.bookId].relationships||[]).filter(Ge=>Ge.sourceEntryId===R.id&&Ge.sourceLabel===De);for(const Ge of Ye){let Gt;for(const Ht of Object.values(Be[R.bookId].povs))if(Ht.entries[Ge.targetEntryId]){Gt=Ht.entries[Ge.targetEntryId];break}if(Gt){const Ht=Gt.versions[Gt.activeVersionId],An=String(je??"");Ht.content!==An&&(Ht.content=An,Gt.dirty=!1,Fe.add(Gt.id))}}}if(!Ne){const De=Be[R.bookId].povs[G].entries[R.id];De&&(De.dirty=!1)}let ct=Be;for(const De of Fe)ct=Ze(ct,R.bookId,De);l(ct),await Q.set(he,ct)},sl=async R=>{if(!i||!R.bookId)return;const I=i[R.bookId];if(!I)return;let w,G;for(const[Ye,Ge]of Object.entries(I.povs))if(Ge.entries[R.id]){w=Ge.entries[R.id],G=Ye;break}if(!w||w.type!=="nl"||!G)return;const V=w.versions[w.activeVersionId];if(!V||!V.content)return;const Y=V.content,te={},ne=(I.relationships||[]).filter(Ye=>Ye.targetEntryId===R.id),de=new Map;Object.values(I.povs).forEach(Ye=>{Object.values(Ye.entries).forEach(Ge=>de.set(Ge.id,Ge))});for(const Ye of ne){const Ge=de.get(Ye.sourceEntryId);if(Ge){const Gt=Ge.versions[Ge.activeVersionId].content;te[Ye.targetLabel]=Gt}}let Ne=`${Y}

`;if(Object.keys(te).length>0){Ne+=`Here is the input data:
`;for(const[Ye,Ge]of Object.entries(te))Ne+=`--- ${Ye} ---
${Ge}

`}f(!0),h(null);let _e="";try{_e=(await new vh({apiKey:Nh.API_KEY}).models.generateContent({model:"gemini-2.5-flash",contents:Ne})).text}catch(Ye){h(`Error executing NL prompt: ${Ye.message}`),console.error("NL execution error:",Ye),f(!1);return}finally{f(!1)}let Be=JSON.parse(JSON.stringify(i)),Fe=new Set;const ct=w.outputs||[];for(const Ye of ct){const Ge=(Be[R.bookId].relationships||[]).filter(Gt=>Gt.sourceEntryId===R.id&&Gt.sourceLabel===Ye);for(const Gt of Ge){let Ht;for(const An of Object.values(Be[R.bookId].povs))if(An.entries[Gt.targetEntryId]){Ht=An.entries[Gt.targetEntryId];break}if(Ht){const An=Ht.versions[Ht.activeVersionId],Dn=_e??"";An.content!==Dn&&(An.content=Dn,Ht.dirty=!1,Fe.add(Ht.id))}}}const De=Be[R.bookId].povs[G].entries[R.id];De&&(De.dirty=!1);let je=Be;for(const Ye of Fe)je=Ze(je,R.bookId,Ye);l(je),await Q.set(he,je)},Yn=async R=>{if(!P||!le||!W||!i||!R.trim())return;let I=JSON.parse(JSON.stringify(i));const w=I[P].povs[le].entries[W],G=w.versions[w.activeVersionId],V=`v-${Date.now()}`,Y={...G,id:V,timestamp:Date.now(),name:R.trim()};w.versions[V]=Y,w.activeVersionId=V,w.dirty=!1,I=Ze(I,P,W),l(I),await Q.set(he,I),j(!1)},Wt=async R=>{if(!P||!le||!W||!i)return;let I=JSON.parse(JSON.stringify(i));const w=I[P].povs[le].entries[W];w.activeVersionId=R,w.dirty=!1,I=Ze(I,P,W),l(I),await Q.set(he,I),re(!1)},cn=async R=>{if(!P||!le||!W||!i)return;const I=i[P].povs[le].entries[W];if(Object.keys(I.versions).length<=1){alert("You cannot delete the only version of this entry.");return}if(window.confirm("Are you sure you want to delete this version? This action cannot be undone.")){const w=JSON.parse(JSON.stringify(i)),G=w[P].povs[le].entries[W];delete G.versions[R],G.activeVersionId===R&&(G.activeVersionId=Object.values(G.versions).sort((V,Y)=>Y.timestamp-V.timestamp)[0].id),l(w),await Q.set(he,w)}},So=async(R,I)=>{!P||!le||!W||!i||!I.trim()||await we(w=>{w.versions[R].name=I.trim()})},al=async R=>{if(!i||!P||!le||!W||!R||R===le)return;const I=le,w=JSON.parse(JSON.stringify(i)),G=w[P];if(!G.povs[I]||!G.povs[I].entries[W]){console.error("Entry to move not found in old POV.");return}const V=G.povs[I].entries[W];if(!G.povs[R]){console.error("Target POV does not exist.");return}G.povs[R].entries[W]=V,delete G.povs[I].entries[W],l(w),await Q.set(he,w),window.location.hash=`#/view=editor&bookId=${P}&povId=${R}&entryId=${W}&from=${be}`},xa=()=>{P&&(ue(P),M("new"))},ts=R=>{const I=rn==="globalGraph"?R.bookId:P;if(!I){console.error("Could not determine book context for editing relationship.");return}ue(I),M(R)},gi=()=>{M(null),ue(null)},$o=async R=>{var V;const I=$;if(!I||!i)return;if(!R.id&&((V=i[I].relationships)==null?void 0:V.find(te=>te.targetEntryId===R.targetEntryId&&te.targetLabel===R.targetLabel))){alert(`The input socket "${R.targetLabel}" is already connected. An input can only have one connection.`);return}const w=JSON.parse(JSON.stringify(i)),G=w[I];if(G.relationships||(G.relationships=[]),R.id){const Y=G.relationships.findIndex(te=>te.id===R.id);Y>-1&&(G.relationships[Y]={...G.relationships[Y],...R})}else{const Y={id:`rel-${Date.now()}`,sourceEntryId:R.sourceEntryId,targetEntryId:R.targetEntryId,sourceLabel:R.sourceLabel,targetLabel:R.targetLabel};G.relationships.push(Y)}l(w),await Q.set(he,w),gi()},yi=async R=>{const{bookId:I,sourceEntryId:w,targetEntryId:G,sourceLabel:V,targetLabel:Y}=R;if(!I||!i)return;const te=JSON.parse(JSON.stringify(i)),ne=te[I];ne.relationships||(ne.relationships=[]);let de=!1;for(const Be of Object.values(ne.povs))if(Be.entries[w]&&Be.entries[w].type==="input"){de=!0;break}let Ne=!1;for(const Be of Object.values(ne.povs))if(Be.entries[G]&&Be.entries[G].type==="output"){Ne=!0;break}const _e={id:`rel-${Date.now()}`,sourceEntryId:w,targetEntryId:G,sourceLabel:V,targetLabel:Y,isInlined:de||Ne};ne.relationships.push(_e),l(te),await Q.set(he,te)},Wn=async R=>{var Ge,Gt,Ht,An;const{targetNode:I,newSocketType:w,newSocketLabel:G,sourceEntryId:V,sourceSocketLabel:Y,targetSocketLabel:te}=R,ne=I.id;if(!i)return;const de=JSON.parse(JSON.stringify(i)),{bookId:Ne,povId:_e,id:Be}=I,Fe=(An=(Ht=(Gt=(Ge=de[Ne])==null?void 0:Ge.povs)==null?void 0:Gt[_e])==null?void 0:Ht.entries)==null?void 0:An[Be];if(!Fe)return;if(w==="input"){if(Fe.inputs||(Fe.inputs=[]),Fe.inputs.includes(G)){alert(`A socket named "${G}" already exists on this node.`);return}Fe.inputs.push(G)}else{if(Fe.outputs||(Fe.outputs=[]),Fe.outputs.includes(G)){alert(`A socket named "${G}" already exists on this node.`);return}Fe.outputs.push(G)}const ct=de[Ne];ct.relationships||(ct.relationships=[]);let De=!1;for(const Dn of Object.values(ct.povs))if(Dn.entries[V]&&Dn.entries[V].type==="input"){De=!0;break}let je=!1;for(const Dn of Object.values(ct.povs))if(Dn.entries[ne]&&Dn.entries[ne].type==="output"){je=!0;break}const Ye={id:`rel-${Date.now()}`,sourceEntryId:V,targetEntryId:ne,sourceLabel:Y,targetLabel:te,isInlined:De||je};if(w==="input"&&ct.relationships.find(rl=>rl.targetEntryId===Ye.targetEntryId&&rl.targetLabel===Ye.targetLabel)){alert(`The input socket "${Ye.targetLabel}" is already connected. An input can only have one connection.`);return}ct.relationships.push(Ye),l(de),await Q.set(he,de)},Eo=async R=>{const I=$;if(!I||!i||!window.confirm("Are you sure you want to delete this relationship?"))return;const w=JSON.parse(JSON.stringify(i)),G=w[I];G.relationships&&(G.relationships=G.relationships.filter(V=>V.id!==R)),l(w),await Q.set(he,w),gi()},Ao=ae.useCallback(async(R,I,w,G)=>{if(!i)return;const V=JSON.parse(JSON.stringify(i)),Y=V[I];if(!Y||!Y.relationships)return;const te=Y.relationships.findIndex(_e=>_e.id===R);if(te===-1)return;const ne=Y.relationships[te],de=ne.isInlined??!1,Ne=typeof G=="boolean"?G:!de;if(Ne!==de){if(ne.isInlined=Ne,Ne===!1){const _e=ne.sourceEntryId,Be=ne.targetEntryId;let Fe=null,ct=null;for(const[De,je]of Object.entries(Y.povs))if(je.entries[_e]&&(Fe={povId:De,entry:je.entries[_e]}),je.entries[Be]&&(ct={povId:De,entry:je.entries[Be]}),Fe&&ct)break;if((Fe==null?void 0:Fe.entry.type)==="input"){const De=Y.povs[Fe.povId].entries[_e];De.x=(w.x??0)-200,De.y=w.y??0}else if((ct==null?void 0:ct.entry.type)==="output"){const De=Y.povs[ct.povId].entries[Be];De.x=(w.x??0)+300,De.y=w.y??0}}l(V),await Q.set(he,V)}},[i,Q,he]),tn=P&&i?i[P]:null,Lt=tn&&le?tn.povs[le]:null,jn=Lt&&W?Lt.entries[W]:null,Ko=$&&i?i[$]:null,eo=ae.useMemo(()=>{if(!Ko)return[];const R=[];return Object.entries(Ko.povs).forEach(([I,w])=>{Object.entries(w.entries).forEach(([G,V])=>{const Y=V.versions[V.activeVersionId];R.push({povId:I,povTitle:w.title||"Untitled POV",entryId:G,entryTitle:(Y==null?void 0:Y.title)||"Untitled Entry"})})}),R},[Ko]),to=ae.useMemo(()=>{if(!tn||!P)return{nodes:[],links:[]};const R=Object.entries(tn.povs).flatMap(([w,G])=>Object.values(G.entries).map(V=>{var Y,te;return{id:V.id,title:((Y=V.versions[V.activeVersionId])==null?void 0:Y.title)||"Untitled Entry",povId:w,povTitle:G.title||"Untitled POV",bookId:P,type:V.type||"prose",content:((te=V.versions[V.activeVersionId])==null?void 0:te.content)||"",x:V.x,y:V.y,inputs:V.inputs||[],outputs:V.outputs||[],dirty:V.dirty}})),I=(tn.relationships||[]).map(w=>({source:w.sourceEntryId,target:w.targetEntryId,...w}));return{nodes:R,links:I}},[tn,P]),ns=ae.useMemo(()=>{if(!i)return{nodes:[],links:[]};const R=[],I=[];return Object.entries(i).forEach(([w,G])=>{const V=Object.entries(G.povs).flatMap(([te,ne])=>Object.values(ne.entries).map(de=>{var Ne,_e;return{id:de.id,title:((Ne=de.versions[de.activeVersionId])==null?void 0:Ne.title)||"Untitled Entry",povId:te,povTitle:ne.title||"Untitled POV",bookId:w,type:de.type||"prose",content:((_e=de.versions[de.activeVersionId])==null?void 0:_e.content)||"",x:de.x,y:de.y,inputs:de.inputs||[],outputs:de.outputs||[],dirty:de.dirty}}));R.push(...V);const Y=(G.relationships||[]).map(te=>({...te,source:te.sourceEntryId,target:te.targetEntryId,bookId:w}));I.push(...Y)}),{nodes:R,links:I}},[i]),os=()=>{if(v)return S.jsx($N,{conflict:v,onResolve:ke});switch(rn){case"list":return S.jsx(NN,{books:i,onSelectBook:dt,onDeleteBook:(R,I)=>vt({type:"book",id:R,name:I})});case"povList":return S.jsx(RN,{povs:(tn==null?void 0:tn.povs)??{},onSelectPov:rt,onDeletePov:(R,I)=>vt({type:"pov",id:R,name:I})});case"graph":return S.jsx(Mh,{nodes:to.nodes,links:to.links,onSelectEntry:It,onEditRelationship:ts,onDeleteEntry:R=>vt({type:"entry",id:R.id,name:R.title,context:{bookId:R.bookId}}),onBackgroundClick:en,onGenerateIdeas:hi,onRecomputeCode:ll,onRecomputeNL:sl,onNodePositionChange:hn,onNodeContentChange:un,onAddRelationshipDirectly:R=>yi({...R,bookId:P}),onAddSocket:il,onUpdateSocketLabel:mi,onAddSocketAndConnect:Wn,onUpdateInlinedValue:Zn,onToggleRelationshipInlined:Ao});case"globalGraph":return S.jsx(Mh,{nodes:ns.nodes,links:ns.links,onSelectEntry:It,onEditRelationship:ts,onDeleteEntry:R=>vt({type:"entry",id:R.id,name:R.title,context:{bookId:R.bookId}}),onBackgroundClick:St,onGenerateIdeas:hi,onRecomputeCode:ll,onRecomputeNL:sl,onNodePositionChange:hn,onNodeContentChange:un,onAddSocket:il,onUpdateSocketLabel:mi,onAddSocketAndConnect:Wn,onUpdateInlinedValue:Zn,onToggleRelationshipInlined:Ao,onAddRelationshipDirectly:R=>{if(!i)return;const{sourceEntryId:I,targetEntryId:w}=R;let G=null,V=null;for(const[Y,te]of Object.entries(i))for(const ne of Object.values(te.povs))ne.entries[I]&&(G=Y),ne.entries[w]&&(V=Y);G&&G===V?yi(R):alert("Relationships can only be created between entries in the same book.")}});case"entryList":return S.jsx(DN,{entries:(Lt==null?void 0:Lt.entries)??{},onSelectEntry:pt,onDeleteEntry:(R,I)=>vt({type:"entry",id:R,name:I})});case"editor":return!jn||!tn||!P||!le?null:S.jsx(qN,{selectedEntry:jn,selectedBook:tn,selectedBookId:P,selectedPovId:le,onTextChange:Ct,onSocketAdd:Ft,onSocketChange:pn,onSocketDelete:mn,onSelectEntry:It,onPovChange:al,disabled:c||v!==null});default:return null}};return S.jsxs("div",{className:"app-container",children:[S.jsx(MN,{view:rn,books:i,selectedBookId:P,selectedPovId:le,selectedEntry:jn,tokenClient:q,accessToken:F,isSynced:fe,bookTitleInputRef:ze,povTitleInputRef:ot,entryTitleInputRef:Pt,onBack:Ke,onNavigateToGraph:Le,onNavigateToPovList:Ce,onNavigateToGlobalGraph:Ae,onNavigateToList:Pe,onEntryTitleChange:At,onEntryTypeChange:$t,onBookTitleChange:ut,onPovTitleChange:Dt,onAddNewBook:Oe,onAddNewPov:Xe,onAddNewEntry:()=>Te(),onOpenSaveVersionModal:()=>j(!0),onOpenVersionSelector:()=>re(!0),onOpenSettings:()=>yt(!0),onOpenRelationshipModal:xa,onSignIn:st,onSignOut:Ve,onManualSync:Ue}),S.jsxs("main",{className:`main-content ${rn==="editor"||rn==="graph"||rn==="globalGraph"?"editor-mode":""}`,children:[c&&S.jsx("div",{className:"loading-overlay",children:S.jsx("div",{className:"spinner"})}),i!==null&&os()]}),pe&&S.jsx(KN,{onClose:()=>j(!1),onSave:Yn}),me&&jn&&S.jsx(QN,{entry:jn,activeVersionId:jn.activeVersionId,onClose:()=>re(!1),onSelectVersion:Wt,onDeleteVersion:cn,onRenameVersion:So}),ve&&S.jsx(JN,{item:ve,onClose:()=>nt(null),onConfirm:Tt}),Bt&&S.jsx(XN,{onClose:()=>yt(!1),onExport:()=>qe(!0),onImport:ft,isPickerApiLoaded:ee,isLoading:c}),L&&S.jsx(YN,{onClose:()=>ie(null),onConfirm:Se}),xe&&S.jsx(ZN,{onClose:()=>qe(!1),onConfirm:Me}),Qe&&Ko&&S.jsx(WN,{relationship:Qe,allEntries:eo,onClose:gi,onSave:$o,onDelete:Eo}),m&&F&&S.jsx("div",{className:"status-indicator",children:"Saving..."}),y&&S.jsx("div",{className:"error",children:y})]})},t1=document.getElementById("root"),n1=Sv.createRoot(t1);n1.render(S.jsx(e1,{}));
